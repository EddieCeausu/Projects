/*!
 * Box Content Preview
 * 
 * Copyright 2019 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */!function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=143)}([function(e,t,n){"use strict";n.d(t,"T",function(){return i}),n.d(t,"K",function(){return r}),n.d(t,"U",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"d",function(){return h}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return p}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return b}),n.d(t,"q",function(){return m}),n.d(t,"r",function(){return y}),n.d(t,"s",function(){return g}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return E}),n.d(t,"v",function(){return k}),n.d(t,"w",function(){return O}),n.d(t,"x",function(){return S}),n.d(t,"m",function(){return P}),n.d(t,"n",function(){return L}),n.d(t,"E",function(){return x}),n.d(t,"y",function(){return C}),n.d(t,"z",function(){return _}),n.d(t,"A",function(){return j}),n.d(t,"B",function(){return T}),n.d(t,"C",function(){return H}),n.d(t,"D",function(){return A}),n.d(t,"H",function(){return R}),n.d(t,"I",function(){return I}),n.d(t,"J",function(){return M}),n.d(t,"S",function(){return V}),n.d(t,"L",function(){return D}),n.d(t,"Q",function(){return B}),n.d(t,"R",function(){return F}),n.d(t,"N",function(){return z}),n.d(t,"O",function(){return N}),n.d(t,"P",function(){return U}),n.d(t,"M",function(){return q}),n.d(t,"G",function(){return W}),n.d(t,"F",function(){return G}),n.d(t,"tb",function(){return K}),n.d(t,"nb",function(){return X}),n.d(t,"ub",function(){return Z}),n.d(t,"vb",function(){return Q}),n.d(t,"Cb",function(){return Y}),n.d(t,"Db",function(){return J}),n.d(t,"pb",function(){return $}),n.d(t,"ob",function(){return ee}),n.d(t,"sb",function(){return te}),n.d(t,"qb",function(){return ne}),n.d(t,"rb",function(){return ie}),n.d(t,"wb",function(){return re}),n.d(t,"xb",function(){return oe}),n.d(t,"yb",function(){return ae}),n.d(t,"zb",function(){return se}),n.d(t,"Ab",function(){return le}),n.d(t,"Bb",function(){return ce}),n.d(t,"ib",function(){return ue}),n.d(t,"jb",function(){return he}),n.d(t,"b",function(){return de}),n.d(t,"c",function(){return fe}),n.d(t,"db",function(){return pe}),n.d(t,"kb",function(){return ve}),n.d(t,"Eb",function(){return be}),n.d(t,"Fb",function(){return me}),n.d(t,"Gb",function(){return ye}),n.d(t,"Hb",function(){return ge}),n.d(t,"Kb",function(){return we}),n.d(t,"Lb",function(){return Ee}),n.d(t,"Mb",function(){return ke}),n.d(t,"Nb",function(){return Oe}),n.d(t,"Ob",function(){return Se}),n.d(t,"eb",function(){return Pe}),n.d(t,"gb",function(){return Le}),n.d(t,"hb",function(){return xe}),n.d(t,"fb",function(){return Ce}),n.d(t,"V",function(){return _e}),n.d(t,"ab",function(){return je}),n.d(t,"cb",function(){return Te}),n.d(t,"Ib",function(){return He}),n.d(t,"Jb",function(){return Ae}),n.d(t,"lb",function(){return Re}),n.d(t,"Y",function(){return Ie}),n.d(t,"Z",function(){return Me}),n.d(t,"mb",function(){return Ve}),n.d(t,"W",function(){return De}),n.d(t,"a",function(){return Be}),n.d(t,"bb",function(){return Fe}),n.d(t,"X",function(){return ze});var i="bp-is-navigation-visible",r="bp-is-hidden",o="bp-loaded",a="bp-btn",s="bp-find-bar",l="bp-has-header",c="bp-has-navigation",u="bp-header",h="bp-base-header",d="bp-link",f="bp-menu",p="bp-is-mobile",v="bp-overlay",b="bp-overlay-wrapper",m="bp-preload",y="bp-preload-content",g="bp-preload-overlay",w="bp-preload-spinner",E="bp-document-preload-wrapper",k="bp-presentation-preload-wrapper",O="bp-progress-bar",S="bp-progress-bar-container",P="bp-notification",L="bp-notifications-wrapper",x="bp-toggle-overlay",C="bp-theme-dark",_="bp-thumbnails-close",j="bp-thumbnails-close-active",T="bp-thumbnails-container",H="bp-thumbnails-open",A="bp-thumbnails-open-active",R="bp-has-keyboard-focus",I="bp-is-fullscreen",M="bp-fullscreen-unsupported",V="bp-multi-image-page",D="bp-is-invisible",B="bp-is-transparent",F="bp-is-visible",z="bp-is-printable",N="bp-is-scrollable",U="bp-is-selectable",q="bp-is-buffering",W="bp-dark",G="bp-crawler",K=".".concat("bp-container"),X=".".concat("bp"),Z=".".concat("bp-content"),Q=".bp-crawler-wrapper",Y=(".".concat("bp-header-btns"),".bp-navigate-left"),J=".bp-navigate-right",$=".bp-btn-annotate-point",ee=".bp-btn-annotate-draw",te=".bp-btn-print",ne=".bp-btn-download",ie=".bp-btn-loading-download",re=(".".concat(u),".".concat("bp-header-container")),oe=".".concat("bp-icon"),ae=".".concat("bp-loading-text"),se=".".concat("bp-loading-wrapper"),le=".".concat("bp-custom-logo"),ce=".".concat("bp-default-logo"),ue=(".".concat(O),".".concat(P),".".concat(T),"can_download"),he="can_preview",de="https://api.box.com",fe="https://app.box.com",pe="ORIGINAL",ve="jpg",be="none",me="pending",ye="success",ge="viewable",we="[3d][pdf][text][mp3]",Ee="[jpg?dimensions=1024x1024&paged=false]",ke="[jpg?dimensions=2048x2048,png?dimensions=2048x2048]",Oe="[dash,mp4][filmstrip]",Se="[mp4]",Pe=96/72,Le=1.25,xe=40,Ce=5,_e="2.16.0",je="2.14.0",Te="1.12.0",He="0.112.0",Ae="0.114.0",Re="preview.js",Ie="fileVersionId",Me="startAt",Ve="encoding",De={GZIP:"gzip"},Be={modeEnter:"annotationmodeenter",modeExit:"annotationmodeexit",fetch:"annotationsfetched",error:"annotationerror",scale:"scaleannotations"},Fe={FIELD_HASXREFS:"hasxrefs",SCOPE_GLOBAL:"global",TEMPLATE_AUTOCAD:"autocad"},ze="forbidden_by_policy"},function(e,t,n){"use strict";n.d(t,"n",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"j",function(){return o}),n.d(t,"k",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"a",function(){return h}),n.d(t,"l",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b});var i={download:"download",reload:"reload",load:"load",progressStart:"progressstart",progressEnd:"progressend",notificationShow:"notificationshow",notificationHide:"notificationhide",mediaEndAutoplay:"mediaendautoplay",error:"error",default:"viewerevent",metric:"viewermetric",thumbnailsClose:"thumbnailsClose",thumbnailsOpen:"thumbnailsOpen"},r={ACCOUNT:"error_account",BAD_INPUT:"error_bad_input",BROWSER_GENERIC:"error_browser_generic",BROWSER_UNSUPPORTED:"error_browser_unsupported",CONTENT_DOWNLOAD:"error_content_download",CONVERSION_FAILED:"error_conversion_failed",CONVERSION_GENERIC:"error_conversion_generic",CONVERSION_PASSWORD_PROTECTED:"error_password_protected",CONVERSION_TRY_AGAIN_LATER:"error_try_again_later",CONVERSION_UNSUPPORTED_FORMAT:"error_unsupported_format",DELETED_REPS:"error_deleted_reps",EXCEEDED_RETRY_LIMIT:"error_exceeded_retry_limit",FLASH_NOT_ENABLED:"error_flash_not_enabled",GENERIC:"error_generic",IMAGE_SIZING:"error_image_sizing",INVALID_CACHE_ATTEMPT:"error_invalid_file_for_cache",LOAD_ANNOTATIONS:"error_load_annotations",LOAD_ASSET:"error_load_asset",LOAD_CSV:"error_load_csv",LOAD_DOCUMENT:"error_load_document",LOAD_MEDIA:"error_load_media",LOAD_VIEWER:"error_load_viewer",NOT_DOWNLOADABLE:"error_file_not_downloadable",PARSE_CSV:"error_parse_csv",PERMISSIONS_PREVIEW:"error_permissions_preview",PREFETCH_FILE:"error_prefetch_file",RATE_LIMIT:"error_rate_limit",SHAKA:"error_shaka",UNSUPPORTED_FILE_TYPE:"error_unsupported_file_type",VIEWER_LOAD_TIMEOUT:"error_viewer_load_timeout"},o="preview_error",a="preview_metric",s={previewLoadEvent:"load",previewPreloadEvent:"preload",fileInfoTime:"file_info_time",convertTime:"convert_time",downloadResponseTime:"download_response_time",contentLoadTime:"full_document_load_time",preloadTime:"preload_time",previewLoadTime:"preview_loading"},l="preview_duration_metric",c="preview_end",u="preview_download_attempt",h={NOTIFICATION_SHOWN:"dl_reachability_notification_shown",DOWNLOAD_BLOCKED:"dl_reachability_host_blocked"},d={NEXT:"user_document_find_next",OPEN:"user_document_find_open",PREVIOUS:"user_document_find_previous"},f={CLOSE:"user_document_thumbnails_close",NAVIGATE:"user_document_thumbnails_navigate",OPEN:"user_document_thumbnails_open"},p="missing_x_refs",v={bufferFill:"bufferFill",duration:"duration",lagRatio:"lagRatio",seeked:"seeked",totalBufferLag:"totalBufferLag",watchLength:"watchLength"},b={bufferFill:"media_metric_buffer_fill",endPlayback:"media_metric_end_playback"}},function(e,t,a){"use strict";var n=a(128),r=a.n(n);var i=a(44),o=a(45),s=a(6),l=a(1);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.d(t,"a",function(){return f}),a.d(t,"z",function(){return g}),a.d(t,"y",function(){return w}),a.d(t,"i",function(){return E}),a.d(t,"s",function(){return k}),a.d(t,"j",function(){return O}),a.d(t,"o",function(){return S}),a.d(t,"e",function(){return P}),a.d(t,"d",function(){return L}),a.d(t,"h",function(){return x}),a.d(t,"g",function(){return C}),a.d(t,"B",function(){return _}),a.d(t,"x",function(){return j}),a.d(t,"w",function(){return T}),a.d(t,"k",function(){return H}),a.d(t,"l",function(){return A}),a.d(t,"D",function(){return R}),a.d(t,"E",function(){return I}),a.d(t,"F",function(){return M}),a.d(t,"b",function(){return V}),a.d(t,"c",function(){return D}),a.d(t,"C",function(){return B}),a.d(t,"A",function(){return F}),a.d(t,"p",function(){return z}),a.d(t,"n",function(){return N}),a.d(t,"m",function(){return U}),a.d(t,"G",function(){return q}),a.d(t,"q",function(){return W}),a.d(t,"v",function(){return G}),a.d(t,"t",function(){return K}),a.d(t,"f",function(){return X}),a.d(t,"u",function(){return Z}),a.d(t,"r",function(){return Q});var u="box-content-preview",h="box_client_name",d="box_client_version",f="2.23.0",p="X-Box-Client-Name",v="X-Box-Client-Version",b={};function m(){Object.keys(b).forEach(function(e){delete b[e]})}function y(){var e=document.querySelector("#downloadiframe");return e||((e=document.createElement("iframe")).setAttribute("id","downloadiframe"),e.style.display="none",e=document.body.appendChild(e)),e.src="about:blank",e}function g(e){var t=y();return t.src=e,t}function w(e){var t=y();return t.contentDocument&&(t.contentDocument.write(e),t.contentDocument.close()),t}function E(e,t){var n=document.createRange();return n.selectNode(e),n.createContextualFragment(t.replace(/>\s*</g,"><"))}function k(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;e.insertBefore(E(e,t),n)}function O(e){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,t}function S(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";return t&&(e.Authorization="Bearer ".concat(t)),n&&(e.BoxApi="shared_link=".concat(n),i&&(e.BoxApi="".concat(e.BoxApi,"&shared_link_password=").concat(i))),u&&(e[p]=u),f&&(e[v]=f),e}function P(e,n){if(!n)return e;var i=new r.a(e);return Object.keys(n).forEach(function(e){var t=n[e];t&&(i.hasQueryParam(e)?i.replaceQueryParam(e,t):i.addQueryParam(e,t))}),i.toString()}function L(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return n||i?P(e,(c(t={access_token:n,shared_link:i,shared_link_password:3<arguments.length&&void 0!==arguments[3]?arguments[3]:""},h,u),c(t,d,f),t)):e}function x(e,t){return i.a.isDownloadHostBlocked()&&(e=i.a.replaceDownloadHostWithDefault(e)),e.replace("{+asset_path}",t||"")}function C(e){var t=e.baseURI,n=e.staticBaseURI;return function(e){return 0===e.indexOf("http")?e:0===e.indexOf("third-party")?n+e:t+e}}function _(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=document.head,i=t?"preload":"prefetch";e.forEach(function(e){n.querySelector('link[rel="'.concat(i,'"][href="').concat(e,'"]'))||n.appendChild(function(e,t){var n=1<arguments.length&&void 0!==t&&t,i=document.createElement("link");return i.rel=n?"preload":"prefetch",i.href=e,n&&(i.as=-1!==e.indexOf(".js")?"script":"style"),i}(e,t))})}function j(e){var t=document.head;e.forEach(function(e){t.querySelector('link[rel="stylesheet"][href="'.concat(e,'"]'))||t.appendChild(O(e))})}function T(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=document.head,r=[],n=!!window.define&&"function"==typeof define&&!!a(236),o=n?define:void 0;return t&&n&&(define=void 0),e.forEach(function(e){if(!i.querySelector('script[src="'.concat(e,'"]'))&&!b[e]){var n=function(e){var t=document.createElement("script");return t.src=e,t.async=!1,t}(e);b[e]=new Promise(function(e,t){n.addEventListener("load",e),n.addEventListener("error",t)}),i.appendChild(n)}r.push(b[e])}),Promise.all(r).then(function(){t&&n&&(define=o),m()}).catch(function(){t&&n&&(define=o),m()})}function H(e){return function(e){var t="",n=e.keyIdentifier,i=e.key||n||"";return e.ctrlKey?t="Control":e.shiftKey?t="Shift":e.metaKey&&(t="Meta"),i===t&&(i=""),0===i.indexOf("U+")&&(i="U+001B"===i?"Escape":String.fromCharCode(Number(i.replace("U+","0x")))),i?(" "===i&&(i="Space"),"Esc"===i&&(i="Escape"),"Right"!==i&&"Left"!==i&&"Down"!==i&&"Up"!==i||(i="Arrow"+i),t&&(t+="+"),t+i):""}(e)}function A(e,t){var n=document.querySelector('script[src*="/'.concat(e,'"]'))||{},i=t?t.src:n.src;if(!i||-1===i.indexOf(e)&&-1===i.indexOf("__tests__"))throw new Error("Missing or malformed ".concat(e," library"));var r=document.createElement("a");r.href=i;var o=r.pathname,a=o.split("/"),s=a.length,l=a[s-1],c=a[s-2],u=a[s-3],h=r.search,d=r.href.replace(l,"").replace(h,""),f=d.replace("".concat(u,"/").concat(c,"/"),"");return{origin:r.origin,host:r.host,hostname:r.hostname,search:h,protocol:r.protocol,port:r.port,href:r.href,pathname:o,locale:c,version:u,baseURI:d,staticBaseURI:f}}function R(e,n){return e&&e.length?e.replace(/\{\d+\}/g,function(e){var t=parseInt(e.replace(/^\D+/g,""),10)-1;return n[t]?n[t]:e}):e}function I(e){return e.name.slice(0,e.name.lastIndexOf(".")).endsWith(".360")}function M(e,t,n){e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px")}function V(n){return function(e){if("click"===e.type)n(e);else if("keydown"===e.type){var t=H(e);"Space"!==t&&"Enter"!==t||(n(e),e.preventDefault(),e.stopPropagation())}}}function D(e,t){e.addEventListener("click",t),e.addEventListener("keydown",t)}function B(e,t){e.removeEventListener("click",t),e.removeEventListener("keydown",t)}function F(e,t,n,i){var r=e,o=i.scrollTop,a=i.scrollTop+i.offsetHeight,s=n.offsetTop+n.clientHeight/2;return t<o?r=s<o?e+1:e:o<t&&(r=a<s?e-1:e),r}function z(e,t,n,i){return[(e+n)/2,(t+i)/2]}function N(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function U(e,t,n){if(!n||!n.first||!n.last)return null;for(var i=null,r=n.first.id,o=null;r<=n.last.id;r+=1){var a=document.querySelector("#bp-page-".concat(r)),s=z(a.offsetLeft,a.offsetTop,a.offsetLeft+a.scrollWidth,a.offsetTop+a.scrollHeight),l=N(s[0],s[1],e,t);(!i||l<o)&&(i=a,o=l)}return i}function q(e){return"string"!=typeof e?e:e.replace(/access_token=([^&]*)/,"access_token=[FILTERED]")}function W(e,t,n){for(var i=e,r=t.split("."),o=0;o<r.length;o+=1){if(null==i)return n;i=i[r[o]]}return void 0!==i?i:n}function G(e){return/^\d+$/.test(e)}function K(){return/(app|ent)\.(box\.com|boxcn\.net|boxenterprise\.net)/.test(o.a.getHostname())}function X(e){var t="";return"all"===e?t="only_watermarked":"none"===e&&(t="only_non_watermarked"),t}function Z(){try{var e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function Q(e){if(202!==W(e,"status"))return Promise.resolve(e);var t=new s.a(l.c.DELETED_REPS,"We’re sorry, the preview didn’t load. Please refresh the page.",{isRepDeleted:!0});return Promise.reject(t)}},function(e,t,n){"use strict";n.d(t,"h",function(){return i}),n.d(t,"i",function(){return r}),n.d(t,"l",function(){return o}),n.d(t,"m",function(){return a}),n.d(t,"s",function(){return s}),n.d(t,"v",function(){return l}),n.d(t,"w",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return d}),n.d(t,"n",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return b}),n.d(t,"q",function(){return m}),n.d(t,"a",function(){return y}),n.d(t,"b",function(){return g}),n.d(t,"j",function(){return w}),n.d(t,"k",function(){return E}),n.d(t,"g",function(){return k}),n.d(t,"t",function(){return O}),n.d(t,"r",function(){return S}),n.d(t,"u",function(){return P}),n.d(t,"x",function(){return C}),n.d(t,"y",function(){return _});var i='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 10l5 5 5-5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n',r='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 14l5-5 5 5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n',o='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n        <path d="M0 0h24v24H0z" />\n    </g>\n</svg>\n\n',a='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z" />\n        <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n    </g>\n</svg>\n',s='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"/>\n</svg>\n',l='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>\n',c='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>\n</svg>\n',u='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/>\n    <path d="M0-.5h24v24H0z" fill="none"/>\n</svg>\n',h='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/>\n    <path d="M0-.25h24v24H0z" fill="none"/>\n</svg>\n',d='<svg fill="#22A7F0" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n</svg>\n',f='<svg version="1.1" width="24" height="24" viewBox="0 0 24 24" enable-background="new 0 0 24 24" focusable="false">\n    <path fill="#fff" d="M19.4,13c0-0.3,0.1-0.6,0.1-1s0-0.7-0.1-1l2.1-1.6c0.2-0.1,0.2-0.4,0.1-0.6l-2-3.5c-0.1-0.2-0.4-0.3-0.6-0.2l-2.5,1 c-0.5-0.4-1.1-0.7-1.7-1l-0.4-2.7C14.5,2.2,14.2,2,14,2h-4C9.8,2,9.5,2.2,9.5,2.4L9.1,5.1C8.5,5.3,8,5.7,7.4,6.1l-2.5-1 C4.7,5,4.5,5.1,4.3,5.3l-2,3.5C2.2,8.9,2.3,9.2,2.5,9.4L4.6,11c0,0.3-0.1,0.6-0.1,1s0,0.7,0.1,1l-2.1,1.6c-0.2,0.1-0.2,0.4-0.1,0.6 l2,3.5C4.5,18.9,4.7,19,5,18.9l2.5-1c0.5,0.4,1.1,0.7,1.7,1l0.4,2.6c0,0.2,0.2,0.4,0.5,0.4h4c0.2,0,0.5-0.2,0.5-0.4l0.4-2.6 c0.6-0.2,1.2-0.6,1.7-1l2.5,1c0.2,0.1,0.5,0,0.6-0.2l2-3.5c0.1-0.2,0.1-0.5-0.1-0.6L19.4,13z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5 s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"></path>\n</svg>\n',p='<svg width="24" height="22" viewBox="0 0 24 22" focusable="false">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0-1h24v24H0"/>\n    <path d="M18.49 4.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z" fill="#FFF"/>\n    <path d="M3 7h6M5 3h6M1 11h6" stroke="#FFF" stroke-width="2" stroke-linecap="square"/>\n  </g>\n</svg>\n',v='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n',b='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n',m='<svg fill="#fff" height="48" viewBox="0 0 24 24" width="48" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n',y='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\n</svg>\n',g='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0V0z" />\n        <path d="M2.045 17.25c1.114 1.296 5.66 1.487 7.033.268 1.374-1.22 1.367-1.733 2.972-1.733 1.692 0 1.436-.02 3.122 1.732 1.687 1.752 5.973.84 6.9-.268.927-1.11 1.507-7.72 0-10.038-1.507-2.317-18.38-2.25-20.027 0-1.647 2.252-1.114 8.74 0 10.037z" stroke="#FFF" stroke-width="2" />\n    </g>\n</svg>\n',w='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 23l5 5 5-5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n',E='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 27l5-5 5 5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n',k='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M6 21l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n',O='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M3.3 26.3h-.5l-.2-.2c.7-.8 1.1-1.8 1.1-2.9 0-2.5-2-4.5-4.5-4.5s-4.5 2-4.5 4.5 2 4.5 4.5 4.5c1.1 0 2.1-.4 2.9-1.1l.2.2v.5l3.4 3.4 1-1-3.4-3.4zm-4.1 0c-1.7 0-3.1-1.4-3.1-3.1s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1-1.4 3.1-3.1 3.1z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n',S='<svg width="16" height="16" viewBox="0 0 16 16" focusable="false">\n  <path d="M4.187 6.48L3.067 7.6l3.6 3.6 8-8-1.12-1.12-6.88 6.88-2.48-2.48zM14.4 8c0 3.52-2.88 6.4-6.4 6.4-3.52 0-6.4-2.88-6.4-6.4 0-3.52 2.88-6.4 6.4-6.4.64 0 1.2.08 1.76.24L11.04.56C10.08.24 9.04 0 8 0 3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8h-1.6z" fill="#22A7F0" fill-rule="evenodd"/>\n</svg>\n',P='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M15 18H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3zM3 2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z" fill="#fff"/><path d="M3 4h3v2H3zm0 4h3v2H3zm0 4h3v2H3z" fill="#fff"/></svg>\n',L={FILE_AUDIO:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#955ca5" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#955ca5" d="M19 20.1V17h-6v4.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1V13h8v8.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1zM13 16h6v-2h-6z"/></svg>\n',FILE_AUTOCAD:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="160"><path d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z" fill="#0696d7"></path><path d="M18 17v-2h-2v-4h-1v4h-2v2H9v1h4v2h2v4h1v-4h2v-2h4v-1zm-1 2h-3v-3h3z" fill="#0696d7"></path></svg>\n',FILE_BOX_NOTE:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#0061d5" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#980de0" d="M18.85 14.5H10.1a.75.75 0 0 0 0 1.5h7.7z"/><path fill="#0061d5" d="M16.7 17.5h-6.6a.76.76 0 0 0 0 1.52h5.59z"/><path fill="#00c9c1" d="M14.7 20.5h-4.6a.75.75 0 0 0 0 1.5H14l.05-.25c.05-.15.05-.4.15-.5z"/><path fill="#000123" d="M19.7 14.95a2.57 2.57 0 0 0 .6.6 2.17 2.17 0 0 0 .75.35l-4.6 6.45-.3.3-1.55 1.15c-.1.1-.2 0-.15-.1l.45-1.9a1.5 1.5 0 0 1 .2-.4zm1-1.5a1 1 0 0 1 1.25.9 6.38 6.38 0 0 1-.5.85 4.86 4.86 0 0 1-.75-.3 1.7 1.7 0 0 1-.65-.65z"/></svg>\n',FILE_CODE:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 19h1v1h-1zM20 13h-3v1h2v3h1v-4M19 23h-2v1h3v-4h-1v3M21 18h1v1h-1zM20 17h1v1h-1zM11 24h3v-1h-2v-3h-1v4M10 19h1v1h-1zM10 17h1v1h-1zM9 18h1v1H9zM12 14h2v-1h-3v4h1v-3"/><path fill="#e33d55" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 .88 1H25a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 .88 1H25z"/></svg>\n',FILE_DEFAULT:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/></svg>\n',FILE_DICOM:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#d0011b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#d0011b" d="M10 19h11v1H10zM10 21h11v1H10zM15 23h6v1h-6zM16.55 12.44V10h-2.1V12.44H12v2.12h2.45V17h2.1v-2.44H19v-2.12h-2.45"/></svg>\n',FILE_DOCUMENT:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#2a62b9" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#2a62b9" d="M10 20h8v1h-8zm0-3h11v1H10zm0-3h11v1H10z"/></svg>\n',FILE_EXCEL:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#207245;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3z" class="st1"/></svg>\n',FILE_GOOGLE_DOC:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#4083F7;}</style><path d="M25 27H7V5h13l5 5v17z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 15h11v1H10v-1zm0 2h11v1H10v-1zm0 2h11v1H10v-1zm0 2h8v1h-8v-1z" class="st1"/></svg>\n',FILE_GOOGLE_SHEET:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5z"/><path fill="#21a464" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#21a464" d="M20 13h-9a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1zm-5 9h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4zm5 6h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4z"/></svg>\n',FILE_GOOGLE_SLIDE:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#F7BA00;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 14v9c0 .6.4 1 1 1h9c.6 0 1-.4 1-1v-9c0-.6-.4-1-1-1h-9c-.6 0-1 .4-1 1zm10 7h-9v-5h9v5z" class="st1"/></svg>\n',FILE_ILLUSTRATOR:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M14 14.85L12.89 18h2.25zm2.16 6l-.68-2h-2.83l-.71 2H11l2.61-7.1h.88l2.61 7.1zM18.99 13.7h.89v7.1h-.89z"/></svg>\n',FILE_IMAGE:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#3fb87f" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#3fb87f" d="M18 17a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm-.6 4.09l-3.12-3.71a.41.41 0 0 0-.58-.06l-.06.06L9 23h13l-2.72-3.6a.35.35 0 0 0-.6 0z"/></svg>\n',FILE_KEYNOTE:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#157ef8" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#157ef8" d="M21.19 18.24a.44.44 0 0 1-.09.12l-.12.09H10a.44.44 0 0 1-.12-.09.51.51 0 0 1-.09-.12.51.51 0 0 1 0-.14v-.6h11.5v.6a.48.48 0 0 1-.1.14zM10 17s.14-2.51.18-3.36v-.4a1.44 1.44 0 0 1 0-.2.65.65 0 0 1 .06-.19.66.66 0 0 1 .12-.16.63.63 0 0 1 .16-.11.65.65 0 0 1 .19-.06h.77v-.56a1.9 1.9 0 0 1 0-.26.83.83 0 0 1 .25-.49.72.72 0 0 1 .2-.13.94.94 0 0 1 .29-.09h1.48a.15.15 0 0 0 .13 0l.16-.22a.48.48 0 0 1 .12-.1l.16-.05h1.38l.16.05a.56.56 0 0 1 .14.1.52.52 0 0 1 .1.14.59.59 0 0 1 .06.16.71.71 0 0 1 0 .16 1 1 0 0 1 0 .23.58.58 0 0 1-.06.16.57.57 0 0 1-.24.24l-.16.06h-1.38a.63.63 0 0 1-.16-.05l-.1-.07-.16-.17a.17.17 0 0 0-.12-.07h-1.55a.35.35 0 0 0-.14.14.32.32 0 0 0 0 .1 1.06 1.06 0 0 0 0 .18v.57h8.27a.65.65 0 0 1 .19.06.65.65 0 0 1 .16.11.62.62 0 0 1 .12.16.65.65 0 0 1 .06.19 1.18 1.18 0 0 1 0 .2v.32c0 .65.18 3.43.18 3.43H10zm3 6.5h2V19h1v4.5h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"/></svg>\n',FILE_MEDIA:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#22a7f0" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#22a7f0" d="M12.43 21.8c-.24.13-.43 0-.43-.27v-8c0-.28.2-.4.43-.27l7.14 4a.25.25 0 0 1 0 .48z"/></svg>\n',FILE_NUMBERS:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2ABB80;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M21.5 23.5h-12c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h12c.3 0 .5.2.5.5s-.2.5-.5.5zm0-2H20c-.3 0-.5-.2-.5-.5v-6c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5v6c0 .3-.2.5-.5.5zm-3.5 0h-1.5c-.3 0-.5-.2-.5-.5v-8.5c0-.3.2-.4.5-.4H18c.3 0 .5.1.5.4V21c0 .3-.2.5-.5.5zm-3.5 0H13c-.3 0-.5-.2-.5-.5v-4.5c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5zm-3.5 0H9.5c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5H11c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5z" class="st1"/></svg>\n',FILE_OBJ:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="none" d="M12 15.2a.84.84 0 0 1 .4-.7l3.6-1.9a1.39 1.39 0 0 1 .9 0l3.6 1.9a.75.75 0 0 1 .4.7v4.9a.84.84 0 0 1-.4.7l-3.6 1.9a1.39 1.39 0 0 1-.9 0l-3.6-1.9a.84.84 0 0 1-.4-.7z"/><path fill="#f7931d" d="M19.5 14.4l-3.6-1.9a1.39 1.39 0 0 0-.9 0l-3.5 1.9a1 1 0 0 0-.5.8v4.9a.84.84 0 0 0 .4.7l3.6 1.9a1.39 1.39 0 0 0 .9 0l3.6-1.9a1.16 1.16 0 0 0 .5-.7v-4.9a1.37 1.37 0 0 0-.5-.8zM12 20v-4.7l3.4-1.8 3.5 1.8-3.5 2.1v4.4z"/></svg>\n',FILE_PAGES:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f49d31" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#f49d31" d="M25 24H10.5a.5.5 0 0 1 0-1H25zm-4.35-10.45a.47.47 0 0 1 .06.63c-.14.24-1.65 1.76-2.57 2.68l-.07.07c-.45.45-.4.56-.39.6s.08.2 0 .29a.18.18 0 0 1-.24 0 .5.5 0 0 1 0-.54 2.15 2.15 0 0 1 .41-.52A31.57 31.57 0 0 0 20.37 14v-.17l-.27-.27c-.94 1-2.16 2.25-3.53 3.56L15.47 16c1.44-1.42 2.85-2.76 4-3.77a.76.76 0 0 1 1-.11.72.72 0 0 1-.1 1l-.08.09.29.28zM13 20.42a8.94 8.94 0 0 1-1.09.83l-.67-.65a8.84 8.84 0 0 1 .86-1.06c.59-.67 1.8-1.91 3-3.09l1.1 1.06c-1.28 1.16-2.56 2.33-3.2 2.91zm-2.7 1.75a.11.11 0 0 1-.14 0 .1.1 0 0 1 0-.14c.24-.35.46-.6.69-.93l.5.48c-.35.21-.69.36-1.05.59z"/></svg>\n',FILE_PDF:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#e33d55" d="M21.53 20.17a2 2 0 0 0-1.76-.93 10 10 0 0 0-1.54.11 4.77 4.77 0 0 0 3.13.81 1 1 0 0 1-.84.86 2.4 2.4 0 0 1-1.52-.21 17.59 17.59 0 0 1-1.73-1 .55.55 0 0 0-.54-.09l-2.58.93a.85.85 0 0 0-.37.3c-1.29 1.95-2.44 3-2.93 3.06s-1.13-.18-.86-1.37 1.23-1.49 2.29-1.74c-1.08.8-1.5 1.42-1.41 2.1a.83.83 0 0 0 .13-.14 24.24 24.24 0 0 0 3.8-5.45.4.4 0 0 0 0-.41 6.94 6.94 0 0 1-.9-3.66c.26-2.53 2.55-1.55 2 .38a1.87 1.87 0 0 0-.51-1.1c-.29-.22-.54-.12-.59.23a5.77 5.77 0 0 0 .51 3.35 5.46 5.46 0 0 0 .46-2.2.9.9 0 0 1 .52.62 2.8 2.8 0 0 1-.08 1.62c-.08.28-.2.56-.28.84a.34.34 0 0 0 0 .27c.37.42.75.82 1.15 1.22a.36.36 0 0 0 .3 0 7.22 7.22 0 0 1 2.11-.44 1.82 1.82 0 0 1 2 1.62zm-6-2.12l-1 1.84 1.9-.88z"/></svg>\n',FILE_POWERPOINT:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#B84729;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 20h11v1H10zm0 2h11v1H10zm5-9c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3h-3v-3z" class="st1"/><path d="M16 12v3h3c0-1.7-1.3-3-3-3z" class="st1"/></svg>\n',FILE_PRESENTATION:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M10.35 22.41l-.7-.71 4.88-4.86 2.49 2.47 4.63-4.61.7.71-5.33 5.32-2.49-2.48-4.18 4.16"/></svg>\n',FILE_SPREADSHEET:'<svg xmlns="http://www.w3.org/2000/svg" width="160px" viewBox="0 0 32 32"><title>SPREADSHEET</title><polygon points="25 27 7 27 7 5 20 5 25 10 25 27" style="fill:#fff"/><path d="M20,4H7A1,1,0,0,0,6,5V27a1,1,0,0,0,1,1H25a1,1,0,0,0,1-1V9.89Zm5,23H7V5H20V9a1,1,0,0,0,1,1h4Z" style="fill:#3fb87f"/><path d="M21,13H11a1,1,0,0,0-1,1v8a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V14A1,1,0,0,0,21,13ZM11,14h3v2H11Zm0,3h3v2H11Zm0,5V20h3v2Zm10,0H15V20h6Zm0-3H15V17h6Zm-6-3V14h6v2Z" style="fill:#3fb87f"/></svg>\n',FILE_WORD:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2A5696;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10z" class="st1"/></svg>\n',FILE_ZIP:'<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M11 25h1v1h-1zM11 23h1v1h-1zM11 21h1v1h-1zM11 19h1v1h-1zM11 17h1v1h-1zM11 15h1v1h-1zM11 13h1v1h-1zM11 11h1v1h-1zM11 9h1v1h-1zM11 7h1v1h-1zM11 5h1v1h-1zM12 24h1v1h-1zM12 22h1v1h-1zM12 20h1v1h-1zM12 18h1v1h-1zM12 16h1v1h-1zM12 14h1v1h-1zM12 12h1v1h-1zM12 10h1v1h-1zM12 8h1v1h-1zM12 6h1v1h-1z"/><path fill="#737f8b" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#737f8b" d="M12 26h1v1h-1z"/></svg>\n'},x={};function C(e){var t=x[e];return L[t]}function _(e){return L[e]}["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"].forEach(function(e){x[e]="FILE_AUDIO"}),["boxnote"].forEach(function(e){x[e]="FILE_BOX_NOTE"}),["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","htm","html","java","js","json","less","m","make","md","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","xml","xsd","xsl","yaml"].forEach(function(e){x[e]="FILE_CODE"}),["xls","xlsm","xlsx","xlsb"].forEach(function(e){x[e]="FILE_EXCEL"}),["log","msg","ods","rtf","txt","wpd"].forEach(function(e){x[e]="FILE_DOCUMENT"}),["gdoc"].forEach(function(e){x[e]="FILE_GOOGLE_DOC"}),["gsheet"].forEach(function(e){x[e]="FILE_GOOGLE_SHEET"}),["gslide"].forEach(function(e){x[e]="FILE_GOOGLE_SLIDE"}),["ai","bmp","dcm","eps","gif","heic","jpg","jpeg","png","ps","psd","svg","svs","swf","tga","tif","tiff"].forEach(function(e){x[e]="FILE_IMAGE"}),["key"].forEach(function(e){x[e]="FILE_KEYNOTE"}),["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"].forEach(function(e){x[e]="FILE_MEDIA"}),["numbers"].forEach(function(e){x[e]="FILE_NUMBERS"}),["3ds","box3d","dae","fbx","obj","ply","stl"].forEach(function(e){x[e]="FILE_OBJ"}),["pages"].forEach(function(e){x[e]="FILE_PAGES"}),["pdf"].forEach(function(e){x[e]="FILE_PDF"}),["ppt","pptx"].forEach(function(e){x[e]="FILE_POWERPOINT"}),["odp"].forEach(function(e){x[e]="FILE_PRESENTATION"}),["csv","tsv"].forEach(function(e){x[e]="FILE_SPREADSHEET"}),["doc","docx"].forEach(function(e){x[e]="FILE_WORD"}),["tgz","zip"].forEach(function(e){x[e]="FILE_ZIP"}),["dwg"].forEach(function(e){x[e]="FILE_AUTOCAD"})},function(e,n,t){"use strict";(function(i){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t,o,a,s='video/mp4; codecs="avc1.64001E"',l=navigator.userAgent,e=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(n,null,[{key:"overrideUserAgent",value:function(e){l=e,t=null}},{key:"getName",value:function(){return t||(0<l.indexOf("Edge/")?t="Edge":0<l.indexOf("OPR/")||0<l.indexOf("Opera/")?t="Opera":0<l.indexOf("Chrome/")?t="Chrome":0<l.indexOf("Safari/")?t="Safari":0<l.indexOf("Trident/")?t="Explorer":0<l.indexOf("Firefox/")&&(t="Firefox"),t)}},{key:"canPlayType",value:function(e,t){var n;if(0===e.indexOf("audio/"))n=document.createElement("audio");else{if(0!==e.indexOf("video/"))return!1;n=document.createElement("video")}return!(!n.canPlayType||n.canPlayType(e).replace(/^no$/,"")!==t)}},{key:"canPlayH264",value:function(e){return n.canPlayType(e,"maybe")||n.canPlayType(e,"probably")}},{key:"canPlayH264Baseline",value:function(){return n.canPlayH264('video/mp4; codecs="avc1.42E01E"')}},{key:"canPlayH264Main",value:function(){return n.canPlayH264('video/mp4; codecs="avc1.4D401E"')}},{key:"canPlayH264High",value:function(){return n.canPlayH264(s)}},{key:"canPlayMP3",value:function(){return n.canPlayType("audio/mpeg","maybe")||n.canPlayType("audio/mpeg","probably")}},{key:"canPlayDash",value:function(){var e=i.MediaSource,t=!1;return e&&(t="function"==typeof e.isTypeSupported?e.isTypeSupported(s):n.canPlayH264High()),t}},{key:"hasMSE",value:function(){return!!i.MediaSource}},{key:"hasWebGL",value:function(){if(!o){var e=document.createElement("canvas");e.addEventListener("webglcontextlost",function(e){e.preventDefault(),e.stopPropagation()});try{o=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}a=null!=o}return a}},{key:"clearGLContext",value:function(){if(o){var e=o.getExtension("WEBGL_lose_context");e&&"function"==typeof e.loseContext&&e.loseContext(),o=null}}},{key:"supportsModel3D",value:function(){return!!n.hasWebGL()&&!!o.getExtension("OES_standard_derivatives")}},{key:"hasFlash",value:function(){var t=!1;try{t=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){t=void 0!==i.navigator.mimeTypes["application/x-shockwave-flash"]}return t}},{key:"hasSVG",value:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}},{key:"hasTouch",value:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}},{key:"isMobile",value:function(){return/iphone|ipad|ipod|android|blackberry|bb10|mini|windows\sce|palm/i.test(l)}},{key:"canDownload",value:function(){return!n.isMobile()||!window.externalHost&&"download"in document.createElement("a")}},{key:"isIOS",value:function(){return/(iPad|iPhone|iPod)/g.test(l)}},{key:"isAndroid",value:function(){return/Android/g.test(l)}},{key:"hasFontIssue",value:function(){return n.isIOS()&&/(?:OS\s)10_3/i.test(l)}},{key:"getBrowserInfo",value:function(){return{name:n.getName(),swf:n.hasFlash(),svg:n.hasSVG(),mse:n.hasMSE(),mp3:n.canPlayMP3(),dash:n.canPlayDash(),h264:{baseline:n.canPlayH264Baseline(),main:n.canPlayH264Main(),high:n.canPlayH264High()}}}}]),n}();n.a=e}).call(this,t(19))},function(e,t,n){"use strict";(function(n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"times",{})}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"start",value:function(e){var t=this.get(e);(t=t||this.create(e)).start||(t.start=n.performance.now(),t.end=void 0,t.elapsed=void 0)}},{key:"stop",value:function(e){var t=this.get(e);t&&void 0!==t.start&&void 0===t.end&&(t.end=n.performance.now(),t.elapsed=Math.round(t.end-t.start))}},{key:"get",value:function(e){return this.times[e]}},{key:"reset",value:function(e){var n=this;e?("string"==typeof e?[e]:e).forEach(function(e){var t=n.get(e);t&&(t.start=void 0,t.end=void 0,t.elapsed=void 0)}):Object.keys(this.times).forEach(this.reset.bind(this))}},{key:"createTag",value:function(e,t){return"file_".concat(e,"_").concat(t)}},{key:"create",value:function(e){var t={start:void 0,end:void 0,elapsed:void 0};return this.times[e]=t}}]),e}();t.a=new e}).call(this,n(19))},function(e,t,n){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var n="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return r(e,arguments,d(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)})(e)}function r(e,t,n){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function c(e){var t,n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var a=arguments.length,s=new Array(4<a?a-4:0),l=4;l<a;l++)s[l-4]=arguments[l];return f(h(n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}(this,(t=d(c)).call.apply(t,[this,o].concat(s)))),"code",void 0),f(h(n),"displayMessage",void 0),f(h(n),"details",void 0),f(h(n),"message",void 0),n.constructor=c,n.__proto__=c.prototype,Error.captureStackTrace&&Error.captureStackTrace(h(n),c),n.code=e,n.details=r,n.displayMessage=i||"We’re sorry, the preview didn’t load.",n.message=o||n.displayMessage,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,i(Error)),c}();t.a=a},function(e,t,n){"use strict";n.d(t,"i",function(){return l}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return d}),n.d(t,"k",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"l",function(){return m}),n.d(t,"a",function(){return g}),n.d(t,"n",function(){return w}),n.d(t,"f",function(){return E}),n.d(t,"j",function(){return k}),n.d(t,"m",function(){return O}),n.d(t,"b",function(){return S});var c=n(4),i=n(2),u=n(0);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=["id","permissions","shared_link","sha1","file_version","name","size","extension","representations","watermark_info","authenticated_download_url","is_download_available"];function l(e,t,n){var i=t?"/versions/".concat(t):"";return"".concat(n,"/2.0/files/").concat(e).concat(i,"?fields=").concat(s.join(","))}function h(e,t){return"".concat(t,"/2.0/files/").concat(e,"?fields=download_url")}function d(e,t){return e.representations.entries.find(function(e){return e.representation===t})||null}function f(e){return Object(i.q)(e,"watermark_info.is_watermarked",!1)}function p(e,t){return Object(i.q)(e,"permissions.".concat(t),!1)}function v(e,t,n){return!!e&&"function"==typeof e[t]&&(!n||e[t](n))}function b(t){return!(!t||"object"!==a(t))&&s.every(function(e){return void 0!==t[e]})}function m(e,t){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e);return n.id=t,n.shared_link={},n.file_version={type:"file_version",id:e.id,sha1:e.sha1},n}function y(e){var t=e.fileId,n=e.fileVersionId;return t?"file_".concat(t):n?"file_version_".concat(n):""}function g(e,t){f(t)||(t.representations&&function(e){if(!d(e,u.db)){var t={preview:"true"};e.file_version&&(t.version=e.file_version.id);var n=Object(i.e)(e.authenticated_download_url,t);e.representations.entries.push({content:{url_template:n},representation:u.db,status:{state:"success"}})}}(t),e.set(y({fileId:t.id}),t),t.file_version&&t.file_version.id&&e.set(y({fileVersionId:t.file_version.id}),t))}function w(e,t){e.unset(y({fileId:t.id})),t.file_version&&t.file_version.id&&e.unset(y({fileVersionId:t.file_version.id}))}function E(e,t){var n=t.fileId,i=t.fileVersionId;return n&&!i?e.get(y({fileId:n})):i?e.get(y({fileVersionId:i})):null}function k(e){return/.*\.(vera\..*|vera)\.html/i.test(e.name)}function O(e,t){return t.downloadWM&&f(e)}function S(e,t){var n=e.is_download_available,i=t.showDownload,r=p(e,u.ib),o=p(e,u.jb),a=n&&i&&c.a.canDownload(),s=a&&r,l=a&&o&&O(e,t);return s||l}},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,r,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(u(n=this._events[e]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(c(n))for(r=Array.prototype.slice.call(arguments,1),i=(a=n.slice()).length,o=0;o<i;o++)a[o].apply(this,r);return!0},i.prototype.on=i.prototype.addListener=function(e,t){var n;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,l(t.listener)?t.listener:t),this._events[e]?c(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,c(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.trace),this},i.prototype.once=function(e,t){if(!l(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var n,i,r,o;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,i=-1,n===t||l(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(c(n)){for(o=r;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(l(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},,,function(e,_,j){"use strict";(function(r){var e=j(8),t=j.n(e),n=j(57),i=j.n(n),o=j(28),a=j.n(o),s=j(12),l=j(29),c=j(4),u=j(2),h=j(0),d=j(3),f=j(1),p=j(6),v=j(5);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S="error",P="loaded",L="loading",x={point:{title:"Point annotation mode",selector:h.pb},draw:{title:"Drawing annotation mode",selector:h.ob}},C=function(){function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),O(g(t=function(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?g(e):t}(this,E(o).call(this))),"api",void 0),O(g(t),"controls",void 0),O(g(t),"destroyed",!1),O(g(t),"loadTimeout",void 0),O(g(t),"rotationAngle",0),O(g(t),"scale",1),O(g(t),"fileLoadingIcon",void 0),O(g(t),"options",void 0),O(g(t),"cache",void 0),O(g(t),"previewUI",void 0),O(g(t),"repStatuses",void 0),O(g(t),"isMobile",void 0),O(g(t),"hasTouch",void 0),O(g(t),"startAt",void 0),O(g(t),"hasRetriedContentDownload",!1),O(g(t),"emittedMetrics",void 0),O(g(t),"rootEl",void 0),O(g(t),"containerEl",void 0),O(g(t),"isSetup",!1),t.options=e,t.api=e.api,t.cache=e.cache,t.previewUI=e.ui,t.repStatuses=[],t.isMobile=c.a.isMobile(),t.hasTouch=c.a.hasTouch(),t.emittedMetrics={},t.resetLoadTimeout=t.resetLoadTimeout.bind(g(t)),t.preventDefault=t.preventDefault.bind(g(t)),t.debouncedResizeHandler=t.getResizeHandler().bind(g(t)),t.handleAssetError=t.handleAssetError.bind(g(t)),t.toggleFullscreen=t.toggleFullscreen.bind(g(t)),t.mobileZoomStartHandler=t.mobileZoomStartHandler.bind(g(t)),t.mobileZoomChangeHandler=t.mobileZoomChangeHandler.bind(g(t)),t.mobileZoomEndHandler=t.mobileZoomEndHandler.bind(g(t)),t.handleAnnotatorEvents=t.handleAnnotatorEvents.bind(g(t)),t.handleFullscreenEnter=t.handleFullscreenEnter.bind(g(t)),t.handleFullscreenExit=t.handleFullscreenExit.bind(g(t)),t.createAnnotator=t.createAnnotator.bind(g(t)),t.viewerLoadHandler=t.viewerLoadHandler.bind(g(t)),t.initAnnotations=t.initAnnotations.bind(g(t)),t.loadBoxAnnotations=t.loadBoxAnnotations.bind(g(t)),t.createViewer=t.createViewer.bind(g(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,t.a),function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(o,[{key:"setup",value:function(){var t=this;if(!this.isSetup){if(this.options.file){var e=this.options.file.extension;this.fileLoadingIcon=Object(d.x)(e),this.startAt=Object(u.q)(this.options,"fileOptions.".concat(this.options.file.id,".").concat(h.Z),{})}this.finishLoadingSetup();var n=this.options.container;"string"==typeof n&&(n=document.querySelector(n)),this.rootEl=n.querySelector(h.nb),this.containerEl=n.querySelector(h.ub),this.addCommonListeners(),this.loadTimeout=18e4,this.isMobile&&this.rootEl.classList.add(h.l),this.areAnnotationsEnabled()&&!this.options.sharedLink&&(this.annotatorPromise=new Promise(function(e){t.annotatorPromiseResolver=e})),this.isSetup=!0}}},{key:"finishLoadingSetup",value:function(){var e=this.options.container,t=e.querySelector(h.vb);t&&t.classList.add(h.K);var n=e.querySelector(h.xb);n&&(n.innerHTML=this.fileLoadingIcon||Object(d.y)("FILE_DEFAULT"))}},{key:"destroy",value:function(){var t=this;this.repStatuses&&this.repStatuses.forEach(function(e){e.removeListener("conversionpending",t.resetLoadTimeout),e.destroy()}),s.a.removeAllListeners(),document.defaultView.removeEventListener("resize",this.debouncedResizeHandler),this.removeAllListeners(),this.containerEl&&(this.containerEl.removeEventListener("contextmenu",this.preventDefault),this.containerEl.innerHTML=""),this.annotator&&"function"==typeof this.annotator.destroy&&(this.annotator.removeAllListeners(),this.annotator.destroy()),this.destroyed=!0,this.annotatorPromise=null,this.annotatorPromiseResolver=null,this.emittedMetrics=null,this.emit("destroy")}},{key:"getResizeHandler",value:function(){var e=this;return a()(function(){e.resize()},300)}},{key:"load",value:function(){this.resetLoadTimeout()}},{key:"resetLoadTimeout",value:function(){var t=this;clearTimeout(this.loadTimeoutId),this.loadTimeoutId=setTimeout(function(){if(document.hidden)t.resetLoadTimeout();else if(!t.isLoaded()&&!t.isDestroyed()){var e=new p.a(f.c.VIEWER_LOAD_TIMEOUT,"We’re sorry, the preview didn’t load. Please refresh the page.");t.triggerError(e)}},this.loadTimeout)}},{key:"startLoadTimer",value:function(){var e=this.options.file,t=v.a.createTag(e.id,f.d.contentLoadTime);v.a.start(t)}},{key:"handleAssetError",value:function(e){var t=e?e.message:"",n=e instanceof p.a?e:new p.a(f.c.LOAD_ASSET,t,{});this.triggerError(n),this.destroyed=!0}},{key:"handleDownloadError",value:function(e,t){var n=this,i=Object(u.q)(e,"details.isRepDeleted",!1);this.hasRetriedContentDownload||i?this.triggerError(e):(this.api.reachability.constructor.isCustomDownloadHost(t)&&this.api.reachability.setDownloadReachability(t).then(function(e){e&&n.emitMetric(f.a.DOWNLOAD_BLOCKED,n.api.reachability.constructor.getHostnameFromUrl(t))}),this.hasRetriedContentDownload=!0,this.load())}},{key:"triggerError",value:function(e){var t=e?e.message:"",n=e instanceof p.a?e:new p.a(f.c.LOAD_VIEWER,"We’re sorry, the preview didn’t load. Please refresh the page.",{},t);this.emit("error",n)}},{key:"isLoaded",value:function(){return this.loaded}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"appendAuthParams",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword;return Object(u.d)(e,n,i,r)}},{key:"createContentUrl",value:function(e,t){this.hasRetriedContentDownload&&(e=this.api.reachability.constructor.replaceDownloadHostWithDefault(e));var n=this.options.queryParams;return Object(u.e)(Object(u.h)(e,t),n)}},{key:"createContentUrlWithAuthParams",value:function(e,t){var n=this.appendAuthParams(this.createContentUrl(e,t)),i=this.options.queryParams;return Object(u.e)(n,i)}},{key:"appendAuthHeader",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=this.options,i=n.token,r=n.sharedLink,o=n.sharedLinkPassword;return Object(u.o)(t,i,r,o)}},{key:"addCommonListeners",value:function(){s.a.addListener("enter",this.handleFullscreenEnter),s.a.addListener("exit",this.handleFullscreenExit),document.defaultView.addEventListener("resize",this.debouncedResizeHandler);var e=this.options.file.permissions;e&&!e.can_download&&this.containerEl.addEventListener("contextmenu",this.preventDefault),this.addListener(f.n.load,this.viewerLoadHandler)}},{key:"viewerLoadHandler",value:function(e){var t=Object(u.q)(this.options,"representation.content.url_template",""),n=this.api.reachability.constructor.getDownloadNotificationToShow(t);n&&(this.previewUI.notification.show(Object(u.D)("It looks like your connection to {1} is being blocked. We think we can make file previews faster for you. To do that, please ask your network admin to configure firewall settings so that {1} is reachable.",[n]),null,!0),this.api.reachability.constructor.setDownloadHostNotificationShown(n),this.emitMetric(f.a.NOTIFICATION_SHOWN,{host:n})),e&&e.scale&&(this.scale=e.scale),this.annotatorPromise&&this.annotatorPromise.then(this.initAnnotations)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"toggleFullscreen",value:function(){s.a.toggle(this.containerEl)}},{key:"handleFullscreenEnter",value:function(){this.resize()}},{key:"handleFullscreenExit",value:function(){this.resize()}},{key:"resize",value:function(){this.emit("resize",{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}},{key:"allowNavigationArrows",value:function(){return!0}},{key:"emit",value:function(e,t){var n=this.options,i=n.file,r=n.viewer;w(E(o.prototype),"emit",this).call(this,e,t),w(E(o.prototype),"emit",this).call(this,f.n.default,{event:e,data:t,viewerName:r?r.NAME:"",fileId:i.id})}},{key:"emitMetric",value:function(e,t){this.emittedMetrics[e]&&this.getMetricsWhitelist().includes(e)||(this.emittedMetrics[e]=!0,w(E(o.prototype),"emit",this).call(this,f.n.metric,{event:e,data:t}))}},{key:"getMetricsWhitelist",value:function(){return[]}},{key:"mobileZoomStartHandler",value:function(e){c.a.isIOS()?(this._scaling=!0,e.preventDefault(),e.stopPropagation()):2===e.touches.length?(this._pinchScale={initial:{0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]},end:{}},this._scaling=!0,e.preventDefault(),e.stopPropagation()):(this._scaling=!1,this._pinchScale=void 0)}},{key:"mobileZoomChangeHandler",value:function(e){2===e.touches.length&&this._scaling&&(this._pinchScale.end={0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]})}},{key:"mobileZoomEndHandler",value:function(e){if(this._scaling){var t=0;if(c.a.isIOS())t=e.scale-1;else{var n=Math.sqrt((this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])*(this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])+(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1])*(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1]));t=Math.sqrt((this._pinchScale.end[0][0]-this._pinchScale.end[1][0])*(this._pinchScale.end[0][0]-this._pinchScale.end[1][0])+(this._pinchScale.end[0][1]-this._pinchScale.end[1][1])*(this._pinchScale.end[0][1]-this._pinchScale.end[1][1]))-n}0<t?this.zoomIn():t<0&&this.zoomOut(),this._scaling=!1,this._pinchScale=void 0}}},{key:"getViewerOption",value:function(e){var t=this.options,n=t.viewers,i=t.viewer,r=Object(u.q)(i,"NAME");return Object(u.q)(n,"".concat(r,".").concat(e))}},{key:"loadAssets",value:function(e,t,n){var i=this,r=!(2<arguments.length&&void 0!==n)||n,o=this.options.location,a=Object(u.g)(o);Object(u.x)((t||[]).map(a));var s=r&&this.options.fixDependencies;return Object(u.w)((e||[]).map(a),s).then(function(){r&&i.emit("assetsloaded")})}},{key:"prefetchAssets",value:function(e,t,n){var i=2<arguments.length&&void 0!==n&&n,r=this.options.location,o=Object(u.g)(r);Object(u.B)((t||[]).map(o),i),Object(u.B)((e||[]).map(o),i)}},{key:"getRepStatus",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword,o=t.logger,a=t.file,s=new l.a({api:this.api,representation:e||this.options.representation,token:n,sharedLink:i,sharedLinkPassword:r,fileId:a.id,logger:e?null:o});return s.addListener("conversionpending",this.resetLoadTimeout),this.repStatuses.push(s),s}},{key:"getLoadStatus",value:function(){return this.loaded?"Error"===this.options.viewer.NAME?S:P:L}},{key:"isRepresentationReady",value:function(e){var t=l.a.getStatus(e);return t===h.Gb||t===h.Hb}},{key:"disableViewerControls",value:function(){this.controls&&this.controls.disable()}},{key:"enableViewerControls",value:function(){this.controls&&this.controls.enable()}},{key:"getRepresentation",value:function(){return this.options.representation}},{key:"getAssetPath",value:function(){return Object(u.q)(this,"options.viewer.ASSET","")}},{key:"loadBoxAnnotations",value:function(){return!this.areAnnotationsEnabled()||window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations?Promise.resolve():this.loadAssets(["annotations.js"],["annotations.css"],!1)}},{key:"createAnnotator",value:function(){if(this.areAnnotationsEnabled()){var e={};if(e[this.options.viewer.NAME]=this.viewerConfig,!r.BoxAnnotations){var t=new p.a(f.c.LOAD_ANNOTATIONS,"We’re sorry, annotations failed to load for this file.",{silent:!0});return this.previewUI.notification.show(t.displayMessage),void this.triggerError(t)}var n=this.options.boxAnnotations||new r.BoxAnnotations(e);if(this.annotatorConf=n.determineAnnotator(this.options,this.viewerConfig),this.annotatorConf){var i=this.createAnnotatorOptions({annotator:this.annotatorConf,modeButtons:x});this.annotator=new this.annotatorConf.CONSTRUCTOR(i),this.annotatorPromiseResolver&&this.annotatorPromiseResolver()}}}},{key:"initAnnotations",value:function(){var t=this;this.annotator.init(this.scale),this.emit("annotator",this.annotator),this.addListener("toggleannotationmode",function(e){return t.annotator.toggleAnnotationMode(e)}),this.addListener("scale",function(e){t.annotator.emit(h.a.scale,e)}),this.addListener("scrolltoannotation",function(e){return t.annotator.scrollToAnnotation(e)}),this.annotator.addListener("annotatorevent",this.handleAnnotatorEvents)}},{key:"hasAnnotationPermissions",value:function(e){return!!e&&!!(e.can_annotate||e.can_view_annotations_all||e.can_view_annotations_self)}},{key:"areAnnotationsEnabled",value:function(){var e=this.options.file.permissions;if(!this.hasAnnotationPermissions(e))return!1;if(window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations&&this.options.boxAnnotations.viewerOptions){var t=this.options,n=t.boxAnnotations,i=t.viewer,r=n.viewerOptions[i.NAME];this.viewerConfig={enabled:r&&(r.enabled||0<r.enabledTypes.length)}}else this.viewerConfig=this.getViewerAnnotationsConfig();return this.viewerConfig&&void 0!==this.viewerConfig.enabled?this.viewerConfig.enabled:!!this.options.showAnnotations}},{key:"getViewerAnnotationsConfig",value:function(){var e=this.getViewerOption("annotations"),t=null!=e?e:{};return"boolean"==typeof t?{enabled:t}:t}},{key:"handleAnnotatorEvents",value:function(e){switch(e.event){case h.a.modeEnter:this.disableViewerControls(),"point"===e.data.mode?this.previewUI.notification.show("Click anywhere to add a comment to the document"):"draw"===e.data.mode&&(this.previewUI.notification.show("Press down and drag the pointer to draw on the document"),this.previewUI.replaceHeader(e.data.headerSelector));break;case h.a.modeExit:this.enableViewerControls(),this.previewUI.notification.hide(),"draw"===e.data.mode&&this.previewUI.replaceHeader(e.data.headerSelector);break;case h.a.error:this.previewUI.notification.show(e.data);break;case h.a.fetch:this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}this.emit(e.event,e.data),this.emit("annotatorevent",e)}},{key:"createAnnotatorOptions",value:function(e){return i()(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){O(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.options,{},e,{isMobile:this.isMobile,hasTouch:this.hasTouch,locale:this.options.location.locale,localizedStrings:{loadError:"We’re sorry, annotations failed to load for this file.",createError:"We’re sorry, the annotation could not be created.",deleteError:"We’re sorry, the annotation could not be deleted.",authError:"Your session has expired. Please refresh the page.",doneButton:"Done",closeButton:"Close",cancelButton:"Cancel",saveButton:"Save",postButton:"Post",deleteButton:"Delete",addCommentPlaceholder:"Add a comment here...",replyPlaceholder:"Post a reply...",deleteConfirmation:"Delete this annotation?",posting:"Posting...",profileAlt:"Avatar",anonymousUserName:"Some User",pointToggle:"Point annotation mode",highlightToggle:"Highlight text",highlightComment:"Add comment to highlighted text",whoHighlighted:"{1} highlighted",drawToggle:"Drawing annotation mode",drawSave:"Save drawing",drawDelete:"Delete drawing",whoDrew:"{1} drew"}}))}},{key:"handleAssetAndRepLoad",value:function(){this.loadBoxAnnotations().then(this.createAnnotator)}},{key:"createViewer",value:function(e){if(!e)return null;var t=this.containerEl.firstChild;return t?this.containerEl.insertBefore(e,t):this.containerEl.appendChild(e)}}]),o}();_.a=C}).call(this,j(19))},function(e,t,n){"use strict";var i=n(8),r=n.n(i),o=n(23),a=n.n(o),s=n(0);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(h(t=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}(this,u(e).call(this))),"fullscreenElement",void 0),f(h(t),"fullscreenchangeHandler",function(){var e=a.a.fullscreenElement;e?t.fullscreenEnterHandler(e):t.fullscreenExitHandler()}),t.bindDOMListeners(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(e,r.a),function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"bindDOMListeners",value:function(){a.a.addEventListener("fullscreenchange",this.fullscreenchangeHandler)}},{key:"unbindDOMListeners",value:function(){a.a.removeEventListener("fullscreenchange",this.fullscreenchangeHandler)}},{key:"destroy",value:function(){this.unbindDOMListeners(),this.removeAllListeners()}},{key:"isSupported",value:function(){return a.a.fullscreenEnabled}},{key:"isFullscreen",value:function(e){return this.isSupported()?!!a.a.fullscreenElement:e&&e.classList.contains(s.I)}},{key:"fullscreenEnterHandler",value:function(e){this.fullscreenElement=e,this.fullscreenElement.classList.add(s.I),this.fullscreenElement.focus(),this.isSupported()||this.fullscreenElement.classList.add(s.J),this.emit("enter")}},{key:"fullscreenExitHandler",value:function(){this.fullscreenElement.classList.remove(s.I),this.fullscreenElement.classList.remove(s.J),this.fullscreenElement=null,this.emit("exit")}},{key:"enter",value:function(e){var t=0<arguments.length&&void 0!==e?e:document.documentElement;this.isSupported()?a.a.requestFullscreenFunction(t).call(t,Element.ALLOW_KEYBOARD_INPUT):this.fullscreenEnterHandler(t)}},{key:"exit",value:function(){this.isSupported()?a.a.exitFullscreen():this.fullscreenExitHandler()}},{key:"toggle",value:function(e){var t=0<arguments.length&&void 0!==e?e:document.documentElement;this.isFullscreen(t)?this.exit():this.enter(t)}}]),e}();t.a=new p},function(e,t,n){"use strict";var r=n(105),i=n(220),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function n(){var i={};function e(e,t){"object"==typeof i[t]&&"object"==typeof e?i[t]=n(i[t],e):i[t]=e}for(var t=0,r=arguments.length;t<r;t++)c(arguments[t],e);return i},deepMerge:function n(){var i={};function e(e,t){"object"==typeof i[t]&&"object"==typeof e?i[t]=n(i[t],e):i[t]="object"==typeof e?n({},e):e}for(var t=0,r=arguments.length;t<r;t++)c(arguments[t],e);return i},extend:function(n,e,i){return c(e,function(e,t){n[t]=i&&"function"==typeof e?r(e,i):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){var i=n(90),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t,n){var o=n(28),a=n(20);e.exports=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),o(e,t,{leading:i,maxWait:t,trailing:r})}},,function(e,t,n){var i=n(14).isFinite;e.exports=function(e){return"number"==typeof e&&i(e)}},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in s&&Object.keys(i)||r[0]in s&&r||o[0]in s&&o||a[0]in s&&a||[];t.default={requestFullscreen:function(e){return e[l[i.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[i.requestFullscreen]]},get exitFullscreen(){return s[l[i.exitFullscreen]].bind(s)},addEventListener:function(e,t,n){return s.addEventListener(l[i[e]],t,n)},removeEventListener:function(e,t,n){return s.removeEventListener(l[i[e]],t,n)},get fullscreenEnabled(){return Boolean(s[l[i.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[l[i.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+l[i.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+l[i.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+l[i.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+l[i.fullscreenerror]).toLowerCase()]=e}}},function(e,t,n){var i=n(158),r=n(163);e.exports=function(e,t){var n=r(e,t);return i(n)?n:void 0}},,,,function(e,t,n){var y=n(20),g=n(216),w=n(217),E=Math.max,k=Math.min;e.exports=function(i,n,e){var r,o,a,s,l,c,u=0,h=!1,d=!1,t=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function f(e){var t=r,n=o;return r=o=void 0,u=e,s=i.apply(n,t)}function p(e){var t=e-c;return void 0===c||n<=t||t<0||d&&a<=e-u}function v(){var e=g();if(p(e))return b(e);l=setTimeout(v,function(e){var t=n-(e-c);return d?k(t,a-(e-u)):t}(e))}function b(e){return l=void 0,t&&r?f(e):(r=o=void 0,s)}function m(){var e=g(),t=p(e);if(r=arguments,o=this,c=e,t){if(void 0===l)return function(e){return u=e,l=setTimeout(v,n),h?f(e):s}(c);if(d)return clearTimeout(l),l=setTimeout(v,n),f(c)}return void 0===l&&(l=setTimeout(v,n)),s}return n=w(n)||0,y(e)&&(h=!!e.leading,a=(d="maxWait"in e)?E(w(e.maxWait)||0,n):a,t="trailing"in e?!!e.trailing:t),m.cancel=function(){void 0!==l&&clearTimeout(l),r=c=o=l=void(u=0)},m.flush=function(){return void 0===l?s:b(g())},m}},function(e,t,n){"use strict";var i=n(8),r=n.n(i),h=n(2),a=n(0),s=n(6),l=n(5),c=n(1);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(){function u(e){var n,t=e.api,i=e.representation,r=e.token,o=e.sharedLink,a=e.sharedLinkPassword,s=e.logger,l=e.fileId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(p(n=function(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?p(e):t}(this,f(u).call(this))),"api",void 0),n.api=t,n.representation=i,n.logger=s,n.fileId=l;var c=n.representation.info;return n.infoUrl=c?Object(h.d)(c.url,r,o,a):"",n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,r.a),v(u,null,[{key:"getStatus",value:function(e){var t=e.status;return t="object"===d(t)?t.state:e.temp_status.state}},{key:"getErrorCode",value:function(e){var t=e.status;return"object"===d(t)?t.code:e.temp_status.code}}]),v(u,[{key:"destroy",value:function(){clearTimeout(this.statusTimeout)}},{key:"updateStatus",value:function(){var n=this;if(!this.infoUrl)return Promise.resolve();var e=l.a.createTag(this.fileId,c.d.convertTime);return l.a.start(e),this.api.get(this.infoUrl).then(function(e){clearTimeout(n.statusTimeout),e.metadata&&(n.representation.metadata=e.metadata);var t="object"===d(e.status)?e.status.state:e.temp_status.state;"object"===d(n.representation.status)?n.representation.status.state=t:n.representation.temp_status.state=t,n.handleResponse()})}},{key:"handleResponse",value:function(){var e,t,n=this,i=u.getStatus(this.representation),r=l.a.createTag(this.fileId,c.d.convertTime),o=u.getErrorCode(this.representation);switch(i){case"error":switch(o){case c.c.CONVERSION_PASSWORD_PROTECTED:e="We’re sorry the preview didn’t load. This document is protected.";break;case c.c.CONVERSION_TRY_AGAIN_LATER:e="We’re sorry the preview didn’t load. Please try again later.";break;case c.c.CONVERSION_UNSUPPORTED_FORMAT:e="We’re sorry the preview didn’t load. This file could not be converted.";break;case c.c.CONVERSION_FAILED:e="We’re sorry, the preview didn’t load. Please re-upload the file or contact Box support.";break;default:e="We’re sorry, the preview didn’t load. Please refresh the page."}t=new s.a(o,e,{representation:this.representation}),this.reject(t);break;case a.Gb:case a.Hb:l.a.stop(r),this.resolve();break;case a.Eb:case a.Fb:this.logger&&this.logger.setUnConverted(),this.emit("conversionpending"),this.statusTimeout=setTimeout(function(){n.updateStatus()},i===a.Eb?0:2e3)}}},{key:"getPromise",value:function(){return this.handleResponse(),this.promise}}]),u}();t.a=u},,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,,,,,,,function(e,t,n){var i=n(62),r=n(159),o=n(160),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):o(e)}},,,,,function(e,t,n){"use strict";var r=n(2);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a,s="https://dl.",l="download_host_notification_shown",c="download_host_fallback",u=/^https:\/\/.+?\./,h=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"api",void 0),this.api=e}return o(i,null,[{key:"isStorageAvailable",value:function(){return void 0===a&&(a=Object(r.u)()),a}},{key:"getHostnameFromUrl",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}},{key:"isCustomDownloadHost",value:function(e){return!e.startsWith(s)&&-1!==e.indexOf("boxcloud.com")}},{key:"replaceDownloadHostWithDefault",value:function(e){return e.replace(u,s)}},{key:"setDownloadHostFallback",value:function(){i.isStorageAvailable()&&sessionStorage.setItem(c,"true")}},{key:"isDownloadHostBlocked",value:function(){return!!i.isStorageAvailable()&&"true"===sessionStorage.getItem(c)}},{key:"setDownloadHostNotificationShown",value:function(e){if(i.isStorageAvailable()){var t=JSON.parse(localStorage.getItem(l))||[];t.push(e),localStorage.setItem(l,JSON.stringify(t))}}},{key:"getDownloadNotificationToShow",value:function(e){if(!i.isStorageAvailable())return null;var t=i.getHostnameFromUrl(e),n=JSON.parse(localStorage.getItem(l))||[];return"true"===sessionStorage.getItem(c)&&!n.includes(t)&&i.isCustomDownloadHost(e)?t:null}}]),o(i,[{key:"setDownloadReachability",value:function(e){return this.api.head(e).then(function(){return Promise.resolve(!1)}).catch(function(){return i.setDownloadHostFallback(),Promise.resolve(!0)})}},{key:"downloadWithReachabilityCheck",value:function(e){var t=i.replaceDownloadHostWithDefault(e);i.isDownloadHostBlocked()||!i.isCustomDownloadHost(e)?Object(r.z)(t):(Object(r.z)(e),this.setDownloadReachability(e).then(function(e){e&&Object(r.z)(t)}))}}]),i}();t.a=h},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"getHostname",value:function(){return window.location.hostname||""}},{key:"getOrigin",value:function(){return window.location.origin||""}}]),e}();t.a=r},,function(e,t,n){var i=n(148),r=n(149),o=n(150),a=n(151),s=n(152);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var i=n(89);e.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},function(e,t,n){var i=n(24)(Object,"create");e.exports=i},function(e,t,n){var i=n(173);e.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var c=n(92),u=n(93);e.exports=function(e,t,n,i){var r=!n;n=n||{};for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?u(n,s,l):c(n,s,l)}return n}},,,,,function(e,t,n){var i=n(39),r=n(20);e.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var i=n(146);e.exports=function(e){return i(e,5)}},function(e,t,n){"use strict";var o=n(0),a=n(3);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"clickHandler",function(e){e.stopPropagation(),e.target===t.buttonEl&&t.hide()});var n="notification_".concat((new Date).getTime(),"_label");this.notificationEl=document.createElement("div"),this.notificationEl.classList.add(o.m),this.notificationEl.classList.add(o.K),this.notificationEl.addEventListener("click",this.clickHandler),this.notificationEl.setAttribute("role","alert"),this.notificationEl.setAttribute("aria-labeledby",n),this.notificationEl.innerHTML='\n            <span id="'.concat(n,'"></span>\n            <button class="close-btn" type="button">').concat(a.g,"</button>\n        ").trim(),this.messageEl=this.notificationEl.querySelector("#".concat(n)),this.buttonEl=this.notificationEl.querySelector("button");var i=document.createElement("div");i.classList.add(o.n),i.appendChild(this.notificationEl),e.appendChild(i)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(r,[{key:"show",value:function(e,t,n){var i=2<arguments.length&&void 0!==n&&n;this.messageEl.textContent=e,t?(this.buttonEl.textContent=t,this.buttonEl.classList.remove("default-close-btn"),this.buttonEl.removeAttribute("aria-label")):(this.buttonEl.innerHTML=a.g,this.buttonEl.classList.add("default-close-btn"),this.buttonEl.setAttribute("aria-label","Clear Notification")),this.notificationEl.classList.remove(o.K),this.notificationEl.focus(),this.timeout=i?null:setTimeout(this.hide.bind(this),5e3)}},{key:"hide",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.notificationEl&&this.notificationEl.classList.add(o.K)}}]),r}();t.a=r},function(e,t,n){"use strict";var i=n(2);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"set",value:function(e,t,n){this.cache[e]=t,n&&this.isLocalStorageAvailable()&&localStorage.setItem(this.generateKey(e),JSON.stringify(t))}},{key:"unset",value:function(e){this.isLocalStorageAvailable()&&localStorage.removeItem(this.generateKey(e)),delete this.cache[e]}},{key:"has",value:function(e){return this.inCache(e)||this.inLocalStorage(e)}},{key:"get",value:function(e){if(this.inCache(e))return this.cache[e];if(this.inLocalStorage(e)){var t=localStorage.getItem(this.generateKey(e));if(t)return t=JSON.parse(t),this.cache[e]=t}}},{key:"inCache",value:function(e){return{}.hasOwnProperty.call(this.cache,e)}},{key:"inLocalStorage",value:function(e){return!!this.isLocalStorageAvailable()&&!!localStorage.getItem(this.generateKey(e))}},{key:"isLocalStorageAvailable",value:function(){return void 0===this.available&&(this.available=Object(i.u)()),this.available}},{key:"generateKey",value:function(e){return"bp-".concat(e)}}]),e}();t.a=o},function(e,t,n){"use strict";var i=n(127),o=n.n(i),a=n(44),c=n(2),r=n(0);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function h(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var i=n.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===s(t)?t:String(t)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=r.bb.FIELD_HASXREFS,b=r.bb.SCOPE_GLOBAL,m=function(){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),p(this,"api",void 0),this.api=e}return f(l,null,[{key:"getMetadataURL",value:function(e,t,n,i){var r=1<arguments.length&&void 0!==t?t:b,o=2<arguments.length?n:void 0;return"".concat(3<arguments.length?i:void 0,"/2.0/files/").concat(e,"/metadata/").concat(r,"/").concat(o)}}]),f(l,[{key:"getXrefsMetadata",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return e&&t?this.getMetadata(e,b,t,i).then(function(e){var t=e[v];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){p(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},h(e,[v].map(d)),p({},v,"true"===t))}):Promise.reject(new Error("id and template are required parameters"))}},{key:"getMetadata",value:function(e,t,n,i){var r=i.apiHost,o=i.token,a=i.sharedLink,s=i.sharedLinkPassword;return this.api.get(l.getMetadataURL(e,t,n,r),{headers:Object(c.o)({},o,a,s)})}}]),l}();function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(n,!0).forEach(function(e){w(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",function(){return L});function O(e){return 204===e.status||202===e.status?e:e.data}function S(e){var t=e.response;if(t){var n=new Error(t.statusText);throw n.response=t,n}}function P(e){return e}var L=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.client=o.a.create(),this.metadata=new m(this),this.reachability=new a.a(this)}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(r,[{key:"addResponseInterceptor",value:function(e){"function"==typeof e&&this.client.interceptors.response.use(e)}},{key:"addRequestInterceptor",value:function(e){"function"==typeof e&&this.client.interceptors.request.use(e)}},{key:"ejectInterceptors",value:function(){var i=this;["response","request"].forEach(function(n){i.client.interceptors[n].handlers.forEach(function(e,t){i.client.interceptors[n].eject(t)})})}},{key:"get",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},i=n.type,r=void 0===i?"json":i,o=E(n,["type"]);return this.xhr(e,g({method:"get",responseType:r},o))}},{key:"head",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return this.xhr(e,g({method:"head"},n))}},{key:"post",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return this.xhr(e,g({method:"post",data:t},i))}},{key:"delete",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return this.xhr(e,g({method:"delete",data:t},i))}},{key:"put",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return this.xhr(e,g({method:"put",data:t},i))}},{key:"xhr",value:function(e,t){var n,i=1<arguments.length&&void 0!==t?t:{};return this instanceof r?("text"===i.responseType&&(n=P),this.client(e,function(e){var t=0<arguments.length&&void 0!==e?e:{},n={};return Object.keys(t).forEach(function(e){void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(n[e]=t[e])}),n}(g({transformResponse:n},i))).then(O).catch(S)):Promise.reject(new SyntaxError("Invalid invocation"))}}]),r}()},function(e,t,n){var i=n(24)(n(14),"Map");e.exports=i},function(e,t,n){var i=n(14).Symbol;e.exports=i},function(e,t,n){var i=n(94),r=n(187),o=n(98);e.exports=function(e){return o(e)?i(e):r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(t){return function(e){return t(e)}}},function(e,a,s){(function(e){var t=s(90),n=a&&!a.nodeType&&a,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,r=i&&i.exports===n&&t.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=o}).call(this,s(65)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var i=n(195),r=n(100),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),i(a(t),function(e){return o.call(t,e)}))}:r;e.exports=s},function(e,t,n){var i=n(199),r=n(61),o=n(200),a=n(201),s=n(202),l=n(39),c=n(91),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",v=c(i),b=c(r),m=c(o),y=c(a),g=c(s),w=l;(i&&w(new i(new ArrayBuffer(1)))!=p||r&&w(new r)!=u||o&&w(o.resolve())!=h||a&&w(new a)!=d||s&&w(new s)!=f)&&(w=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case v:return p;case b:return u;case m:return h;case y:return d;case g:return f}return t}),e.exports=w},function(e,t,n){var i=n(205);e.exports=function(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return i});var o=new Error("Bad Auth Token!");function a(e){return"file_".concat(e)}function s(e,n){var i={};return e.forEach(function(e){var t=a(e);if(n&&"string"!=typeof n)if("object"===r(n)&&n[t])i[e]=n[t];else{if("object"!==r(n)||!n[e])throw o;i[e]=n[e]}else i[e]=n}),i}function i(e,i){return e?(r=Array.isArray(e)?e:[e],i&&"string"!=typeof i?new Promise(function(t,n){var e=r.map(function(e){return a(e)});i(e).then(function(e){try{t(s(r,e))}catch(e){n(e)}})}):Promise.resolve(s(r,i))):Promise.reject(o);var r}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n(4),r=n(2);function o(){return(new Date).toISOString()}var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});function s(){return{client_version:r.a,browser_name:i.a.getName(),logger_session_id:a}}},,,function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"canLoad",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[];return!!this.determineViewer(e,n)}},{key:"getViewers",value:function(){return Array.isArray(this.viewers)?this.viewers:[]}},{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[];return this.viewers.find(function(t){return!(-1<n.indexOf(t.NAME))&&(-1<t.EXT.indexOf(e.extension)&&e.representations.entries.some(function(e){return t.REP===e.representation}))})}},{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return t.REP===e.representation})}}]),e}(),v=n(4),r=n(15),o=n.n(r),b=n(0);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="box-show-preview-controls",u="bp-controls-btn",h=function(){function i(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l(this,"containerEl",void 0),l(this,"controlsEl",void 0),l(this,"buttonRefs",[]),l(this,"shouldHide",!0),l(this,"hasTouch",v.a.hasTouch()),l(this,"mousemoveHandler",o()(function(){t.containerEl.classList.add(c),t.resetTimeout()},1500)),l(this,"mouseenterHandler",function(){t.shouldHide=!1}),l(this,"mouseleaveHandler",function(){t.shouldHide=!0}),l(this,"focusinHandler",function(e){t.isPreviewControlButton(e.target)&&(t.containerEl.classList.add(c),t.shouldHide=!1)}),l(this,"focusoutHandler",function(e){t.isPreviewControlButton(e.target)&&!t.isPreviewControlButton(e.relatedTarget)&&(t.shouldHide=!0)}),l(this,"clickHandler",function(){t.shouldHide=!0}),this.containerEl=e;var n=document.createElement("div");n.className="bp-controls-wrapper",n.setAttribute("data-testid","controls-wrapper"),this.containerEl.appendChild(n),this.controlsEl=n.appendChild(document.createElement("div")),this.controlsEl.className="bp-controls",this.containerEl.addEventListener("mousemove",this.mousemoveHandler),this.controlsEl.addEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.addEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.addEventListener("focusin",this.focusinHandler),this.controlsEl.addEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.addEventListener("touchstart",this.mousemoveHandler),this.controlsEl.addEventListener("click",this.clickHandler))}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(i,[{key:"destroy",value:function(){this.containerEl.removeEventListener("mousemove",this.mousemoveHandler),this.controlsEl.removeEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.removeEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.removeEventListener("focusin",this.focusinHandler),this.controlsEl.removeEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.removeEventListener("touchstart",this.mousemoveHandler),this.controlsEl.removeEventListener("click",this.clickHandler)),this.buttonRefs.forEach(function(e){e.button.removeEventListener("click",e.handler)})}},{key:"isPreviewControlButton",value:function(e){return!!e&&(e.classList.contains(u)||e.parentNode.classList.contains("bp-page-num-wrapper"))}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.controlDisplayTimeoutId),this.controlDisplayTimeoutId=setTimeout(function(){clearTimeout(e.controlDisplayTimeoutId),!e.shouldHide||e.isPageNumFocused()?e.resetTimeout():(e.containerEl.classList.remove(c),e.controlsEl.contains(document.activeElement)&&document.activeElement.blur())},2e3)}},{key:"add",value:function(e,t,n,i){var r=2<arguments.length&&void 0!==n?n:"",o=3<arguments.length&&void 0!==i?i:"",a=document.createElement("div");a.className="bp-controls-cell";var s=document.createElement("button");return s.setAttribute("aria-label",e),s.setAttribute("type","button"),s.setAttribute("title",e),s.className="".concat(u," ").concat(r),s.addEventListener("click",t),o&&(s.innerHTML=o),a.appendChild(s),this.controlsEl.appendChild(a),this.buttonRefs.push({button:s,handler:t}),s}},{key:"enable",value:function(){this.controlsEl.classList.remove(b.K)}},{key:"disable",value:function(){this.controlsEl.classList.add(b.K)}},{key:"isPageNumFocused",value:function(){return document.activeElement&&document.activeElement.classList.contains("bp-page-num-input")}}]),i}(),d=n(11),m=n(6),f=n(3),y=n(1);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P="panning",L="zoomable",x="pannable",C=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?E(e):t}(this,O(i).call(this,e)),e.api&&(t.api=e.api),t.pan=t.pan.bind(E(t)),t.stopPanning=t.stopPanning.bind(E(t)),t.zoomIn=t.zoomIn.bind(E(t)),t.zoomOut=t.zoomOut.bind(E(t)),t.handleMouseDown=t.handleMouseDown.bind(E(t)),t.handleMouseUp=t.handleMouseUp.bind(E(t)),t.cancelDragEvent=t.cancelDragEvent.bind(E(t)),t.finishLoading=t.finishLoading.bind(E(t)),t.isMobile&&(v.a.isIOS()?t.mobileZoomStartHandler=t.mobileZoomStartHandler.bind(E(t)):(t.mobileZoomStartHandler=t.mobileZoomStartHandler.bind(E(t)),t.mobileZoomChangeHandler=t.mobileZoomChangeHandler.bind(E(t))),t.mobileZoomEndHandler=t.mobileZoomEndHandler.bind(E(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,d["a"]),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(i,[{key:"destroy",value:function(){this.unbindDOMListeners(),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.imageEl&&this.imageEl.removeEventListener("mouseup",this.handleMouseUp),k(O(i.prototype),"destroy",this).call(this)}},{key:"finishLoading",value:function(){var e=this;this.isDestroyed()||this.setOriginalImageSize(this.imageEl).then(function(){e.loadUI(),e.zoom(),e.imageEl.classList.remove(b.L),e.loaded=!0,e.emit(y.n.load)})}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"resize",value:function(){this.zoom(),k(O(i.prototype),"resize",this).call(this)}},{key:"startPanning",value:function(e,t){this.isPannable&&(this.panStartX=e,this.panStartY=t,this.panStartScrollLeft=this.wrapperEl.scrollLeft,this.panStartScrollTop=this.wrapperEl.scrollTop,document.addEventListener("mousemove",this.pan),document.addEventListener("mouseup",this.stopPanning),this.imageEl.classList.add(P),this.isPanning=!0,this.emit("panstart"))}},{key:"pan",value:function(e){if(this.isPanning){var t=e.clientX-this.panStartX,n=e.clientY-this.panStartY;this.wrapperEl.scrollLeft=this.panStartScrollLeft-t,this.wrapperEl.scrollTop=this.panStartScrollTop-n,this.didPan=!0,this.emit("pan")}}},{key:"stopPanning",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl.classList.remove(P),this.isPanning=!1,this.emit("panend")}},{key:"updateCursor",value:function(){this.isPannable?(this.isZoomable=!1,this.imageEl.classList.add(x),this.imageEl.classList.remove(L)):(this.isZoomable=!0,this.imageEl.classList.remove(x),this.imageEl.classList.add(L))}},{key:"loadUI",value:function(){this.controls=new h(this.containerEl),this.bindControlListeners()}},{key:"setOriginalImageSize",value:function(s){var e=this;return new Promise(function(a){s.naturalWidth&&s.naturalHeight?(s.setAttribute("originalWidth",s.naturalWidth),s.setAttribute("originalHeight",s.naturalHeight),a()):e.api.get(s.src,{type:"text"}).then(function(e){var t=(new DOMParser).parseFromString(e,"image/svg+xml");try{var n=g(t.documentElement.getAttribute("viewBox").split(" "),4),i=n[2],r=n[3],o=r?i/r:i;s.setAttribute("originalWidth",Math.round(150*o)),s.setAttribute("originalHeight",150)}catch(e){s.setAttribute("originalWidth",300),s.setAttribute("originalHeight",150)}finally{a()}}).catch(a)})}},{key:"bindControlListeners",value:function(){this.controls.add("Zoom out",this.zoomOut,"bp-image-zoom-out-icon",f.w),this.controls.add("Zoom in",this.zoomIn,"bp-image-zoom-in-icon",f.v)}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("mousedown",this.handleMouseDown),this.imageEl.addEventListener("mouseup",this.handleMouseUp),this.imageEl.addEventListener("dragstart",this.cancelDragEvent),this.isMobile&&(v.a.isIOS()?(this.imageEl.addEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.addEventListener("gestureend",this.mobileZoomEndHandler)):(this.imageEl.addEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.addEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.addEventListener("touchend",this.mobileZoomEndHandler)))}},{key:"unbindDOMListeners",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl&&(this.imageEl.removeEventListener("mousedown",this.handleMouseDown),this.imageEl.removeEventListener("mouseup",this.handleMouseUp),this.imageEl.removeEventListener("dragstart",this.cancelDragEvent),this.imageEl.removeEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("gestureend",this.mobileZoomEndHandler),this.imageEl.removeEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.removeEventListener("touchend",this.mobileZoomEndHandler))}},{key:"handleDownloadError",value:function(e,t){var n=new m.a(y.c.CONTENT_DOWNLOAD,"We’re sorry, the preview didn’t load. Please refresh the page.",{},e.message);k(O(i.prototype),"handleDownloadError",this).call(this,n,t)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"handleMouseDown",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey,r=e.clientX,o=e.clientY;this.didPan=!1,!("number"!=typeof t||t<2)||n||i||this.startPanning(r,o)}},{key:"handleMouseUp",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey;!("number"!=typeof t||t<2)||n||i||(!this.isPannable&&this.isZoomable?this.zoom("in"):this.didPan||this.zoom("reset"))}},{key:"cancelDragEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"disableViewerControls",value:function(){k(O(i.prototype),"disableViewerControls",this).call(this),this.unbindDOMListeners(),this.imageEl.classList.remove(L),this.imageEl.classList.remove(x)}},{key:"enableViewerControls",value:function(){k(O(i.prototype),"enableViewerControls",this).call(this),this.bindDOMListeners(),this.isMobile||this.updateCursor()}},{key:"zoom",value:function(){}}]),i}(),_=n(2);n(237);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=function(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?H(e):t}(this,R(a).call(this,e))).api=e.api,t.rotateLeft=t.rotateLeft.bind(H(t)),t.updatePannability=t.updatePannability.bind(H(t)),t.handleImageDownloadError=t.handleImageDownloadError.bind(H(t)),t.handleAssetAndRepLoad=t.handleAssetAndRepLoad.bind(H(t)),t.isMobile&&(t.handleOrientationChange=t.handleOrientationChange.bind(H(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(a,C),function(e,t,n){t&&T(e.prototype,t),n&&T(e,n)}(a,[{key:"setup",value:function(){this.isSetup||(A(R(a.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.classList.add("bp-image"),this.imageEl=this.wrapperEl.appendChild(document.createElement("img")),this.imageEl.setAttribute("data-page-number",1),this.imageEl.classList.add(b.L),this.currentRotationAngle=0)}},{key:"load",value:function(){var e=this;A(R(a.prototype),"load",this).call(this);var t=this.options,n=t.representation,i=t.viewer,r=n.content.url_template,o=this.createContentUrlWithAuthParams(r,i.ASSET);return this.bindDOMListeners(),this.getRepStatus().getPromise().then(function(){return e.handleAssetAndRepLoad(o)}).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(e){this.startLoadTimer(),this.imageEl.src=e,A(R(a.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"prefetch",value:function(e){var t=e.content,n=void 0===t||t,i=this.options,r=i.file,o=i.representation,a=i.viewer,s=r&&r.watermark_info&&r.watermark_info.is_watermarked;if(n&&!s&&this.isRepresentationReady(o)){var l=o.content.url_template;document.createElement("img").src=this.createContentUrlWithAuthParams(l,a.ASSET)}}},{key:"updatePannability",value:function(){this.imageEl&&(this.isRotated()?this.isPannable=this.imageEl.height>this.wrapperEl.clientWidth||this.imageEl.width>this.wrapperEl.clientHeight:this.isPannable=this.imageEl.width>this.wrapperEl.clientWidth||this.imageEl.height>this.wrapperEl.clientHeight,this.didPan=!1,this.updateCursor())}},{key:"rotateLeft",value:function(){this.currentRotationAngle=(this.currentRotationAngle-90)%3600%360,this.imageEl.setAttribute("data-rotation-angle",this.currentRotationAngle),this.imageEl.style.transform="rotate(".concat(this.currentRotationAngle,"deg)"),this.emit("rotate"),this.handleOrientationChange(),this.setScale(this.imageEl.offsetwidth,this.imageEl.offsetHeight)}},{key:"getTransformWidthAndHeight",value:function(e,t,n){return n?{width:t,height:e}:{width:e,height:t}}},{key:"zoom",value:function(e){var t,n,i,r,o=this.isRotated();if("in"===e||"out"===e){var a=this.getTransformWidthAndHeight(this.imageEl.offsetWidth,this.imageEl.offsetHeight,o);r=a.width,i=a.height,t="in"===e?1.2*r:r/1.2}else{var s=parseInt(this.imageEl.getAttribute("originalHeight"),10),l=parseInt(this.imageEl.getAttribute("originalWidth"),10),c=this.getTransformWidthAndHeight(l,s,o);r=c.width;var u=(i=c.height)<=r,h={width:this.wrapperEl.clientWidth-30,height:this.wrapperEl.clientHeight-30};if(h.width<r||h.height<i){var d=Math.min(h.width/r,h.height/i);u?t=r*d:n=i*d}else u?t=Math.min(h.width,l):n=Math.min(h.height,s)}if(o){var f=t;t=n,n=f}this.imageEl.style.width=t?"".concat(t,"px"):"",this.imageEl.style.height=n?"".concat(n,"px"):"",this.adjustImageZoomPadding(),setTimeout(this.updatePannability,50),this.setScale(t,n),this.emit("zoom",{newScale:[t||r,n||i],canZoomIn:!0,canZoomOut:!0})}},{key:"setScale",value:function(e,t){this.scale=e?e/this.imageEl.getAttribute("originalWidth"):t/this.imageEl.getAttribute("originalHeight"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}},{key:"loadUI",value:function(){A(R(a.prototype),"loadUI",this).call(this),this.controls.add("Rotate left",this.rotateLeft,"bp-image-rotate-left-icon",f.s),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"print",value:function(){var t=this,n=v.a.getName();this.printframe=_.y(this.imageEl.outerHTML),this.printframe.addEventListener("load",function e(){"Explorer"===n||"Edge"===n?t.printframe.contentWindow.document.execCommand("print",!1,null):t.printframe.contentWindow.print(),t.printframe.removeEventListener("load",e),t.emit("printsuccess")}),this.printframe.contentWindow.focus(),this.printImage=this.printframe.contentDocument.querySelector("img"),this.printImage.style.display="block",this.printImage.style.margin="0 auto"}},{key:"isRotated",value:function(){return Math.abs(this.currentRotationAngle)%180==90}},{key:"adjustImageZoomPadding",value:function(){var e,t,n=0,i=0,r=this.wrapperEl.getBoundingClientRect(),o=this.wrapperEl.clientWidth-15,a=this.wrapperEl.clientHeight-15;i=this.isRotated()?(n=r.width>this.imageEl.clientHeight?r.width:this.imageEl.clientHeight,r.height>this.imageEl.clientWidth?r.height:this.imageEl.clientWidth):(n=r.width>this.imageEl.clientWidth?r.width:this.imageEl.clientWidth,r.height>this.imageEl.clientHeight?r.height:this.imageEl.clientHeight),e=(n-this.imageEl.clientWidth)/2,t=(i-this.imageEl.clientHeight)/2,this.imageEl.style.left="".concat(e,"px"),this.imageEl.style.top="".concat(t,"px"),this.wrapperEl.scrollLeft=(this.wrapperEl.scrollWidth-o)/2,this.wrapperEl.scrollTop=(this.wrapperEl.scrollHeight-a)/2}},{key:"handleImageDownloadError",value:function(e){this.handleDownloadError(e,this.imageEl.src)}},{key:"bindDOMListeners",value:function(){A(R(a.prototype),"bindDOMListeners",this).call(this),this.imageEl.addEventListener("load",this.finishLoading),this.imageEl.addEventListener("error",this.handleImageDownloadError),this.isMobile&&this.imageEl.addEventListener("orientationchange",this.handleOrientationChange)}},{key:"unbindDOMListeners",value:function(){A(R(a.prototype),"unbindDOMListeners",this).call(this),this.imageEl&&(this.imageEl.removeEventListener("load",this.finishLoading),this.imageEl.removeEventListener("error",this.handleImageDownloadError)),this.isMobile&&this.imageEl.removeEventListener("orientationchange",this.handleOrientationChange)}},{key:"handleOrientationChange",value:function(){this.adjustImageZoomPadding(),this.scale=this.imageEl.clientWidth/this.imageEl.getAttribute("originalWidth"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}}]),a}(),V=n(8),D=n.n(V),B=n(12);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G="show-page-number-input",K="bp-current-page",X="bp-page-num-input",Z="bp-total-pages",Q="bp-page-num",Y="bp-previous-page",J="bp-next-page",$="\n    <div class='".concat("bp-page-num-wrapper","'>\n        <span class=").concat(K," data-testid='current-page'>1</span>\n        <input type='number' pattern='[0-9]*' min='1'  value='' size='3' class='").concat(X,"' data-testid='page-num-input'/>\n        <span class='bp-page-num-divider'>&nbsp;/&nbsp;</span>\n        <span class='").concat(Z,"'>1</span>\n    </div>").replace(/>\s*</g,"><"),ee=function(){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),W(U(n=function(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?U(e):t}(this,N(i).call(this))),"controls",void 0),W(U(n),"controlsEl",void 0),W(U(n),"contentEl",void 0),W(U(n),"totalPagesEl",void 0),W(U(n),"currentPageEl",void 0),W(U(n),"pageNumInputEl",void 0),n.controls=e,n.controlsEl=e.controlsEl,n.contentEl=t,n.pageNumInputBlurHandler=n.pageNumInputBlurHandler.bind(U(n)),n.pageNumInputKeydownHandler=n.pageNumInputKeydownHandler.bind(U(n)),n.setPreviousPage=n.setPreviousPage.bind(U(n)),n.showPageNumInput=n.showPageNumInput.bind(U(n)),n.setNextPage=n.setNextPage.bind(U(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(i,D.a),function(e,t,n){t&&z(e.prototype,t),n&&z(e,n)}(i,[{key:"add",value:function(e,t){this.controls.add("Previous page",this.setPreviousPage,"bp-previous-page-icon ".concat(Y),f.i),this.controls.add("Click to enter page number",this.showPageNumInput,Q,$),this.controls.add("Next page",this.setNextPage,"bp-next-page-icon ".concat(J),f.h);var n=this.controlsEl.querySelector(".".concat(Q));this.totalPagesEl=n.querySelector(".".concat(Z)),this.totalPagesEl.textContent=t,this.currentPageEl=n.querySelector(".".concat(K)),this.currentPageEl.textContent=e,this.pageNumInputEl=n.querySelector(".".concat(X)),this.checkPaginationButtons()}},{key:"showPageNumInput",value:function(){this.controlsEl.classList.add(G),this.pageNumInputEl.value=this.getCurrentPageNumber(),this.pageNumInputEl.focus(),this.pageNumInputEl.select(),this.pageNumInputEl.addEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.addEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"hidePageNumInput",value:function(){this.controlsEl.classList.remove(G),this.pageNumInputEl.removeEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.removeEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"checkPaginationButtons",value:function(){var e=this.controlsEl.querySelector(".".concat(Q)),t=this.controlsEl.querySelector(".".concat(Y)),n=this.controlsEl.querySelector(".".concat(J)),i="Safari"===v.a.getName()&&B.a.isFullscreen();e&&(this.getTotalPages()<=1||i?e.disabled=!0:e.disabled=!1),t&&(1===this.getCurrentPageNumber()?t.disabled=!0:t.disabled=!1),n&&(this.getCurrentPageNumber()===this.getTotalPages()?n.disabled=!0:n.disabled=!1)}},{key:"updateCurrentPage",value:function(e){this.pageNumInputEl&&(this.pageNumInputEl.value=e),this.currentPageEl&&this.setCurrentPageNumber(e),this.checkPaginationButtons()}},{key:"setPreviousPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()-1)}},{key:"setNextPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()+1)}},{key:"getCurrentPageNumber",value:function(){return parseInt(this.currentPageEl.textContent,10)}},{key:"setCurrentPageNumber",value:function(e){this.currentPageEl.textContent=e}},{key:"getTotalPages",value:function(){return parseInt(this.totalPagesEl.textContent,10)}},{key:"pageNumInputBlurHandler",value:function(e){var t=e.target,n=parseInt(t.value,10);Number.isNaN(n)||this.emit("pagechange",n),this.hidePageNumInput()}},{key:"pageNumInputKeydownHandler",value:function(e){switch(Object(_.k)(e)){case"Enter":case"Tab":this.contentEl.focus(),"Explorer"!==v.a.getName()&&e.target.blur(),e.stopPropagation(),e.preventDefault();break;case"Escape":this.hidePageNumInput(),this.contentEl.focus(),e.stopPropagation(),e.preventDefault()}}}]),i}();n(238);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t,n){return(re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ie(t=function(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ie(e):t}(this,oe(i).call(this,e))),"singleImageEls",[]),t.setPage=t.setPage.bind(ie(t)),t.scrollHandler=t.scrollHandler.bind(ie(t)),t.handlePageChangeFromScroll=t.handlePageChangeFromScroll.bind(ie(t)),t.handleMultiImageDownloadError=t.handleMultiImageDownloadError.bind(ie(t)),t.handleAssetAndRepLoad=t.handleAssetAndRepLoad.bind(ie(t)),t.finishLoading=t.finishLoading.bind(ie(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(i,C),function(e,t,n){t&&ne(e.prototype,t),n&&ne(e,n)}(i,[{key:"setup",value:function(){this.isSetup||(re(oe(i.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className="".concat("bp-images-wrapper"," ").concat(b.O),this.wrapperEl.tabIndex="0",this.imageEl=this.wrapperEl.appendChild(document.createElement("div")),this.imageEl.classList.add("bp-images"),this.singleImageEls.push(this.imageEl.appendChild(document.createElement("img"))),this.loadTimeout=6e4,this.currentPageNumber=1,this.previousScrollTop=0)}},{key:"destroy",value:function(){var n=this;this.singleImageEls&&0<this.singleImageEls.length&&this.singleImageEls.forEach(function(e,t){n.unbindImageListeners(t)}),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),re(oe(i.prototype),"destroy",this).call(this)}},{key:"load",value:function(){return re(oe(i.prototype),"load",this).call(this),this.imageEl.classList.add(b.L),this.bindImageListeners(0),this.bindDOMListeners(),this.getRepStatus().getPromise().then(this.handleAssetAndRepLoad).catch(this.handleAssetError)}},{key:"finishLoading",value:function(){re(oe(i.prototype),"finishLoading",this).call(this),this.setOriginalImageSizes()}},{key:"handleAssetAndRepLoad",value:function(){var n=this,e=this.options.representation.content.url_template;this.imageUrls=this.constructImageUrls(e),this.startLoadTimer(),this.imageUrls.forEach(function(e,t){return n.setupImageEls(e,t)}),this.wrapperEl.addEventListener("scroll",this.scrollHandler,!0),re(oe(i.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"constructImageUrls",value:function(e){var t=this.options,n=t.viewer,i=t.representation.metadata,r=n.ASSET;this.pagesCount=i.pages;for(var o=this.createContentUrlWithAuthParams(e,r),a=[],s=1;s<=this.pagesCount;s+=1)a.push(o.replace("{page}",s));return a}},{key:"setupImageEls",value:function(e,t){0!==t&&(this.singleImageEls[t]=this.imageEl.appendChild(document.createElement("img")),this.bindImageListeners(t)),this.singleImageEls[t].setAttribute("data-page-number",t+1),this.singleImageEls[t].classList.add(b.S),this.singleImageEls[t].src=e}},{key:"setOriginalImageSizes",value:function(){var t=this,n=[];return this.singleImageEls.forEach(function(e){n.push(re(oe(i.prototype),"setOriginalImageSize",t).call(t,e))}),Promise.all(n)}},{key:"updatePannability",value:function(){this.wrapperEl&&(this.isPannable=this.imageEl.clientWidth>this.wrapperEl.clientWidth,this.didPan=!1,this.updateCursor())}},{key:"zoom",value:function(e){var t,n=this.imageEl.parentNode.clientWidth,i=this.imageEl.clientWidth;switch(e){case"in":t=i+100;break;case"out":t=i-100;break;default:t=n}this.imageEl.style.width="".concat(t,"px"),this.imageEl.parentNode.scrollLeft=(this.imageEl.parentNode.scrollWidth-n)/2,this.setScale(this.imageEl.offsetWidth,this.imageEl.offsetHeight),this.emit("zoom"),setTimeout(this.updatePannability,50),this.setPage(this.currentPageNumber)}},{key:"setScale",value:function(e,t){var n=this.singleImageEls[0];this.scale=e?e/n.naturalWidth:t/n.naturalHeight,this.emit("scale",{scale:this.scale})}},{key:"loadUI",value:function(){re(oe(i.prototype),"loadUI",this).call(this),this.pageControls=new ee(this.controls,this.wrapperEl),this.bindPageControlListeners()}},{key:"bindPageControlListeners",value:function(){this.pageControls.add(this.currentPageNumber,this.pagesCount),this.pageControls.addListener("pagechange",this.setPage),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"handleMultiImageDownloadError",value:function(e){var n=this;this.singleImageEls.forEach(function(e,t){n.unbindImageListeners(t)});var t=this.singleImageEls[0].src;this.singleImageEls=[],this.handleDownloadError(e,t)}},{key:"bindImageListeners",value:function(e){0===e&&this.singleImageEls[e].addEventListener("load",this.finishLoading),this.singleImageEls[e].addEventListener("error",this.handleMultiImageDownloadError)}},{key:"unbindImageListeners",value:function(e){0===e&&this.singleImageEls[e].removeEventListener("load",this.finishLoading),this.singleImageEls[e].removeEventListener("error",this.handleMultiImageDownloadError)}},{key:"previousPage",value:function(){this.setPage(this.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.currentPageNumber+1)}},{key:"setPage",value:function(e){this.isValidPageChange(e)&&(this.singleImageEls[e-1].scrollIntoView(),this.updateCurrentPage(e))}},{key:"updateCurrentPage",value:function(e){this.isValidPageChange(e)&&(this.currentPageNumber=e,this.pageControls.updateCurrentPage(e),this.emit("pagefocus",{pageNumber:e}))}},{key:"isValidPageChange",value:function(e){return 1<=e&&e<=this.pagesCount&&e!==this.currentPageNumber}},{key:"scrollHandler",value:function(){if(!this.scrollCheckHandler){var e=this.handlePageChangeFromScroll;this.scrollCheckHandler=window.requestAnimationFrame(e)}}},{key:"handlePageChangeFromScroll",value:function(){var e=Object(_.A)(this.currentPageNumber,this.previousScrollTop,this.singleImageEls[this.currentPageNumber-1],this.wrapperEl);this.updateCurrentPage(e),this.scrollCheckHandler=null,this.previousScrollTop=this.wrapperEl.scrollTop}}]),i}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ue(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=[{NAME:"Image",CONSTRUCTOR:M,REP:b.db,EXT:["svg","gif"]},{NAME:"MultiImage",CONSTRUCTOR:se,REP:"png",EXT:["tif","tiff"],ASSET:"{page}.png"},{NAME:"Image",CONSTRUCTOR:M,REP:"jpg",EXT:["jpeg","jpg","cr2","crw","dng","nef","raf","raw"],ASSET:"1.jpg"},{NAME:"Image",CONSTRUCTOR:M,REP:"png",EXT:["ai","bmp","dcm","eps","gif","heic","png","ps","psd","svs","tga","tif","tiff"],ASSET:"1.png"}],pe=new(function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ue(this,he(t).call(this))).viewers=fe,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,a),function(e,t,n){t&&ce(e.prototype,t),n&&ce(e,n)}(t,[{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return(!e.properties||"false"!==e.properties.paged)&&t.REP===e.representation})}}]),t}());function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function me(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ye(e,t,n){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ge(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),me(this,ge(r).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(r,a),function(e,t,n){t&&be(e.prototype,t),n&&be(e,n)}(r,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=ye(ge(r.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(_.E)(e))return i}}]),r}(),ke=(n(239),"toggleVr"),Oe="error",Se="reset",Pe="sceneLoaded",Le="showVrButton",xe="toggleFullscreen",Ce="webglContextRestored",_e="webglContextLost",je="bp-is-hidden",Te="bp-invisible",He=(n(240),"canvasClick"),Ae="rotateOnAxis",Re="selectAnimationClip",Ie="setRenderMode",Me="setCameraProjection",Ve="setSkeletonsVisible",De="setWireframesVisible",Be="setGridVisible",Fe="toggleAnimation",ze="toggleHelpers",Ne="bp-overlay-panel",Ue="bp-pullup",qe="bp-settings-panel-label",We="bp-settings-panel-row",Ge="bp-is-hidden",Ke="Perspective",Xe="Orthographic",Ze="Lit",Qe="Unlit",Ye="Normals",Je="Shape",$e="UV Overlay";function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e){var t=0<arguments.length&&void 0!==e?e:"",n=document.createElement("div");return n.classList.add(qe),n.textContent=t,n}function nt(){var e=document.createElement("input");return e.type="checkbox",e}function it(){var e=document.createElement("div");return e.classList.add(Ne),e.classList.add(Ue),e.classList.add(Ge),e}function rt(e){var t=document.createElement("div");if(t.classList.add(We),e){var n=tt(e);t.appendChild(n)}return t}function ot(e,t,n){var i=1<arguments.length&&void 0!==t?t:"",r=2<arguments.length&&void 0!==n?n:[],o=rt(0<arguments.length&&void 0!==e?e:""),a=document.createElement("div");a.classList.add(b.E);var s=document.createElement("div");s.classList.add(b.p),s.innerHTML="<div class=".concat(b.o,">\n                                        <menu class=").concat(b.k,'>\n                                            <div class="link-group">\n                                                <ul></ul>\n                                            </div>\n                                        </menu>\n                                    </div>');var l=function(e){var t=0<arguments.length&&void 0!==e?e:"",n=document.createElement("button");return n.textContent=t,n.classList.add(b.e),n}(i);l.addEventListener("click",function(){s.classList.toggle(b.R)});var c=s.querySelector("ul");return r.forEach(function(e){var t=document.createElement("li"),n=document.createElement("a");n.classList.add(b.j),n.textContent=e.text,n.addEventListener("click",function(){l.textContent=e.text,s.classList.toggle(b.R),e.callback()}),t.appendChild(n),c.appendChild(t)}),a.appendChild(l),a.appendChild(s),o.appendChild(a),o}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"registry",{})}return function(e,t,n){t&&et(e.prototype,t),n&&et(e,n)}(e,[{key:"registerItem",value:function(e,t,n,i){if(!e)throw new Error("registerItem() requires a unique id");if(!t)throw new Error("registerItem() requires an element");if(this.registry[e]||(this.registry[e]={el:t,uuid:e,events:{}}),n&&i){t.addEventListener(n,i);var r=this.registry[e].events;r[n]=r[n]||[],r[n].push(i)}}},{key:"unregisterItem",value:function(e){var n=e;this.registry[n.uuid]&&(n.el.parentElement&&n.el.parentElement.removeChild(n.el),Object.keys(n.events).forEach(function(t){n.events[t].forEach(function(e){n.el.removeEventListener(t,e)}),delete n.events[t],delete n.el}),delete this.registry[n.uuid])}},{key:"unregisterAll",value:function(){var t=this;Object.keys(this.registry).forEach(function(e){t.unregisterItem(t.registry[e])})}}]),e}();function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),dt(ut(t=function(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?ut(e):t}(this,ct(n).call(this))),"el",void 0),dt(ut(t),"controls",void 0),dt(ut(t),"uiRegistry",void 0),dt(ut(t),"vrButtonEl",void 0),dt(ut(t),"vrButtonVisible",!1),t.el=e,t.controls=new h(t.el),t.uiRegistry=new at,t.handleToggleFullscreen=t.handleToggleFullscreen.bind(ut(t)),t.handleToggleVr=t.handleToggleVr.bind(ut(t)),t.handleReset=t.handleReset.bind(ut(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(n,D.a),function(e,t,n){t&&lt(e.prototype,t),n&&lt(e,n)}(n,[{key:"addUi",value:function(){this.addVrButton(),this.addFullscreenButton(),this.hideVrButton()}},{key:"addFullscreenButton",value:function(){this.controls.add("Enter fullscreen",this.handleToggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.handleToggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"addVrButton",value:function(){this.vrButtonEl=this.controls.add("Toggle VR display",this.handleToggleVr,"",f.b),this.vrButtonVisible?this.showVrButton():this.hideVrButton()}},{key:"handleSceneLoaded",value:function(){this.emit(Pe)}},{key:"handleToggleVr",value:function(){this.emit(ke)}},{key:"handleToggleFullscreen",value:function(){this.emit(xe)}},{key:"handleReset",value:function(){this.emit(Se)}},{key:"showVrButton",value:function(){this.vrButtonVisible=!0,this.vrButtonEl&&this.vrButtonEl.classList.remove(b.K)}},{key:"hideVrButton",value:function(){this.vrButtonVisible=!1,this.vrButtonEl&&this.vrButtonEl.classList.add(b.K)}},{key:"setElementVisibility",value:function(e,t){t?e.classList.remove(b.K):e.classList.add(b.K)}},{key:"toggleElementVisibility",value:function(e){e.classList.toggle(b.K)}},{key:"destroy",value:function(){this.controls&&this.controls.destroy(),this.uiRegistry&&this.uiRegistry.unregisterAll(),this.controls=null,this.uiRegistry=null}}]),n}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wt="orbit_camera";var Et=function(){function r(e,t){var n,i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).api;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),gt(mt(n=function(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?mt(e):t}(this,bt(r).call(this))),"api",void 0),gt(mt(n),"containerEl",void 0),gt(mt(n),"vrEnabled",!1),gt(mt(n),"vrGamepads",[]),gt(mt(n),"box3d",void 0),gt(mt(n),"boxSdk",void 0),gt(mt(n),"savedCameraPosition",void 0),gt(mt(n),"savedCameraQuaternion",void 0),gt(mt(n),"vrGamepadLoadPromises",{}),gt(mt(n),"vrCommonLoadPromise",void 0),gt(mt(n),"staticBaseURI",void 0),n.api=i,n.containerEl=e,n.boxSdk=t,n.handleContextLost=n.handleContextLost.bind(mt(n)),n.handleContextRestored=n.handleContextRestored.bind(mt(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(r,D.a),function(e,t,n){t&&vt(e.prototype,t),n&&vt(e,n)}(r,[{key:"load",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return this.staticBaseURI=n&&n.location?n.location.staticBaseURI:"",this.initBox3d(n)}},{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas&&(this.box3d.canvas.removeEventListener("webglcontextlost",this.handleContextLost),this.box3d.canvas.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.disableVr(),this.box3d.destroy(),this.box3d=null)}},{key:"reset",value:function(){this.resetView()}},{key:"resetView",value:function(){var e=this.getCamera();e&&(e.setPosition(this.savedCameraPosition.x,this.savedCameraPosition.y,this.savedCameraPosition.z),e.setQuaternion(this.savedCameraQuaternion.x,this.savedCameraQuaternion.y,this.savedCameraQuaternion.z,this.savedCameraQuaternion.w))}},{key:"getCamera",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.CameraObject):null}},{key:"getScene",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.SceneObject):null}},{key:"getBox3D",value:function(){return this.box3d}},{key:"configureXHR",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{},r=new XMLHttpRequest;return r.open("GET",t),i.isExternal||(r.setRequestHeader("Authorization","Bearer ".concat(e.token)),e.sharedLink&&function(e,t,n){var i="";if(n){var r=encodeURI(n);i="&shared_link_password=".concat(r)}e.setRequestHeader("boxapi","shared_link=".concat(encodeURI(t)).concat(i))}(r,e.sharedLink,e.sharedLinkPassword)),Promise.resolve(r)}},{key:"getEntitiesFromUrl",value:function(e){return this.api.get(e)}},{key:"initBox3d",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:{};if(!Box3D)return Promise.reject(new Error("Missing Box3D"));if(!n.file||!n.file.file_version)return Promise.reject(new Error("Missing file version"));var i=new Box3D.XhrResourceLoader(this.configureXHR.bind(this,n)),r=n&&n.box3dApplication?n.box3dApplication:{},o=Promise.resolve([]);return"object"===pt(r)?o=Promise.resolve(r):"string"==typeof r&&(o=this.getEntitiesFromUrl(r)),o.then(function(e){return t.createBox3d(i,n.sceneEntities,e.entities,"".concat(n.apiHost))})}},{key:"createBox3d",value:function(e,n,i,t){var r=this,o=new Box3D.Engine({container:this.containerEl,engineName:"Default",resourceLoader:e,apiBase:t});return o.canvas&&(o.canvas.addEventListener("webglcontextlost",this.handleContextLost),o.canvas.addEventListener("webglcontextrestored",this.handleContextRestored)),new Promise(function(e){i&&o.addEntities(i);var t=o.getAssetByClass(Box3D.ApplicationAsset);o.addEntities(n),(t=t||o.getAssetByClass(Box3D.ApplicationAsset)).load(),r.box3d=o,e(r.box3d)})}},{key:"handleContextLost",value:function(e){e.preventDefault(),this.emit(_e)}},{key:"handleContextRestored",value:function(){this.emit(Ce)}},{key:"onSceneLoad",value:function(){var e=this.getCamera();e&&(this.savedCameraPosition=e.getPosition(),this.savedCameraQuaternion=e.getQuaternion()),this.reset(),this.emit(Pe),this.initVr()}},{key:"toggleVr",value:function(){this.vrEnabled?this.disableVr():this.enableVr()}},{key:"onDisableVr",value:function(){this.enableCameraControls(),this.box3d.trigger("resize"),this.box3d.getRenderer().setAttribute("renderOnDemand",!0),this.hideVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting,this.resetView()}},{key:"onEnableVr",value:function(){this.disableCameraControls(),this.box3d.getRenderer().setAttribute("renderOnDemand",!1),this.showVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting}},{key:"enableVr",value:function(){this.vrEnabled||this.box3d.trigger("enableVrRendering")}},{key:"disableVr",value:function(){this.vrEnabled&&this.box3d.trigger("disableVrRendering")}},{key:"resize",value:function(){this.box3d&&this.box3d.trigger("resize")}},{key:"enableCameraControls",value:function(e){var t=0<arguments.length&&void 0!==e?e:wt,n=this.getCamera().getComponentByScriptId(t);n&&n.enable()}},{key:"disableCameraControls",value:function(e){var t=0<arguments.length&&void 0!==e?e:wt,n=this.getCamera().getComponentByScriptId(t);n&&n.disable()}},{key:"initVr",value:function(){var t=this;if(!Box3D.isTablet()){var e=this.box3d.getApplication().getComponentByScriptId("vr_presenter");e&&e.whenDisplaysAvailable(function(e){e.length&&(t.emit(Le),t.box3d.listenTo(t.box3d,"vrRenderingDisabled",t.onDisableVr.bind(t)),t.box3d.listenTo(t.box3d,"vrRenderingEnabled",t.onEnableVr.bind(t)),t.createVrGamepads())})}}},{key:"createVrGamepads",value:function(){var t=this;this.vrGamepads.length||(this.vrGamepads=[Box3D.Handedness.Left,Box3D.Handedness.Right].map(function(e){return t.createVrGamepad(e)}))}},{key:"createVrGamepad",value:function(e){function i(e){var t=e.find(function(e){return"prefab"===e.type}),n=r.box3d.getAssetById(t.id);o.addChild(n.createInstance()),r.vrEnabled?r.showVrGamepads():r.hideVrGamepads()}var r=this,o=this.box3d.createNode(),t=o.addComponent("motion_gamepad_device",{handPreference:e});return o.addComponent("intersection_checker",{objectTypeFilter:["mesh"]}),this.getScene().addChild(o),t.whenGamepadFound(function(e){var t=null,n=null;if(-1<e.id.indexOf("Oculus"))switch(n="oculusTouchCommon",e.hand){case"left":t="oculusTouchLeft";break;default:t="oculusTouchRight"}else-1<e.id.indexOf("OpenVR")&&(t="viveController");r.vrCommonLoadPromise||(r.vrCommonLoadPromise=n?r.box3d.importEntitiesFromUrl("".concat(r.staticBaseURI,"third-party/model3d/").concat(b.cb,"/WebVR/").concat(n,"/entities.json"),{isExternal:!0}):Promise.resolve()),r.vrGamepadLoadPromises[t]||(r.vrGamepadLoadPromises[t]=r.vrCommonLoadPromise.then(function(){return r.box3d.importEntitiesFromUrl("".concat(r.staticBaseURI,"third-party/model3d/").concat(b.cb,"/WebVR/").concat(t,"/entities.json"),{isExternal:!0})})),r.vrGamepadLoadPromises[t].then(i)}),o}},{key:"showVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!0)})}},{key:"hideVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!1)})}}]),r}(),kt=n(58),Ot="third-party/model3d/".concat(b.cb,"/"),St=["".concat(Ot,"boxsdk.min.js"),"".concat(Ot,"three.min.js"),"".concat(Ot,"box3d-runtime.min.js"),"".concat(Ot,"webvr-polyfill.js"),"".concat(Ot,"WebVR/VRConfig.js")];n(241);function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e,t,n){return(Ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ht="vr-enabled",At=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Tt(xt(t=function(e,t){return!t||"object"!==Pt(t)&&"function"!=typeof t?xt(e):t}(this,_t(n).call(this,e))),"renderer",void 0),Tt(xt(t),"wrapperEl",void 0),Tt(xt(t),"contextNotification",void 0),t.handleToggleVr=t.handleToggleVr.bind(xt(t)),t.handleReset=t.handleReset.bind(xt(t)),t.handleSceneLoaded=t.handleSceneLoaded.bind(xt(t)),t.handleShowVrButton=t.handleShowVrButton.bind(xt(t)),t.handleError=t.handleError.bind(xt(t)),t.handleContextRestored=t.handleContextRestored.bind(xt(t)),t.handleContextLost=t.handleContextLost.bind(xt(t)),t.onVrPresentChange=t.onVrPresentChange.bind(xt(t)),t.handleEnableVr=t.handleEnableVr.bind(xt(t)),t.handleDisableVr=t.handleDisableVr.bind(xt(t)),t.postLoad=t.postLoad.bind(xt(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(n,d["a"]),function(e,t,n){t&&Lt(e.prototype,t),n&&Lt(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(Ct(_t(n.prototype),"setup",this).call(this),this.renderer=null,this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className="bp-box3d",this.contextNotification=new kt.a(this.wrapperEl),this.loadTimeout=5e4)}},{key:"createSubModules",value:function(){this.controls=new ft(this.wrapperEl),this.renderer=new Et(this.wrapperEl,this.boxSdk,{api:this.api})}},{key:"attachEventHandlers",value:function(){this.controls&&(this.controls.on(xe,this.toggleFullscreen),this.controls.on(ke,this.handleToggleVr),this.controls.on(Se,this.handleReset)),this.renderer&&(this.renderer.on(Pe,this.handleSceneLoaded),this.renderer.on(Le,this.handleShowVrButton),this.renderer.on(Oe,this.handleError),this.renderer.on(Ce,this.handleContextRestored),this.renderer.on(_e,this.handleContextLost)),window.addEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.addEventListener("vrdisplayactivate",this.handleEnableVr),window.addEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"detachEventHandlers",value:function(){this.controls&&(this.controls.removeListener(xe,this.toggleFullscreen),this.controls.removeListener(ke,this.handleToggleVr),this.controls.removeListener(Se,this.handleReset)),this.renderer&&(this.renderer.removeListener(Pe,this.handleSceneLoaded),this.renderer.removeListener(Le,this.handleShowVrButton),this.renderer.removeListener(Oe,this.handleError),this.renderer.removeListener(Ce,this.handleContextRestored),this.renderer.removeListener(_e,this.handleContextLost)),window.removeEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.removeEventListener("vrdisplayactivate",this.handleEnableVr),window.removeEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"resize",value:function(){Ct(_t(n.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"destroy",value:function(){Ct(_t(n.prototype),"destroy",this).call(this),this.detachEventHandlers(),this.destroySubModules(),this.destroyed=!0}},{key:"destroySubModules",value:function(){this.controls&&this.controls.destroy(),this.renderer&&this.renderer.destroy()}},{key:"load",value:function(){return Ct(_t(n.prototype),"load",this).call(this),Promise.all([this.loadAssets(St),this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"postLoad",value:function(){var e=this.options,t=e.representation,n=e.token,i=e.apiHost,r=e.sharedLink,o=t.content.url_template;this.boxSdk=new BoxSDK({token:n,sharedLink:r,apiBase:i}),this.createSubModules(),this.attachEventHandlers(),this.startLoadTimer(),this.renderer.load(this.createContentUrl(o,"entities.json"),this.options).catch(this.handleError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(St);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;this.api.get(this.createContentUrl(a,"entities.json"),{headers:this.appendAuthHeader(),type:"document"})}}},{key:"handleContextLost",value:function(){this.contextNotification.show("WebGL Context Lost"),this.destroySubModules()}},{key:"handleContextRestored",value:function(){this.detachEventHandlers(),this.contextNotification.show("WebGL Context Restored"),this.emit(y.n.progressStart),this.previewUI.showLoadingIndicator(),this.postLoad()}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr()}},{key:"handleEnableVr",value:function(){this.renderer.enableVr()}},{key:"handleDisableVr",value:function(){this.renderer.disableVr()}},{key:"onVrPresentChange",value:function(){var e=this.renderer.box3d.getVrDisplay();v.a.isMobile()&&(e&&e.isPresenting?this.wrapperEl.classList.add(Ht):this.wrapperEl.classList.remove(Ht),this.controls&&(this.controls.vrEnabled=e&&e.isPresenting))}},{key:"handleSceneLoaded",value:function(){this.controls&&this.controls.addUi(),this.emit("load"),this.loaded=!0}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"handleReset",value:function(){this.renderer&&this.renderer.reset()}},{key:"handleError",value:function(e){this.emit(Oe,e)}}]),n}(),Rt=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!v.a.isMobile(),maxTextureSize2d:8192,renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}];function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bt(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return zt(Vt(t=function(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?Vt(e):t}(this,(e=Bt(o)).call.apply(e,[this].concat(i)))),"textureAsset",void 0),zt(Vt(t),"imageAsset",void 0),zt(Vt(t),"skybox",void 0),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(o,Et),function(e,t,n){t&&Mt(e.prototype,t),n&&Mt(e,n)}(o,[{key:"destroy",value:function(){this.cleanupTexture(),Dt(Bt(o.prototype),"destroy",this).call(this)}},{key:"cleanupTexture",value:function(){this.imageAsset&&(this.imageAsset.destroy(),this.imageAsset=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.skybox&&(this.getSkyboxComponent().setAttribute("skyboxTexture",null),this.skybox=null)}},{key:"getSkyboxComponent",value:function(){return this.skybox||(this.skybox=this.getScene().getComponentByScriptId("skybox_renderer")),this.skybox}},{key:"load",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return n.sceneEntities=n.sceneEntities||Rt,Dt(Bt(o.prototype),"load",this).call(this,e,n).then(this.loadPanoramaFile.bind(this,e)).then(this.onSceneLoad.bind(this))}},{key:"loadPanoramaFile",value:function(e){var t=this;return this.box3d.importEntitiesFromUrl(e).then(function(){return t.imageAsset=t.box3d.getAssetByClass(Box3D.ImageAsset),t.textureAsset=t.box3d.createTexture2d(),t.textureAsset.setProperties({imageId:t.imageAsset.id,wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"}),new Promise(function(e){t.textureAsset.load(function(){t.skybox=t.getSkyboxComponent(),t.skybox.enable(),t.skybox.setAttribute("skyboxTexture",t.textureAsset.id),e()})})},function(){return t.onUnsupportedRepresentation()})}},{key:"enableVr",value:function(){Dt(Bt(o.prototype),"enableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!0)}},{key:"disableVr",value:function(){Dt(Bt(o.prototype),"disableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!1)}}]),o}();function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Gt(e,t,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kt(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yt(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Jt(e,t,n){return(Jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$t(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tn=[{NAME:"Image360",CONSTRUCTOR:function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,Kt(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(e,At),function(e,t,n){t&&qt(e.prototype,t),n&&qt(e,n)}(e,[{key:"setup",value:function(){this.isSetup||(Gt(Kt(e.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-image-360"),this.loadTimeout=12e4)}},{key:"createSubModules",value:function(){this.controls=new ft(this.wrapperEl),this.renderer=new Nt(this.wrapperEl,this.boxSdk,{api:this.api})}}]),e}(),REP:"3d",EXT:["jpg","jpeg","png","ai","bmp","dcm","eps","gif","heic","ps","psd","svg","svs","tga","tif","tiff"]}],nn=new(function(){function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=Yt(this,$t(o).call(this))).viewers=tn,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(o,Ee),function(e,t,n){t&&Qt(e.prototype,t),n&&Qt(e,n)}(o,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=Jt($t(o.prototype),"determineViewer",this).call(this,e,n);if(!i||v.a.hasWebGL())return i;var r=Object(_.D)("We’re sorry, your browser doesn’t support preview for {1}.",["360-degree images"]);throw new m.a(y.c.BROWSER_UNSUPPORTED,r,{file:e})}}]),o}());function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t,n){return(sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un={allowfullscreen:"true",allowFullScreen:"true",allownetworking:"none",allowNetworking:"none",allowscriptaccess:"never",allowScriptAccess:"never",wmode:"transparent"},hn=["third-party/swf/".concat(b.Ib,"/swfobject.js")];function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pn(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function vn(e,t,n){return(vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yn=[{NAME:"SWF",CONSTRUCTOR:function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(an(t=function(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?an(e):t}(this,(e=ln(o)).call.apply(e,[this].concat(i)))),"postLoad",function(){var e=t.options.representation.content.url_template;t.startLoadTimer(),swfobject.embedSWF(t.createContentUrlWithAuthParams(e),t.playerEl.id,"100%","100%","9",null,null,un,null,function(){t.isDestroyed()||(t.loaded=!0,t.emit(y.n.load))})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(o,d["a"]),function(e,t,n){t&&on(e.prototype,t),n&&on(e,n)}(o,[{key:"setup",value:function(){this.isSetup||(sn(ln(o.prototype),"setup",this).call(this),this.playerEl=this.createViewer(document.createElement("div")),this.playerEl.id="flash-player")}},{key:"load",value:function(){return sn(ln(o.prototype),"load",this).call(this),this.loadAssets(hn).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets;void 0!==t&&!t||this.prefetchAssets(hn)}}]),o}(),REP:b.db,EXT:["swf"]}],gn=new(function(){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=pn(this,bn(r).call(this))).viewers=yn,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(r,a),function(e,t,n){t&&fn(e.prototype,t),n&&fn(e,n)}(r,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=vn(bn(r.prototype),"determineViewer",this).call(this,e,n);if(i&&!v.a.hasFlash())throw new m.a(y.c.FLASH_NOT_ENABLED,"We’re sorry, the preview didn’t load because Flash is not enabled on your browser. If possible, please enable Flash and refresh the page.");return i}}]),r}()),wn=(n(242),n(7));function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e,t,n){return(Sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xn=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?On(e):t}(this,Pn(n).call(this,e))).api=e.api,t.zoomOut=t.zoomOut.bind(On(t)),t.zoomIn=t.zoomIn.bind(On(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(n,d["a"]),function(e,t,n){t&&kn(e.prototype,t),n&&kn(e,n)}(n,[{key:"setup",value:function(){this.isSetup||Sn(Pn(n.prototype),"setup",this).call(this)}},{key:"destroy",value:function(){this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),Sn(Pn(n.prototype),"destroy",this).call(this)}},{key:"zoom",value:function(e){var t=this.containerEl.querySelector(".bp-text"),n=parseInt(t.style.fontSize,10)||100,i=0;"in"===e?i="".concat(n+10,"%"):"out"===e&&(i="".concat(n-10,"%")),t.style.fontSize=i,this.emit("zoom",{zoom:i,canZoomIn:!0,canZoomOut:!0})}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"load",value:function(){Object(wn.e)(this.options.file,b.ib)&&!this.getViewerOption("disableTextLayer")&&(this.containerEl.classList.add(b.N),this.containerEl.classList.add(b.P)),Sn(Pn(n.prototype),"load",this).call(this)}},{key:"loadUI",value:function(){this.controls=new h(this.containerEl),this.controls.add("Zoom out",this.zoomOut,"bp-text-zoom-out-icon",f.w),this.controls.add("Zoom in",this.zoomIn,"bp-text-zoom-in-icon",f.v),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"resize",value:function(){Sn(Pn(n.prototype),"resize",this).call(this)}}]),n}();function Cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),_n(this,"popupClickHandler",function(e){e.preventDefault(),e.stopPropagation(),e.target===t.closeButtonEl||e.target===t.backdropEl?t.hide():e.target!==t.buttonEl||t.isButtonDisabled()||("function"==typeof t.buttonEl.handler?t.buttonEl.handler():t.hide())}),_n(this,"keydownHandler",function(e){switch(Object(_.k)(e)){case"Esc":case"Escape":t.hide();break;default:return!1}return!0}),this.containerEl=e;var n="popup_".concat((new Date).getTime(),"_label");this.popupEl=document.createElement("div"),this.popupEl.className="bp-modal-dialog bp-is-hidden",this.popupEl.setAttribute("role","alert"),this.popupEl.setAttribute("aria-labeledby",n),this.popupEl.innerHTML='\n            <div class="bp-modal-header">\n                <button class="bp-modal-close-button" type="button">\n                    '.concat(f.g,'\n                </button>\n            </div>\n            <div class="bp-modal-content">\n                <p class="bp-modal-message" id=').concat(n,'></p>\n                <div class="bp-modal-actions">\n                    <button class="bp-btn bp-btn-primary bp-popup-btn" type="button"> </button>\n                </div>\n            </div>\n            <div class="bp-modal-backdrop"> </div>\n        ').trim(),this.messageEl=this.popupEl.querySelector("#".concat(n)),this.buttonEl=this.popupEl.querySelector("button.bp-popup-btn"),this.closeButtonEl=this.popupEl.querySelector("button.bp-modal-close-button"),this.contentEl=this.popupEl.querySelector("div.bp-modal-content"),this.backdropEl=this.popupEl.querySelector("div.bp-modal-backdrop"),this.buttonDisabled=!1,this.popupEl.addEventListener("click",this.popupClickHandler),document.addEventListener("keydown",this.keydownHandler);var i=document.createElement("div");i.className="bp-popup-modal",i.appendChild(this.popupEl),e.appendChild(i)}return function(e,t,n){t&&Cn(e.prototype,t),n&&Cn(e,n)}(r,[{key:"destroy",value:function(){if(this.popupEl){this.popupEl.removeEventListener("click",this.popupClickHandler),document.removeEventListener("keydown",this.keydownHandler);var e=this.popupEl.parentNode;e.parentNode.removeChild(e),this.popupEl=null}}},{key:"show",value:function(e,t,n){this.messageEl.textContent=e,this.buttonEl.textContent=t||"Okay",n&&"function"==typeof n&&(this.buttonEl.handler=n),this.popupEl.classList.remove(b.K),this.popupEl.focus()}},{key:"hide",value:function(){this.popupEl.classList.add(b.K)}},{key:"addContent",value:function(e,t){t?this.contentEl.insertBefore(e,this.contentEl.firstChild):this.contentEl.appendChild(e)}},{key:"isVisible",value:function(){return!this.popupEl.classList.contains(b.K)}},{key:"isButtonDisabled",value:function(){return this.buttonDisabled}},{key:"disableButton",value:function(){this.buttonDisabled=!0,this.buttonEl.classList.add("is-disabled")}},{key:"enableButton",value:function(){this.buttonDisabled=!1,this.buttonEl.classList.remove("is-disabled")}}]),r}(),Tn=["csv","log","md","tsv","txt"],Hn=["htm","html","xhtml","xml","xsd","xsl"],An=["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","java","js","json","less","m","make","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","yaml"],Rn=An.concat(Tn).concat(Hn).concat(["doc","docx","dwg","gdoc","gsheet","gslide","gslides","pages","numbers","key","msg","odp","ods","odt","pdf","ppt","pptx","rtf","wpd","xls","xlsm","xlsx"]),In=An.concat(Tn),Mn=An.concat(Hn);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t,n){return(Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Un="third-party/text/".concat(b.Jb,"/"),qn=["".concat(Un,"highlight.min.js")],Wn=["".concat(Un,"github.min.css")],Gn=function(){function r(){var e,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bn(l=function(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?Bn(e):t}(this,(e=zn(r)).call.apply(e,[this].concat(n)))),"postLoad",function(){var e=l.options,t=e.representation,n=e.file,i=t.content.url_template,r=n.extension,o=n.size;l.truncated=196608<o;var a=l.truncated?{Range:"bytes=0-".concat(196608)}:{},s=l.createContentUrlWithAuthParams(i);return l.startLoadTimer(),l.api.get(s,{headers:a,type:"text"}).catch(function(e){l.handleDownloadError(e,s)}).then(function(e){if(!l.isDestroyed()){var t=e;l.truncated&&(t+="..."),-1===Mn.indexOf(r)?l.finishLoading(t,!1):l.initHighlightJs(t)}}).catch(l.handleAssetError)}),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(r,xn),function(e,t,n){t&&Dn(e.prototype,t),n&&Dn(e,n)}(r,[{key:"destroy",value:function(){if(this.textEl){var e=this.textEl.querySelector(".bp-btn-download");e&&e.removeEventListener("click",this.download.bind(this))}this.printIframe=null,Fn(zn(r.prototype),"destroy",this).call(this)}},{key:"load",value:function(){Fn(zn(r.prototype),"load",this).call(this);var e=this.loadAssets(this.getJS(),this.getCSS());return Promise.all([e,this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJS(),this.getCSS());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;this.api.get(this.createContentUrlWithAuthParams(a),{type:"document"})}}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe(),this.emit("printsuccess")}},{key:"setup",value:function(){this.isSetup||(Fn(zn(r.prototype),"setup",this).call(this),this.textEl=this.createViewer(document.createElement("pre")),this.textEl.className="bp-text bp-text-plain hljs ".concat(b.O," ").concat(b.K),this.textEl.tabIndex="0",this.codeEl=this.textEl.appendChild(document.createElement("code")),this.codeEl.className="bp-text-code ".concat(this.options.file.extension),this.truncated=!1,this.initPrint())}},{key:"getJS",value:function(){return qn}},{key:"getCSS",value:function(){return Wn}},{key:"finishLoading",value:function(e,t){t?this.codeEl.innerHTML=e:this.codeEl.textContent=e,this.loadUI(),this.textEl.classList.remove(b.K),this.loaded=!0,this.emit(y.n.load),this.truncated&&this.showTruncatedDownloadButton(),this.workerSrc&&URL.revokeObjectURL(this.workerSrc)}},{key:"initHighlightJs",value:function(e){var t=this,n=new Blob(["onmessage=function(e){importScripts(e.data.highlightSrc);postMessage(self.hljs.highlightAuto(e.data.text).value)};"],{type:"application/javascript"});this.workerSrc=URL.createObjectURL(n);var i=new Worker(this.workerSrc);i.onmessage=function(e){t.finishLoading(e.data,!0)};var r=Object(_.g)(this.options.location)("third-party/text/".concat(b.Jb,"/highlight.min.js"));i.postMessage({highlightSrc:r,text:e})}},{key:"initPrint",value:function(){this.printPopup=new jn(this.rootEl);var e=document.createElement("div");e.className="bp-print-check ".concat(b.K),e.innerHTML=f.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"preparePrint",value:function(e){var t=this,n=Object(_.g)(this.options.location);this.printframe=Object(_.y)(this.textEl.outerHTML),e.forEach(function(e){t.printframe.contentDocument.head.appendChild(Object(_.j)(n(e)))}),setTimeout(function(){t.printPopup&&(t.printPopup.enableButton(),t.printPopup.messageEl.textContent="Ready to print.",t.printPopup.loadingIndicator.classList.add(b.K),t.printPopup.printCheckmark.classList.remove(b.K)),t.printReady=!0},5e3)}},{key:"printIframe",value:function(){this.printframe.contentWindow.focus(),"Explorer"===v.a.getName()||"Edge"===v.a.getName()?this.printframe.contentWindow.document.execCommand("print",!1,null):this.printframe.contentWindow.print()}},{key:"showTruncatedDownloadButton",value:function(){var e=document.createElement("div");e.classList.add("bp-text-truncated");var t=document.createElement("p");t.textContent="This file has been truncated due to size limits. Please download to view the whole file.";var n=document.createElement("button");n.className="bp-btn bp-btn-primary bp-btn-download",n.textContent="Download File",e.appendChild(t),e.appendChild(n),this.textEl.appendChild(e),n.addEventListener("click",this.download.bind(this))}},{key:"download",value:function(){this.emit(y.n.download)}}]),r}();n(243);function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zn(e,t){return!t||"object"!==Kn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Qn(e,t,n){return(Qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n,ei="third-party/text/".concat(b.Jb,"/"),ti=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zn(this,Yn(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(e,Gn),function(e,t,n){t&&Xn(e.prototype,t),n&&Xn(e,n)}(e,[{key:"setup",value:function(){this.isSetup||(Qn(Yn(e.prototype),"setup",this).call(this),this.codeEl.parentNode.removeChild(this.codeEl),this.codeEl=null,this.markdownEl=this.textEl.appendChild(document.createElement("article")),this.markdownEl.classList.add("markdown-body"))}},{key:"getJS",value:function(){return Qn(Yn(e.prototype),"getJS",this).call(this).concat("".concat(ei,"remarkable.min.js"))}},{key:"getCSS",value:function(){return Qn(Yn(e.prototype),"getCSS",this).call(this).concat("".concat(ei,"github-markdown.min.css"))}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe()}},{key:"finishLoading",value:function(e){var t=this.initRemarkable();this.markdownEl.innerHTML=t.render(e),this.loadUI(),this.textEl.classList.remove(b.K),this.loaded=!0,this.emit(y.n.load),this.truncated&&this.showTruncatedDownloadButton()}},{key:"loadUI",value:function(){this.controls=new h(this.containerEl),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"initRemarkable",value:function(){var e=new Remarkable({breaks:!0,linkify:!0,linkTarget:"_blank",typographer:!0,highlight:function(e,t){if(t&&hljs.getLanguage(t))try{return hljs.highlight(t,e).value}catch(e){}try{return hljs.highlightAuto(e).value}catch(e){}return""}}),r=e.renderer.rules.link_open;return e.renderer.rules.link_open=function(e,t,n){var i=r(e,t,n);return"".concat(i.slice(0,-1),' rel="noopener noreferrer">')},e}}]),e}();n(244);function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ii(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ri(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oi(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ai(e,t,n){return(ai="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=si(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function si(e){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t){return(li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ui=["third-party/text/".concat(b.Jb,"/papaparse.min.js"),"csv.js"],hi="FieldMismatch",di="Quotes",fi=(ci($n={},"Delimiter",0),ci($n,di,1),ci($n,hi,2),$n);function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bi(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function mi(e,t,n){return(mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yi(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return(gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wi=[{NAME:"CSV",CONSTRUCTOR:function(){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),oi(this,si(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}(o,xn),function(e,t,n){t&&ri(e.prototype,t),n&&ri(e,n)}(o,[{key:"setup",value:function(){this.isSetup||(ai(si(o.prototype),"setup",this).call(this),this.csvEl=this.createViewer(document.createElement("div")),this.csvEl.className="bp-text bp-text-csv")}},{key:"destroy",value:function(){this.csvComponent&&this.csvComponent.destroy(),ai(si(o.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var a=this;ai(si(o.prototype),"load",this).call(this);var e=this.options,t=e.representation,n=e.location,i=t.content.url_template,r=Object(_.g)(n)(ui[0]);return Promise.all([this.loadAssets(ui),this.getRepStatus().getPromise()]).then(function(){a.api.get(r,{type:"blob"}).then(function(e){var t=URL.createObjectURL(e);Papa.SCRIPT_PATH=t,a.startLoadTimer();var o=a.createContentUrlWithAuthParams(i);Papa.parse(o,{download:!0,error:function(e,t,n,i){var r=new m.a(y.c.LOAD_CSV,"We’re sorry, the preview didn’t load. Please refresh the page.",{reason:i});a.handleDownloadError(r,o)},complete:function(e){!a.isDestroyed()&&e&&(a.checkForParseErrors(e),a.data=e.data,a.finishLoading(),URL.revokeObjectURL(t))}})})}).catch(this.handleAssetError)}},{key:"checkForParseErrors",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).errors,n=void 0===t?[]:t;if(n.length){var i=this.getWorstParseError(n),r=new m.a(y.c.PARSE_CSV,void 0,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ii(n,!0).forEach(function(e){ci(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ii(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},i,{silent:!0}));this.triggerError(r)}}},{key:"getWorstParseError",value:function(e){return(0<arguments.length&&void 0!==e?e:[]).sort(function(e,t){return fi[e.type]-fi[t.type]})[0]}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(ui);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;this.api.get(this.createContentUrlWithAuthParams(a),{type:"document"})}}},{key:"resize",value:function(){this.csvComponent&&this.csvComponent.renderCSV(),ai(si(o.prototype),"resize",this).call(this)}},{key:"finishLoading",value:function(){this.csvComponent=new BoxCSV(this.csvEl,this.data),this.csvComponent.renderCSV(),this.loadUI(),this.loaded=!0,this.emit(y.n.load)}}]),o}(),REP:"text",EXT:["csv","tsv"]},{NAME:"Markdown",CONSTRUCTOR:ti,REP:"text",EXT:["md"]},{NAME:"Text",CONSTRUCTOR:Gn,REP:b.db,EXT:Hn},{NAME:"Text",CONSTRUCTOR:Gn,REP:"text",EXT:In}],Ei=new(function(){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=bi(this,yi(r).call(this))).viewers=wi,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gi(e,t)}(r,a),function(e,t,n){t&&vi(e.prototype,t),n&&vi(e,n)}(r,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=mi(yi(r.prototype),"determineViewer",this).call(this,e,n);if(!i||!Object(wn.j)(e))return i}}]),r}()),ki=n(28),Oi=n.n(ki);function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _i="bp-media-scrubber-hover",ji=function(){function l(e,t,n,i){var r,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=function(e,t){return!t||"object"!==Si(t)&&"function"!=typeof t?xi(e):t}(this,Li(l).call(this))).containerEl=e,r.containerEl.setAttribute("role","slider"),r.containerEl.setAttribute("aria-label",t),r.containerEl.setAttribute("title",t),r.containerEl.setAttribute("aria-valuemin",n),r.containerEl.setAttribute("aria-valuemax",i),r.containerEl.setAttribute("aria-valuenow",o),r.containerEl.innerHTML='<div class="bp-media-scrubber-container">\n    <div class="bp-media-scrubber-wrapper">\n        <div class="bp-media-scrubber">\n            <div class="bp-media-scrubber-underlay"></div>\n            <div class="bp-media-scrubber-buffered"></div>\n            <div class="bp-media-scrubber-converted"></div>\n            <div class="bp-media-scrubber-played"></div>\n            <div class="bp-media-scrubber-handle"></div>\n        </div>\n    </div>\n</div>\n'.replace(/>\s*</g,"><"),r.scrubberContainerEl=r.containerEl.querySelector(".bp-media-scrubber-container"),r.scrubberWrapperEl=r.containerEl.querySelector(".bp-media-scrubber-wrapper"),r.scrubberEl=r.containerEl.querySelector(".bp-media-scrubber"),r.bufferedEl=r.scrubberEl.querySelector(".bp-media-scrubber-buffered"),r.convertedEl=r.scrubberEl.querySelector(".bp-media-scrubber-converted"),r.playedEl=r.scrubberEl.querySelector(".bp-media-scrubber-played"),r.handleEl=r.scrubberEl.querySelector(".bp-media-scrubber-handle"),r.hasTouch=v.a.hasTouch(),r.setConvertedValue(s),r.setBufferedValue(a),r.setValue(o),r.pointerUpHandler=r.pointerUpHandler.bind(xi(r)),r.scrubbingHandler=r.scrubbingHandler.bind(xi(r)),r.pointerDownHandler=r.pointerDownHandler.bind(xi(r)),r.playedEl.addEventListener("mousedown",r.pointerDownHandler),r.convertedEl.addEventListener("mousedown",r.pointerDownHandler),r.handleEl.addEventListener("mousedown",r.pointerDownHandler),r.hasTouch&&(r.scrubberContainerEl.addEventListener("touchstart",r.pointerDownHandler),r.scrubberWrapperEl.classList.add("bp-media-scrubber-touch")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ci(e,t)}(l,D.a),function(e,t,n){t&&Pi(e.prototype,t),n&&Pi(e,n)}(l,[{key:"destroy",value:function(){this.removeAllListeners(),this.destroyDocumentHandlers(),this.playedEl.removeEventListener("mousedown",this.pointerDownHandler),this.convertedEl.removeEventListener("mousedown",this.pointerDownHandler),this.handleEl.removeEventListener("mousedown",this.pointerDownHandler),this.scrubberContainerEl.removeEventListener("touchstart",this.pointerDownHandler),this.scrubberContainerEl=void 0,this.scrubberWrapperEl=void 0,this.scrubberEl=void 0,this.bufferedEl=void 0,this.convertedEl=void 0,this.playedEl=void 0,this.handleEl=void 0,this.containerEl.innerHTML=""}},{key:"resize",value:function(e){this.scrubberWrapperEl.style.width="".concat(this.containerEl.clientWidth-e,"px")}},{key:"setAriaValues",value:function(e,t){this.containerEl.setAttribute("aria-valuenow",e),this.containerEl.setAttribute("aria-valuetext",t)}},{key:"setValue",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;t!==this.value&&(this.value=Math.max(Math.min(t,this.convertedValue),0),this.playedEl.style.width="".concat(100*this.value,"%"),this.handleEl.style.left="".concat(100*this.value,"%"))}},{key:"setBufferedValue",value:function(e){var t=0<arguments.length&&void 0!==e?e:1;t!==this.bufferedValue&&(this.bufferedValue=Math.max(Math.min(t,this.convertedValue),this.value||0),this.bufferedEl.style.width="".concat(100*this.bufferedValue,"%"))}},{key:"setConvertedValue",value:function(e){var t=0<arguments.length&&void 0!==e?e:1;t!==this.convertedValue&&(this.convertedValue=Math.max(Math.min(Math.max(t,this.convertedValue||0),1),0),this.convertedEl.style.width="".concat(100*this.convertedValue,"%"))}},{key:"computeScrubberPosition",value:function(e){var t=this.scrubberEl.getBoundingClientRect(),n=(e-t.left)/t.width;return Math.max(Math.min(n,1),0)}},{key:"scrubbingHandler",value:function(e){e.preventDefault();var t=e.pageX;e.touches&&(t=e.touches[0].pageX);var n=this.computeScrubberPosition(t);this.setValue(n),this.emit("valuechange")}},{key:"pointerDownHandler",value:function(e){!("number"!=typeof e.button||e.button<2)||e.ctrlKey||e.metaKey||(this.scrubbingHandler(e),document.addEventListener("mouseup",this.pointerUpHandler),document.addEventListener("mouseleave",this.pointerUpHandler),document.addEventListener("mousemove",this.scrubbingHandler),this.hasTouch?(document.addEventListener("touchmove",this.scrubbingHandler),document.addEventListener("touchend",this.pointerUpHandler)):this.scrubberWrapperEl.classList.add(_i),e.preventDefault())}},{key:"pointerUpHandler",value:function(){this.scrubberWrapperEl.classList.remove(_i),this.destroyDocumentHandlers()}},{key:"destroyDocumentHandlers",value:function(){document.removeEventListener("mousemove",this.scrubbingHandler),document.removeEventListener("mouseup",this.pointerUpHandler),document.removeEventListener("mouseleave",this.pointerUpHandler),this.hasTouch&&(document.removeEventListener("touchmove",this.scrubbingHandler),document.removeEventListener("touchend",this.pointerUpHandler))}},{key:"getValue",value:function(){return this.value}},{key:"getHandleEl",value:function(){return this.handleEl}},{key:"getConvertedEl",value:function(){return this.convertedEl}}]),l}();function Ti(e){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ai(e){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vi="speed",Di="quality",Bi="bp-media-settings-selected",Fi="bp-media-settings-is-open",zi="bp-media-settings-subtitles-unavailable",Ni="bp-media-settings-audiotracks-unavailable",Ui="bp-media-settings-hd-unavailable",qi="bp-media-settings-subtitles-on",Wi=".bp-media-settings-sub-item",Gi=".bp-media-settings-value",Ki=["0.5","1.0","1.25","1.5","2.0"],Xi='<div class="bp-media-settings">\n    <div class="bp-media-settings-menu-main bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-item bp-media-settings-item-autoplay" data-type="autoplay" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="'.concat("Autoplay",'">').concat("Autoplay",'</div>\n            <div class="bp-media-settings-value">').concat("Disabled",'</div>\n            <div class="bp-media-settings-arrow">').concat(f.e,'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-speed" data-type="speed" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="').concat("Speed",'">').concat("Speed",'</div>\n            <div class="bp-media-settings-value">').concat("Normal",'</div>\n            <div class="bp-media-settings-arrow">').concat(f.e,'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-quality" data-type="quality" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="').concat("Quality",'">').concat("Quality",'</div>\n            <div class="bp-media-settings-value">').concat("Auto",'</div>\n            <div class="bp-media-settings-arrow">').concat(f.e,'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-subtitles bp-media-settings-is-hidden" data-type="subtitles" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="').concat("Subtitles",'/CC">').concat("Subtitles",'/CC</div>\n            <div class="bp-media-settings-value">').concat("Off",'</div>\n            <div class="bp-media-settings-arrow">').concat(f.e,'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-audiotracks bp-media-settings-is-hidden" data-type="audiotracks" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="').concat("Audio",'">').concat("Audio",'</div>\n            <div class="bp-media-settings-value"></div>\n            <div class="bp-media-settings-arrow">').concat(f.e,'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-autoplay bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-autoplay" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">').concat(f.d,'</div>\n            <div class="bp-media-settings-label" aria-label="').concat("Autoplay",'">').concat("Autoplay",'</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Disabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">').concat("Disabled",'</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Enabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">').concat("Enabled",'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-speed bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-speed" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">').concat(f.d,'</div>\n            <div class="bp-media-settings-label" aria-label="').concat("Speed",'">').concat("Speed",'</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="0.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">0.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="speed" data-value="1.0" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">').concat("Normal",'</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.25" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">1.25</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">1.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="2.0" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">2.0</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-quality bp-media-settings-menu bp-media-settings-is-hidden" data-disabled="true" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-quality" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">').concat(f.d,'</div>\n            <div class="bp-media-settings-label" aria-label="').concat("Quality",'">').concat("Quality",'</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=').concat("sd",' tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">480p</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=').concat("hd",' tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">1080p</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="quality" data-value=').concat("auto",' tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">').concat("Auto",'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-subtitles bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-subtitles" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">').concat(f.d,'</div>\n            <div class="bp-media-settings-label" aria-label="').concat("Subtitles",'/CC">').concat("Subtitles",'/CC</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="subtitles" data-value="-1" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">').concat(f.f,'</div>\n            <div class="bp-media-settings-value">').concat("Off",'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-audiotracks bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-audiotracks" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">').concat(f.d,'</div>\n            <div class="bp-media-settings-label" aria-label="').concat("Audio",'">').concat("Audio","</div>\n        </div>\n    </div>\n</div>"),Zi='<div class="bp-media-settings-sub-item" data-type="{{dataType}}" data-value="{{dataValue}}" tabindex="0" role="menuitemradio">\n    <div class="bp-media-settings-icon">'.concat(f.f,'</div>\n    <div class="bp-media-settings-value"></div>\n</div>'),Qi=function(){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Mi(Ri(n=function(e,t){return!t||"object"!==Ti(t)&&"function"!=typeof t?Ri(e):t}(this,Ai(i).call(this))),"containerEl",void 0),Mi(Ri(n),"settingsEl",void 0),Mi(Ri(n),"firstMenuItem",void 0),Mi(Ri(n),"settingsButtonEl",void 0),Mi(Ri(n),"ccButtonEl",void 0),Mi(Ri(n),"visible",!1),Mi(Ri(n),"subtitles",[]),Mi(Ri(n),"language",void 0),Mi(Ri(n),"toggleToSubtitle",void 0),Mi(Ri(n),"cache",void 0),n.containerEl=e,n.cache=t,n.handleTransitionEnd=n.handleTransitionEnd.bind(Ri(n)),n.blurHandler=n.blurHandler.bind(Ri(n)),n.menuEventHandler=n.menuEventHandler.bind(Ri(n)),Object(_.s)(n.containerEl,Xi,e.querySelector(".bp-media-controls-wrapper")),n.settingsEl=n.containerEl.querySelector(".bp-media-settings"),n.firstMenuItem=n.settingsEl.querySelectorAll(".bp-media-settings-item")[0],n.settingsButtonEl=n.containerEl.querySelector(".bp-media-gear-icon"),n.ccButtonEl=n.containerEl.querySelector(".bp-media-cc-icon"),Object(_.c)(n.settingsEl,n.menuEventHandler),n.containerEl.classList.add(zi),n.containerEl.classList.add(Ni),n.containerEl.classList.add(Ui),n.settingsEl.addEventListener("transitionend",n.handleTransitionEnd),v.a.isMobile()&&n.containerEl.classList.add("bp-media-settings-autoplay-unavailable"),n.init(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(i,D.a),function(e,t,n){t&&Hi(e.prototype,t),n&&Hi(e,n)}(i,[{key:"init",value:function(){var e=this.cache.get("media-speed")||"1.0",t=this.cache.get("media-autoplay")||"Disabled";this.chooseOption(Di,"sd",!1),this.chooseOption(Vi,e),this.chooseOption("autoplay",t)}},{key:"destroy",value:function(){this.settingsEl&&(Object(_.C)(this.settingsEl,this.menuEventHandler),this.settingsEl.removeEventListener("transitionend",this.handleTransitionEnd)),document.removeEventListener("click",this.blurHandler)}},{key:"reset",value:function(){this.settingsEl.className="bp-media-settings";var e=this.settingsEl.querySelector(".bp-media-settings-menu-main");this.setMenuContainerDimensions(e)}},{key:"getMediaSpeeds",value:function(){return Ki}},{key:"increaseSpeed",value:function(){var t=parseFloat(this.cache.get("media-speed")||"1.0"),e=Ki.filter(function(e){return parseFloat(e)>t});0<e.length&&this.chooseOption(Vi,e[0])}},{key:"decreaseSpeed",value:function(){var t=parseFloat(this.cache.get("media-speed")||"1.0"),e=Ki.filter(function(e){return parseFloat(e)<t});0<e.length&&this.chooseOption(Vi,e[e.length-1])}},{key:"setMenuContainerDimensions",value:function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height+18;this.settingsEl.style.height="".concat(i,"px");var r=210<=i?32:18;this.settingsEl.style.width="".concat(n+r,"px")}},{key:"findParentDataType",value:function(e){for(var t=e;t&&t!==this.settingsEl;){if("string"==typeof t.getAttribute("data-type"))return t;t=t.parentNode}return null}},{key:"showSubMenu",value:function(e){var t=this.settingsEl.querySelector(".bp-media-settings-menu-".concat(e));t.getAttribute("data-disabled")||(this.settingsEl.classList.add("bp-media-settings-show-".concat(e)),this.setMenuContainerDimensions(t),this.settingsEl.querySelector('[data-type="'.concat(e,'"]').concat(Wi,".").concat(Bi)).focus())}},{key:"menuItemSelect",value:function(e){var t=e.getAttribute("data-type"),n=e.getAttribute("data-value");this.settingsEl.classList.add("bp-media-settings-in-transition"),"menu"===t?(this.reset(),this.firstMenuItem.focus()):t&&n?this.chooseOption(t,n):t&&this.showSubMenu(t)}},{key:"menuEventHandler",value:function(e){var t=this.findParentDataType(e.target);if(t){if("click"===e.type)this.menuItemSelect(t);else if("keydown"===e.type){var n=Object(_.k)(e).toLowerCase(),i=t.parentElement,r=[].filter.call(i.children,function(e){return null!==e.offsetParent}),o=[].findIndex.call(r,function(e){return e.contains(t)});switch(n){case"space":case"enter":this.containerEl.classList.add(b.H),this.menuItemSelect(t);break;case"arrowup":if(this.containerEl.classList.add(b.H),0<o)r[o-1].focus();break;case"arrowdown":if(this.containerEl.classList.add(b.H),0<=o&&o<r.length-1)r[o+1].focus();break;case"arrowleft":0<=o&&!r[o].classList.contains("bp-media-settings-item")&&(this.reset(),this.firstMenuItem.focus());break;case"arrowright":if(0<=o){var a=r[o],s=a.getAttribute("data-type");a.classList.contains("bp-media-settings-item")&&"menu"!==s&&this.showSubMenu(s)}break;case"escape":this.hide(),this.settingsButtonEl.focus();break;default:return}e.preventDefault(),e.stopPropagation()}"keydown"===e.type&&(e.preventDefault(),e.stopPropagation())}}},{key:"handleTransitionEnd",value:function(){this.settingsEl.classList.remove("bp-media-settings-in-transition")}},{key:"getSelectedOption",value:function(e){return this.settingsEl.querySelector('[data-type="'.concat(e,'"]').concat(Wi,".").concat(Bi))}},{key:"chooseOption",value:function(e,t,n){2<arguments.length&&void 0!==n&&!n||this.cache.set("media-".concat(e),t,!0),this.emit(e);var i=this.settingsEl.querySelector('[data-type="'.concat(e,'"][data-value="').concat(t,'"]')),r=i.querySelector(Gi).textContent;this.settingsEl.querySelector('[data-type="'.concat(e,'"] ').concat(Gi)).textContent=r;var o=this.getSelectedOption(e);o&&(o.classList.remove(Bi),o.removeAttribute("aria-checked")),i.classList.add(Bi),i.setAttribute("aria-checked","true"),this.reset(),this.firstMenuItem.focus(),"subtitles"===e&&this.handleSubtitleSelection(o.getAttribute("data-value"),t)}},{key:"handleSubtitleSelection",value:function(e,t){"-1"===t?(e!==t&&(this.toggleToSubtitle=e),this.containerEl.classList.remove(qi),this.ccButtonEl.setAttribute("aria-pressed","false")):(this.containerEl.classList.add(qi),this.ccButtonEl.setAttribute("aria-pressed","true"))}},{key:"blurHandler",value:function(e){if(!this.settingsEl.contains(e.target)){var t=Object(_.k)(e);if("Escape"===t)return this.hide(),e.preventDefault(),void e.stopPropagation();this.settingsButtonEl.contains(e.target)||"click"!==e.type&&"Space"!==t&&"Enter"!==t||this.hide()}}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(){this.visible=!0,this.containerEl.classList.add(Fi),this.firstMenuItem.focus(),document.addEventListener("click",this.blurHandler,!0),document.addEventListener("keydown",this.blurHandler,!0)}},{key:"hide",value:function(){this.reset(),this.containerEl.classList.remove(Fi),this.visible=!1,document.removeEventListener("click",this.blurHandler,!0),document.removeEventListener("keydown",this.blurHandler,!0)}},{key:"areSubtitlesOn",value:function(){return"-1"!==this.getSelectedOption("subtitles").getAttribute("data-value")}},{key:"hasSubtitles",value:function(){return!!this.settingsEl.querySelector('[data-type="subtitles"][data-value="0"]'.concat(Wi))}},{key:"toggleSubtitles",value:function(){var t=this;if(this.areSubtitlesOn())this.chooseOption("subtitles","-1");else if(void 0!==this.toggleToSubtitle)this.chooseOption("subtitles",this.toggleToSubtitle.toString());else{var e=this.subtitles.findIndex(function(e){return e===t.language});-1===e&&-1===(e=this.subtitles.findIndex(function(e){return"English"===e}))&&(e=0),this.chooseOption("subtitles",e.toString())}}},{key:"loadSubtitles",value:function(e,t){var n=this.settingsEl.querySelector(".bp-media-settings-menu-subtitles");this.subtitles=e,this.language=t,this.subtitles.forEach(function(e,t){Object(_.s)(n,Zi.replace(/{{dataType}}/g,"subtitles").replace(/{{dataValue}}/g,t)),n.lastChild.querySelector(".bp-media-settings-value").textContent=e}),this.containerEl.classList.remove(zi);var i=this.cache.get("media-subtitles");null!==i&&"-1"!==i&&this.toggleSubtitles(),this.reset()}},{key:"loadAlternateAudio",value:function(e){var r=this.settingsEl.querySelector(".bp-media-settings-menu-audiotracks");e.forEach(function(e,t){Object(_.s)(r,Zi.replace(/{{dataType}}/g,"audiotracks").replace(/{{dataValue}}/g,t));var n=r.lastChild.querySelector(".bp-media-settings-value"),i="".concat("Track"," ").concat(t+1);"und"!==e&&(i="".concat(i," (").concat(e,")")),n.textContent=i}),this.chooseOption("audiotracks","0"),this.containerEl.classList.remove(Ni),this.reset()}},{key:"enableHD",value:function(){this.containerEl.classList.remove(Ui),this.containerEl.querySelector(".".concat("bp-media-settings-menu-quality")).setAttribute("data-disabled","");var e=this.cache.get("media-quality")||"auto";this.chooseOption(Di,e)}}]),i}();function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nr="bp-media-controls-is-visible",ir="bp-media-is-playing",rr="bp-media-controls-volume-scrubber-expand",or=["bp-media-volume-icon-is-mute","bp-media-volume-icon-is-low","bp-media-volume-icon-is-medium","bp-media-volume-icon-is-high"],ar=function(){function r(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=function(e,t){return!t||"object"!==Yi(t)&&"function"!=typeof t?er(e):t}(this,$i(r).call(this))).containerEl=e,i.mediaEl=t,i.cache=n,Object(_.s)(i.containerEl,'<div class="bp-media-controls-wrapper" data-testid="media-controls-wrapper">\n    <div class="bp-media-time-scrubber-container" tabindex="0"></div>\n    <div class="bp-media-controls-container">\n        <button class="bp-media-controls-btn bp-media-playpause-icon" type="button">\n            <svg class="bp-media-play-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M8 5v14l11-7z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n            <svg class="bp-media-pause-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n        </button>\n        <button class="bp-media-controls-btn bp-media-volume-icon bp-media-volume-icon-is-high" type="button">\n            <svg viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M0 14v6h4l5 5V9l-5 5H0z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-mute" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n                <path fill="#fff" d="M15.5 20.2l-2-2-2 2-1.2-1.2 2-2-2-2 1.2-1.2 2 2 2-2 1.2 1.2-2 2 2 2" />\n            </svg>\n            <svg class="bp-media-volume-icon-medium" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-high" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4zM11 8.2v2.1c2.9.9 5 3.5 5 6.7s-2.1 5.9-5 6.7v2.1c4-.9 7-4.5 7-8.8s-3-7.9-7-8.8z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n        </button>\n        <div class="bp-media-volume-scrubber-container-wrapper">\n            <div class="bp-media-volume-scrubber-container" tabindex="0"></div>\n        </div>\n        <label class="bp-media-controls-label bp-media-controls-timecode">00:00</label>\n        <span class="bp-media-controls-label">&nbsp;&#47;&nbsp;</span>\n        <label class="bp-media-controls-label bp-media-controls-duration">00:00</label>\n        <button class="bp-media-controls-btn bp-media-cc-icon" aria-pressed="false" type="button">\n            <div class="bp-media-controls-cc-icon-text">CC</div>\n        </button>\n        <button class="bp-media-controls-btn bp-media-gear-icon" aria-haspopup="true" type="button">\n            <svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <path fill="#fff" d="M19.4 13c0-.3.1-.6.1-1s0-.7-.1-1l2.1-1.6c.2-.1.2-.4.1-.6l-2-3.5c-.1-.2-.4-.3-.6-.2l-2.5 1c-.5-.4-1.1-.7-1.7-1l-.4-2.7c.1-.2-.2-.4-.4-.4h-4c-.2 0-.5.2-.5.4l-.4 2.7c-.6.2-1.1.6-1.7 1l-2.5-1c-.2-.1-.4 0-.6.2l-2 3.5c-.1.1 0 .4.2.6L4.6 11c0 .3-.1.6-.1 1s0 .7.1 1l-2.1 1.6c-.2.1-.2.4-.1.6l2 3.5c.1.2.3.3.6.2l2.5-1c.5.4 1.1.7 1.7 1l.4 2.6c0 .2.2.4.5.4h4c.2 0 .5-.2.5-.4l.4-2.6c.6-.2 1.2-.6 1.7-1l2.5 1c.2.1.5 0 .6-.2l2-3.5c.1-.2.1-.5-.1-.6L19.4 13zM12 15.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"/>\n            </svg>\n            <span class="bp-media-controls-hd">HD</span>\n        </button>\n        <button class="bp-media-controls-btn bp-media-fullscreen-icon" type="button">\n            <svg class="bp-enter-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n                    <path d="M0 0h24v24H0z" />\n                </g>\n            </svg>\n            <svg class="bp-exit-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M0 0h24v24H0z" />\n                    <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n                </g>\n            </svg>\n        </button>\n    </div>\n</div>\n'),i.wrapperEl=i.containerEl.querySelector(".bp-media-controls-wrapper"),i.timeScrubberEl=i.wrapperEl.querySelector(".bp-media-time-scrubber-container"),i.volScrubberEl=i.wrapperEl.querySelector(".bp-media-volume-scrubber-container"),i.volScrubberWrapperEl=i.wrapperEl.querySelector(".bp-media-volume-scrubber-container-wrapper"),i.playButtonEl=i.wrapperEl.querySelector(".bp-media-playpause-icon"),i.setLabel(i.playButtonEl,"Play"),i.volButtonEl=i.wrapperEl.querySelector(".bp-media-volume-icon"),i.setLabel(i.volButtonEl,"Mute"),i.timecodeEl=i.wrapperEl.querySelector(".bp-media-controls-timecode"),i.durationEl=i.wrapperEl.querySelector(".bp-media-controls-duration"),i.fullscreenButtonEl=i.wrapperEl.querySelector(".bp-media-fullscreen-icon"),i.setLabel(i.fullscreenButtonEl,"Enter fullscreen"),i.settingsButtonEl=i.wrapperEl.querySelector(".bp-media-gear-icon"),i.setLabel(i.settingsButtonEl,"Settings"),i.subtitlesButtonEl=i.wrapperEl.querySelector(".bp-media-cc-icon"),i.setLabel(i.subtitlesButtonEl,"Subtitles/Closed Captions"),i.mouseenterHandler=i.mouseenterHandler.bind(er(i)),i.mouseleaveHandler=i.mouseleaveHandler.bind(er(i)),i.scrubberExpand=i.scrubberExpand.bind(er(i)),i.scrubberHide=i.scrubberHide.bind(er(i)),i.scrubberMouseDownHandler=i.scrubberMouseDownHandler.bind(er(i)),i.scrubberMouseUpHandler=i.scrubberMouseUpHandler.bind(er(i)),i.togglePlay=i.togglePlay.bind(er(i)),i.toggleMute=i.toggleMute.bind(er(i)),i.toggleFullscreen=i.toggleFullscreen.bind(er(i)),i.toggleSettings=i.toggleSettings.bind(er(i)),i.toggleSubtitles=i.toggleSubtitles.bind(er(i)),i.setFilmstrip=i.setFilmstrip.bind(er(i)),i.filmstripShowHandler=i.filmstripShowHandler.bind(er(i)),i.filmstripHideHandler=i.filmstripHideHandler.bind(er(i)),i.timeScrubbingStopHandler=i.timeScrubbingStopHandler.bind(er(i)),i.handleRate=i.handleRate.bind(er(i)),i.handleQuality=i.handleQuality.bind(er(i)),i.handleAutoplay=i.handleAutoplay.bind(er(i)),i.handleSubtitle=i.handleSubtitle.bind(er(i)),i.handleAudioTrack=i.handleAudioTrack.bind(er(i)),i.handleFullscreenEnter=i.handleFullscreenEnter.bind(er(i)),i.handleFullscreenExit=i.handleFullscreenExit.bind(er(i)),i.timeScrubberHandler=i.timeScrubberHandler.bind(er(i)),i.setDuration(i.mediaEl.duration),i.setupSettings(),i.setupScrubbers(),i.attachEventHandlers(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(r,D.a),function(e,t,n){t&&Ji(e.prototype,t),n&&Ji(e,n)}(r,[{key:"destroy",value:function(){this.removeAllListeners(),document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),this.volButtonEl&&this.volScrubberWrapperEl&&this.removeVolumeScrubberWrapperExpansionHandlers(),this.timeScrubberEl&&(this.timeScrubberEl.removeEventListener("mousemove",this.timeScrubberElShowHandler),this.timeScrubberEl.removeEventListener("mouseleave",this.filmstripHideHandler)),this.timeScrubber&&(this.timeScrubber.getHandleEl().removeEventListener("mousedown",this.timeScrubbingStartHandler),this.timeScrubber.destroy(),this.timeScrubber=void 0),this.volScrubber&&(this.volScrubber.destroy(),this.volScrubber=void 0),this.settings&&(this.settings.removeListener("quality",this.handleQuality),this.settings.removeListener("speed",this.handleRate),this.settings.removeListener("subtitles",this.handleSubtitle),this.settings.removeListener("autoplay",this.handleAutoplay),this.settings.destroy(),this.settings=void 0),this.playButtonEl&&Object(_.C)(this.playButtonEl,this.togglePlayHandler),this.volButtonEl&&Object(_.C)(this.volButtonEl,this.toggleMuteHandler),this.fullscreenButtonEl&&Object(_.C)(this.fullscreenButtonEl,this.toggleFullscreenHandler),this.settingsButtonEl&&Object(_.C)(this.settingsButtonEl,this.toggleSettingsHandler),this.subtitlesButtonEl&&Object(_.C)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),this.wrapperEl&&(this.wrapperEl.removeEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.removeEventListener("mouseleave",this.mouseleaveHandler)),B.a&&B.a.removeAllListeners(),this.wrapperEl=void 0,this.timeScrubberEl=void 0,this.volScrubberEl=void 0,this.playButtonEl=void 0,this.volButtonEl=void 0,this.timecodeEl=void 0,this.durationEl=void 0,this.fullscreenButtonEl=void 0,this.settingsButtonEl=void 0,this.filmstripContainerEl=void 0,this.filmstripEl=void 0,this.filmstripTimeEl=void 0,this.timeScrubberElShowHandler=void 0}},{key:"handleRate",value:function(){this.emit("ratechange")}},{key:"handleQuality",value:function(){this.emit("qualitychange")}},{key:"handleSubtitle",value:function(){this.emit("subtitlechange")}},{key:"handleAudioTrack",value:function(){this.emit("audiochange")}},{key:"handleAutoplay",value:function(){this.emit("autoplaychange")}},{key:"handleFullscreenEnter",value:function(){this.setLabel(this.fullscreenButtonEl,"Exit fullscreen"),this.containerEl.classList.add("bp-is-fullscreen")}},{key:"handleFullscreenExit",value:function(){this.setLabel(this.fullscreenButtonEl,"Enter fullscreen"),this.containerEl.classList.remove("bp-is-fullscreen")}},{key:"setupSettings",value:function(){this.settings=new Qi(this.containerEl,this.cache),this.settings.addListener("quality",this.handleQuality),this.settings.addListener("speed",this.handleRate),this.settings.addListener("autoplay",this.handleAutoplay)}},{key:"getTimeFromScrubber",value:function(){return this.timeScrubber.getValue()*this.mediaEl.duration}},{key:"setupScrubbers",value:function(){var e=this;this.timeScrubber=new ji(this.timeScrubberEl,"Media Slider",0,Math.floor(this.mediaEl.duration),0,0,1),this.setTimeCode(this.mediaEl.currentTime||0),this.timeScrubber.on("valuechange",function(){e.emit("timeupdate",e.getTimeFromScrubber())}),this.volScrubber=new ji(this.volScrubberEl,"Volume Slider",0,100,1,1,1),this.volScrubber.setAriaValues(100,"100% Volume"),this.volScrubber.on("valuechange",function(){e.emit("volumeupdate",e.volScrubber.getValue())})}},{key:"formatTime",value:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60),r=0<t?"".concat(t.toString(),":"):"",o=i<10?"0".concat(i.toString()):i.toString(),a=n.toString();return 0<t&&n<10&&(a="0".concat(a)),"".concat(r).concat(a,":").concat(o)}},{key:"setDuration",value:function(e){this.durationEl.textContent=this.formatTime(e||0)}},{key:"setTimeCode",value:function(e){var t=this.mediaEl.duration;this.timeScrubber.setValue(t?(e||0)/t:0),this.timecodeEl.textContent=this.formatTime(e||0),this.timeScrubber.setAriaValues(Math.floor(e),"".concat(this.timecodeEl.textContent," ").concat("of"," ").concat(this.durationEl.textContent))}},{key:"updateProgress",value:function(){var e=this.mediaEl.buffered,t=this.mediaEl.duration||1,n=e.length,i=n?e.end(n-1):0;this.timeScrubber.setBufferedValue(i/t)}},{key:"toggleMute",value:function(){this.show(),this.emit("togglemute")}},{key:"togglePlay",value:function(){this.show(),this.emit("toggleplayback")}},{key:"toggleFullscreen",value:function(){this.show(),this.emit("togglefullscreen")}},{key:"toggleSettings",value:function(){this.show(),this.isSettingsVisible()?this.settings.hide():this.settings.show()}},{key:"toggleSubtitles",value:function(){this.show(),this.settings.toggleSubtitles(),this.emit("togglesubtitles")}},{key:"setLabel",value:function(e,t){e.setAttribute("aria-label",t),e.setAttribute("title",t)}},{key:"isSettingsVisible",value:function(){return!!this.settings&&this.settings.isVisible()}},{key:"showPauseIcon",value:function(){this.wrapperEl.classList.add(ir),this.setLabel(this.playButtonEl,"Pause")}},{key:"showPlayIcon",value:function(){this.wrapperEl.classList.remove(ir),this.setLabel(this.playButtonEl,"Play")}},{key:"updateVolumeIcon",value:function(e){var t=this;or.forEach(function(e){t.volButtonEl.classList.remove(e)}),this.volButtonEl.classList.add(or[Math.ceil(3*e)]),this.volScrubber.setValue(e);var n=Math.floor(100*e);this.volScrubber.setAriaValues(n,"".concat(n,"% ").concat("Volume"));var i=0===Math.ceil(3*e)?"Unmute":"Mute";this.setLabel(this.volButtonEl,i)}},{key:"increaseSpeed",value:function(){this.settings.increaseSpeed()}},{key:"decreaseSpeed",value:function(){this.settings.decreaseSpeed()}},{key:"scrubberMouseUpHandler",value:function(){this.volScrubbing=!1,this.volScrubberWrapperEl.classList.remove(rr),document.removeEventListener("mouseup",this.scrubberMouseUpHandler),document.removeEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberMouseDownHandler",value:function(){this.volScrubbing=!0,document.addEventListener("mouseup",this.scrubberMouseUpHandler),document.addEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberExpand",value:function(){this.volScrubberWrapperEl.classList.add(rr)}},{key:"scrubberHide",value:function(){this.volScrubbing||this.volScrubberWrapperEl.classList.remove(rr)}},{key:"attachVolumeScrubberWrapperExpansionHandlers",value:function(){this.volScrubbing=!1,this.volButtonEl.addEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.addEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.addEventListener("focus",this.scrubberExpand),this.volScrubberEl.addEventListener("blur",this.scrubberHide)}},{key:"removeVolumeScrubberWrapperExpansionHandlers",value:function(){this.volButtonEl.removeEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.removeEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.removeEventListener("focus",this.scrubberExpand),this.volScrubberEl.removeEventListener("blur",this.scrubberHide)}},{key:"attachEventHandlers",value:function(){this.wrapperEl.addEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.addEventListener("mouseleave",this.mouseleaveHandler),this.attachVolumeScrubberWrapperExpansionHandlers(),this.togglePlayHandler=Object(_.b)(this.togglePlay),this.toggleMuteHandler=Object(_.b)(this.toggleMute),this.toggleFullscreenHandler=Object(_.b)(this.toggleFullscreen),this.toggleSettingsHandler=Object(_.b)(this.toggleSettings),this.toggleSubtitlesHandler=Object(_.b)(this.toggleSubtitles),Object(_.c)(this.playButtonEl,this.togglePlayHandler),Object(_.c)(this.volButtonEl,this.toggleMuteHandler),Object(_.c)(this.fullscreenButtonEl,this.toggleFullscreenHandler),Object(_.c)(this.settingsButtonEl,this.toggleSettingsHandler),Object(_.c)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),B.a.addListener("enter",this.handleFullscreenEnter),B.a.addListener("exit",this.handleFullscreenExit)}},{key:"mouseenterHandler",value:function(){this.preventHiding=!0,this.show()}},{key:"mouseleaveHandler",value:function(){this.preventHiding=!1,this.show()}},{key:"show",value:function(){var e=this;this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.add(nr),clearTimeout(this.autoHideTimeout),this.autoHideTimeout=setTimeout(function(){e.hide()},2e3))}},{key:"hide",value:function(){this.preventHiding||this.isSettingsVisible()?this.show():this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.remove(nr),this.filmstripHideHandler())}},{key:"toggle",value:function(){this.isVisible()?(this.preventHiding=!1,this.settings.hide(),this.hide()):this.show()}},{key:"isVisible",value:function(){return this.wrapperEl.parentNode.classList.contains(nr)}},{key:"resizeTimeScrubber",value:function(){this.timeScrubber&&this.timeScrubber.resize(32)}},{key:"setFilmstrip",value:function(){this.filmstripEl&&(this.filmstripEl.src=this.filmstripUrl)}},{key:"initFilmstrip",value:function(e,t,n,i){var r=this;this.filmstripUrl=e,this.filmstripInterval=i,this.timeScrubberElShowHandler=this.timeScrubberHandler(this.filmstripShowHandler),this.filmstripContainerEl=this.containerEl.appendChild(document.createElement("div")),this.filmstripContainerEl.className="bp-media-filmstrip-container",this.filmstripContainerEl.innerHTML='<div class="bp-media-crawler-wrapper"><div class="bp-crawler"><div></div><div></div><div></div></div></div>',this.filmstripEl=this.filmstripContainerEl.appendChild(document.createElement("img")),this.filmstripEl.className="bp-media-filmstrip",this.filmstripTimeEl=this.filmstripContainerEl.appendChild(document.createElement("div")),this.filmstripTimeEl.className="bp-media-filmstrip-timecode";var o=90*n;this.timeScrubber.getHandleEl().addEventListener("mousedown",this.timeScrubbingStartHandler),this.hasTouch&&this.timeScrubberEl.addEventListener("touchstart",this.timeScrubbingStartHandler),this.timeScrubberEl.addEventListener("mousemove",this.timeScrubberElShowHandler),this.timeScrubberEl.addEventListener("mouseleave",this.filmstripHideHandler),this.filmstripEl.onload=function(){r.filmstripContainerEl&&(r.filmstripContainerEl.style.width="".concat(2+o,"px"),r.filmstripContainerEl.querySelector(".bp-media-crawler-wrapper").style.display="none")},t.getPromise().then(this.setFilmstrip)}},{key:"timeScrubberHandler",value:function(r){var o=this;return function(e){var t=e.target,n=o.timeScrubber,i=n.playedEl;t!==n.convertedEl&&t!==i||r(e)}}},{key:"timeScrubbingStartHandler",value:function(){this.isScrubbing=!0,this.preventHiding=!0,document.addEventListener("mouseup",this.timeScrubbingStopHandler),this.hasTouch&&document.addEventListener("touchend",this.timeScrubbingStopHandler),document.addEventListener("mousemove",this.filmstripShowHandler),this.hasTouch&&document.addEventListener("touchmove",this.show)}},{key:"timeScrubbingStopHandler",value:function(e){this.isScrubbing=!1,this.preventHiding=!1,document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),document.removeEventListener("touchend",this.timeScrubbingStopHandler),document.removeEventListener("touchmove",this.show),this.timeScrubberEl.contains(e.target)||(this.filmstripContainerEl.style.display="none")}},{key:"computeFilmstripPositions",value:function(e,t,n,i){var r=this.timeScrubber.computeScrubberPosition(e)*this.mediaEl.duration,o=Math.floor(r/this.filmstripInterval),a=i/100,s=o%100*-1*a,l=-90*Math.floor(o/100);i||(l=s=0,a=160);var c=Math.max(0,e-t-a/2);return{time:r,left:s,top:l,containerLeft:Math.min(c,n-a)}}},{key:"filmstripShowHandler",value:function(e){if(!this.isSettingsVisible()){var t=this.containerEl.getBoundingClientRect(),n=e.pageX,i=this.computeFilmstripPositions(n,t.left,t.width,this.filmstripEl.naturalWidth);this.filmstripEl.style.left="".concat(i.left,"px"),this.filmstripEl.style.top="".concat(i.top,"px"),this.filmstripContainerEl.style.display="block",this.filmstripContainerEl.style.left="".concat(i.containerLeft,"px"),this.filmstripTimeEl.textContent=this.formatTime(i.time)}}},{key:"filmstripHideHandler",value:function(){!this.isScrubbing&&this.filmstripEl&&(this.filmstripContainerEl.style.display="none")}},{key:"isTimeScrubberFocused",value:function(){return document.activeElement===this.timeScrubberEl}},{key:"isVolumeScrubberFocused",value:function(){return document.activeElement===this.volScrubberEl}},{key:"initSubtitles",value:function(e,t){this.settings.addListener("subtitles",this.handleSubtitle),this.settings.loadSubtitles(e,t)}},{key:"initAlternateAudio",value:function(e){this.settings.addListener("audiotracks",this.handleAudioTrack),this.settings.loadAlternateAudio(e)}},{key:"enableHDSettings",value:function(){this.settings.enableHD()}}]),r}(),sr=n(5);function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e,t,n){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dr(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vr="media-volume",br="play_promise_not_supported",mr=function(){function i(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),pr(ur(n=function(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?ur(e):t}(this,dr(i).call(this,e))),"metrics",(pr(t={},y.e.bufferFill,0),pr(t,y.e.duration,0),pr(t,y.e.lagRatio,0),pr(t,y.e.seeked,!1),pr(t,y.e.totalBufferLag,0),pr(t,y.e.watchLength,0),t)),pr(ur(n),"handleAutoplayFail",function(){}),pr(ur(n),"debouncedEmit",Oi()(function(e,t){n.emit(e,t)},100)),n.containerClickHandler=n.containerClickHandler.bind(ur(n)),n.errorHandler=n.errorHandler.bind(ur(n)),n.handleAutoplay=n.handleAutoplay.bind(ur(n)),n.handleRate=n.handleRate.bind(ur(n)),n.handleTimeupdateFromMediaControls=n.handleTimeupdateFromMediaControls.bind(ur(n)),n.loadeddataHandler=n.loadeddataHandler.bind(ur(n)),n.mediaendHandler=n.mediaendHandler.bind(ur(n)),n.pauseHandler=n.pauseHandler.bind(ur(n)),n.playingHandler=n.playingHandler.bind(ur(n)),n.processBufferFillMetric=n.processBufferFillMetric.bind(ur(n)),n.processMetrics=n.processMetrics.bind(ur(n)),n.progressHandler=n.progressHandler.bind(ur(n)),n.resetPlayIcon=n.resetPlayIcon.bind(ur(n)),n.seekHandler=n.seekHandler.bind(ur(n)),n.setTimeCode=n.setTimeCode.bind(ur(n)),n.setVolume=n.setVolume.bind(ur(n)),n.handleLoadStart=n.handleLoadStart.bind(ur(n)),n.handleCanPlay=n.handleCanPlay.bind(ur(n)),n.toggleMute=n.toggleMute.bind(ur(n)),n.togglePlay=n.togglePlay.bind(ur(n)),n.updateVolumeIcon=n.updateVolumeIcon.bind(ur(n)),window.addEventListener("beforeunload",n.processMetrics),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(i,d["a"]),function(e,t,n){t&&cr(e.prototype,t),n&&cr(e,n)}(i,[{key:"setup",value:function(){this.isSetup||(hr(dr(i.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className="bp-media",this.mediaContainerEl=this.wrapperEl.appendChild(document.createElement("div")),this.mediaContainerEl.setAttribute("tabindex","-1"),this.mediaContainerEl.className="bp-media-container",this.mediaContainerEl.addEventListener("click",this.containerClickHandler),this.loadTimeout=1e5,this.oldVolume=1,this.pauseListener=null,this.startTimeInSeconds=this.getStartTimeInSeconds(this.startAt))}},{key:"getStartTimeInSeconds",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=0,i=Object(_.q)(t,"value"),r=Object(_.q)(t,"unit");if(!i||!r)return 0;if("seconds"===r){if(n=parseFloat(i,10),Number.isNaN(n)||n<0)return 0}else"timestamp"===r&&(n=this.convertTimestampToSeconds(i));return n}},{key:"destroy",value:function(){this.processMetrics(),window.removeEventListener("beforeunload",this.processMetrics),this.mediaControls&&(this.mediaControls.removeAllListeners(),this.mediaControls.destroy());try{this.mediaEl&&(this.removeEventListenersForMediaElement(),this.removePauseEventListener(),this.mediaEl.removeAttribute("src"),this.mediaEl.load()),this.mediaContainerEl&&(this.mediaContainerEl.removeChild(this.mediaEl),this.mediaContainerEl.removeEventListener("click",this.containerClickHandler))}catch(e){}hr(dr(i.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;hr(dr(i.prototype),"load",this).call(this),this.addEventListenersForMediaLoad();var t=this.options.representation.content.url_template;return this.mediaUrl=this.createContentUrlWithAuthParams(t),this.mediaEl.addEventListener("error",this.errorHandler),this.mediaEl.setAttribute("title",this.options.file.name),v.a.isIOS()&&(this.mediaEl.autoplay=!0),this.getRepStatus().getPromise().then(function(){e.startLoadTimer(),e.mediaEl.src=e.mediaUrl}).catch(this.handleAssetError)}},{key:"addEventListenersForMediaLoad",value:function(){this.mediaEl.addEventListener("canplay",this.handleCanPlay),this.mediaEl.addEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.addEventListener("loadstart",this.handleLoadStart)}},{key:"containerClickHandler",value:function(){this.mediaContainerEl.classList.remove(b.H)}},{key:"loadeddataHandler",value:function(){this.destroyed||(this.loadUI(),this.isAutoplayEnabled()&&this.autoplay(),this.setMediaTime(this.startTimeInSeconds),this.resize(),this.handleVolume(),this.loaded=!0,this.emit(y.n.load),this.showMedia(),this.options.autoFocus&&this.mediaContainerEl.focus())}},{key:"showMedia",value:function(){this.wrapperEl.classList.add(b.R)}},{key:"errorHandler",value:function(e){var t=Object(_.q)(e,"target.error.code"),n=t?{error_code:t}:{},i=new m.a(y.c.LOAD_MEDIA,"We’re sorry, the preview didn’t load. Please refresh the page.",n);this.isLoaded()?this.triggerError(i):this.handleDownloadError(i,this.mediaUrl)}},{key:"handleRate",value:function(){var e=this.cache.get("media-speed")-0;e&&this.mediaEl.playbackRate!==e&&0<this.mediaEl.playbackRate&&this.emit("ratechange",e),this.mediaEl.playbackRate=e}},{key:"handleVolume",value:function(){var e=this.cache.has(vr)?this.cache.get(vr):1;0!==e&&(this.oldVolume=e),this.mediaEl.volume!==e&&(this.debouncedEmit("volume",e),this.mediaEl.volume=e)}},{key:"handleAutoplay",value:function(){this.emit("autoplay",this.isAutoplayEnabled())}},{key:"autoplay",value:function(){var t=this;return this.play().catch(function(e){e.message===br?t.mediaEl.autoplay=!0:t.handleAutoplayFail()})}},{key:"isAutoplayEnabled",value:function(){return"Enabled"===this.cache.get("media-autoplay")}},{key:"loadUI",value:function(){this.mediaControls=new ar(this.mediaContainerEl,this.mediaEl,this.cache),this.addEventListenersForMediaControls(),this.addEventListenersForMediaElement()}},{key:"handleTimeupdateFromMediaControls",value:function(e){this.removePauseEventListener(),this.setMediaTime(e)}},{key:"addEventListenersForMediaControls",value:function(){this.mediaControls.addListener("timeupdate",this.handleTimeupdateFromMediaControls),this.mediaControls.addListener("volumeupdate",this.setVolume),this.mediaControls.addListener("toggleplayback",this.togglePlay),this.mediaControls.addListener("togglemute",this.toggleMute),this.mediaControls.addListener("ratechange",this.handleRate),this.mediaControls.addListener("autoplaychange",this.handleAutoplay)}},{key:"setTimeCode",value:function(){this.mediaControls.setTimeCode(this.mediaEl.currentTime)}},{key:"setMediaTime",value:function(e){this.mediaEl&&0<=e&&e<=this.mediaEl.duration&&(this.mediaEl.currentTime=e)}},{key:"setVolume",value:function(e){this.cache.set(vr,e,!0),this.handleVolume()}},{key:"updateVolumeIcon",value:function(){this.mediaControls.updateVolumeIcon(this.mediaEl.volume)}},{key:"playingHandler",value:function(){this.mediaControls.showPauseIcon(),this.hideLoadingIcon(),this.handleRate(),this.handleVolume(),this.emit("play")}},{key:"progressHandler",value:function(){this.mediaControls.updateProgress()}},{key:"pauseHandler",value:function(){this.mediaControls.showPlayIcon()}},{key:"seekHandler",value:function(){this.hideLoadingIcon(),this.metrics[y.e.seeked]=!0,this.debouncedEmit("seeked",this.mediaEl.currentTime)}},{key:"mediaendHandler",value:function(){this.resetPlayIcon(),this.processMetrics(),this.isAutoplayEnabled()&&this.emit(y.n.mediaEndAutoplay)}},{key:"processMetrics",value:function(){}},{key:"showPlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.remove(b.K)}},{key:"hidePlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.add(b.K)}},{key:"resetPlayIcon",value:function(){this.mediaControls.setTimeCode(0),this.hideLoadingIcon(),this.pauseHandler()}},{key:"removePauseEventListener",value:function(){this.mediaEl&&this.pauseListener&&this.mediaEl.removeEventListener("timeupdate",this.pauseListener)}},{key:"isValidTime",value:function(e){return"number"==typeof e&&0<=e&&e<=this.mediaEl.duration}},{key:"play",value:function(e,t){var n=this.isValidTime(e),i=this.isValidTime(t);if(this.removePauseEventListener(),n&&(i&&e<t&&this.pause(t),this.setMediaTime(e)),0===arguments.length||n){var r=this.mediaEl.play();return this.handleRate(),this.handleVolume(),r&&"function"==typeof r.then?r:Promise.reject(new Error(br))}return Promise.resolve()}},{key:"pause",value:function(e,t){var n=this,i=1<arguments.length&&void 0!==t&&t,r=this.isValidTime(e);this.removePauseEventListener(),r?(this.pauseListener=function(){n.mediaEl.currentTime>e&&n.pause()},this.mediaEl.addEventListener("timeupdate",this.pauseListener)):(this.mediaEl.pause(),this.emit("pause",{userInitiated:i}))}},{key:"togglePlay",value:function(){this.mediaEl.paused?this.play():this.pause(void 0,!0)}},{key:"toggleMute",value:function(){this.mediaEl.volume?(this.oldVolume=this.mediaEl.volume,this.cache.set(vr,0,!0)):this.cache.set(vr,this.oldVolume,!0),this.handleVolume()}},{key:"hideLoadingIcon",value:function(){this.containerEl&&this.containerEl.classList.remove(b.M)}},{key:"showLoadingIcon",value:function(){this.containerEl&&this.mediaEl&&!this.mediaEl.paused&&!this.mediaEl.ended&&(this.containerEl.classList.add(b.M),this.hidePlayButton())}},{key:"addEventListenersForMediaElement",value:function(){this.mediaEl.addEventListener("ended",this.mediaendHandler),this.mediaEl.addEventListener("pause",this.pauseHandler),this.mediaEl.addEventListener("playing",this.playingHandler),this.mediaEl.addEventListener("progress",this.progressHandler),this.mediaEl.addEventListener("seeked",this.seekHandler),this.mediaEl.addEventListener("timeupdate",this.setTimeCode),this.mediaEl.addEventListener("volumechange",this.updateVolumeIcon)}},{key:"removeEventListenersForMediaElement",value:function(){this.mediaEl.removeEventListener("canplay",this.handleCanPlay),this.mediaEl.removeEventListener("ended",this.mediaendHandler),this.mediaEl.removeEventListener("error",this.errorHandler),this.mediaEl.removeEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.removeEventListener("loadstart",this.handleLoadStart),this.mediaEl.removeEventListener("pause",this.pauseHandler),this.mediaEl.removeEventListener("playing",this.playingHandler),this.mediaEl.removeEventListener("progress",this.progressHandler),this.mediaEl.removeEventListener("seeked",this.seekHandler),this.mediaEl.removeEventListener("timeupdate",this.setTimeCode),this.mediaEl.removeEventListener("volumechange",this.updateVolumeIcon)}},{key:"handleLoadStart",value:function(){var e=this.createTimerTag(y.e.bufferFill);sr.a.start(e)}},{key:"handleCanPlay",value:function(){var e=this.createTimerTag(y.e.bufferFill);sr.a.stop(e),this.mediaEl.removeEventListener("canplay",this.handleCanPlay),this.processBufferFillMetric()}},{key:"processBufferFillMetric",value:function(){}},{key:"quickSeek",value:function(e){var t=this.mediaEl.currentTime+e;this.removePauseEventListener(),t=Math.max(0,Math.min(t,this.mediaEl.duration)),this.setMediaTime(t)}},{key:"increaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume+.05))/100;e=Math.min(1,e),this.setVolume(e)}},{key:"decreaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume-.05))/100;e=Math.max(0,e),this.setVolume(e)}},{key:"onKeydown",value:function(e){if(!this.mediaControls)return!1;switch(e.toLowerCase()){case"tab":case"shift+tab":return this.mediaContainerEl.classList.add(b.H),this.mediaControls.show(),!1;case"space":case"k":this.togglePlay();break;case"arrowleft":this.mediaControls.isVolumeScrubberFocused()?this.decreaseVolume():this.quickSeek(-5);break;case"j":this.quickSeek(-10);break;case"arrowright":this.mediaControls.isVolumeScrubberFocused()?this.increaseVolume():this.quickSeek(5);break;case"l":this.quickSeek(10);break;case"0":case"home":this.setMediaTime(0);break;case"arrowup":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(5):this.increaseVolume();break;case"arrowdown":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(-5):this.decreaseVolume();break;case"shift+>":this.mediaControls.increaseSpeed();break;case"shift+<":this.mediaControls.decreaseSpeed();break;case"f":case"shift+f":this.mediaControls.toggleFullscreen();break;case"m":case"shift+m":this.toggleMute();break;case"c":case"shift+c":this.mediaControls.toggleSubtitles();break;default:return!1}return this.mediaControls.show(),!0}},{key:"convertTimestampToSeconds",value:function(e){var t=0;if(!e||!/^([0-9]+(\.[0-9]*)?[smh]?){1,3}$/.test(e))return t;function n(e){var t=parseFloat(e[0].slice(0,-1),10);return Number.isNaN(t)?0:t}var i=/[0-9]+(\.[0-9]*)?h/.exec(e),r=/[0-9]+(\.[0-9]*)?m/.exec(e),o=/[0-9]+(\.[0-9]*)?s/.exec(e);return i&&(t+=3600*n(i)),r&&(t+=60*n(r)),o&&(t+=n(o)),t}},{key:"getMetricsWhitelist",value:function(){return[y.f.bufferFill,y.f.endPlayback]}},{key:"createTimerTag",value:function(e){return sr.a.createTag(this.options.file.id,e)}}]),i}();n(245);function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e,t,n){return(Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kr(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e,t){return(Or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sr=function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wr(t=function(e,t){return!t||"object"!==yr(t)&&"function"!=typeof t?wr(e):t}(this,(e=kr(o)).call.apply(e,[this].concat(i)))),"handleAutoplayFail",function(){t.pause()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Or(e,t)}(o,mr),function(e,t,n){t&&gr(e.prototype,t),n&&gr(e,n)}(o,[{key:"setup",value:function(){this.isSetup||(Er(kr(o.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp3"),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("audio")),this.mediaEl.setAttribute("preload","auto"))}},{key:"loadUI",value:function(){Er(kr(o.prototype),"loadUI",this).call(this),this.mediaControls.show(),this.mediaControls.resizeTimeScrubber()}}]),o}();function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t,n){return(Cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_r(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tr=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xr(t=function(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?xr(e):t}(this,_r(n).call(this,e))),"handleAutoplayFail",function(){t.setVolume(0),t.play().catch(t.pause)}),t.loadeddataHandler=t.loadeddataHandler.bind(xr(t)),t.pointerHandler=t.pointerHandler.bind(xr(t)),t.waitingHandler=t.waitingHandler.bind(xr(t)),t.playingHandler=t.playingHandler.bind(xr(t)),t.pauseHandler=t.pauseHandler.bind(xr(t)),t.resize=t.resize.bind(xr(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}(n,mr),function(e,t,n){t&&Lr(e.prototype,t),n&&Lr(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(Cr(_r(n.prototype),"setup",this).call(this),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("video")),this.mediaEl.setAttribute("preload","auto"),this.mediaEl.setAttribute("playsinline",""),this.playButtonEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.playButtonEl.classList.add("bp-media-play-button"),this.playButtonEl.classList.add(b.K),this.playButtonEl.innerHTML=f.q,this.lowerLights())}},{key:"destroy",value:function(){this.mediaEl&&(this.mediaEl.removeEventListener("mousemove",this.mousemoveHandler),this.mediaEl.removeEventListener("click",this.pointerHandler),this.mediaEl.removeEventListener("touchstart",this.pointerHandler),this.mediaEl.removeEventListener("waiting",this.waitingHandler)),this.playButtonEl&&this.playButtonEl.removeEventListener("click",this.togglePlay),Cr(_r(n.prototype),"destroy",this).call(this)}},{key:"loadeddataHandler",value:function(){Cr(_r(n.prototype),"loadeddataHandler",this).call(this),this.showPlayButton(),this.mediaControls.show()}},{key:"loadUI",value:function(){Cr(_r(n.prototype),"loadUI",this).call(this)}},{key:"pointerHandler",value:function(e){"touchstart"===e.type?(e.preventDefault(),e.stopPropagation(),this.mediaControls.toggle()):"click"===e.type&&this.togglePlay()}},{key:"playingHandler",value:function(){Cr(_r(n.prototype),"playingHandler",this).call(this),this.hidePlayButton()}},{key:"pauseHandler",value:function(){Cr(_r(n.prototype),"pauseHandler",this).call(this),this.showPlayButton(),this.hideLoadingIcon()}},{key:"waitingHandler",value:function(){this.containerEl&&(this.containerEl.classList.add(b.M),this.hidePlayButton())}},{key:"addEventListenersForMediaControls",value:function(){var e=this;Cr(_r(n.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.on("togglefullscreen",function(){e.toggleFullscreen()})}},{key:"addEventListenersForMediaElement",value:function(){var e=this;Cr(_r(n.prototype),"addEventListenersForMediaElement",this).call(this),this.mousemoveHandler=o()(function(){e.mediaControls.show()},1e3),this.mediaEl.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&this.mediaEl.addEventListener("touchstart",this.pointerHandler),this.mediaEl.addEventListener("click",this.pointerHandler),this.mediaEl.addEventListener("waiting",this.waitingHandler),this.playButtonEl.addEventListener("click",this.togglePlay)}},{key:"showLoadingIcon",value:function(){Cr(_r(n.prototype),"showLoadingIcon",this).call(this)}},{key:"resize",value:function(){this.mediaControls&&this.mediaControls.resizeTimeScrubber(),Cr(_r(n.prototype),"resize",this).call(this)}},{key:"allowNavigationArrows",value:function(){return!this.mediaControls||!this.mediaControls.isSettingsVisible()}},{key:"lowerLights",value:function(){this.rootEl&&this.rootEl.classList.add(b.G)}},{key:"onKeydown",value:function(e){return Cr(_r(n.prototype),"onKeydown",this).call(this,e)}}]),n}();n(246);function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rr(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ir(e,t,n){return(Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mr(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dr=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rr(this,Mr(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(e,Tr),function(e,t,n){t&&Ar(e.prototype,t),n&&Ar(e,n)}(e,[{key:"setup",value:function(){this.isSetup||(Ir(Mr(e.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp4"))}}]),e}(),Br={af:"Afrikaans",afr:"Afrikaans",alb:"Albanian",sq:"Albanian",sqi:"Albanian",ar:"Arabic",ara:"Arabic",arm:"Armenian",hy:"Armenian",hye:"Armenian",be:"Belarusian",bel:"Belarusian",ben:"Bengali",bn:"Bengali",bos:"Bosnian",bs:"Bosnian",bg:"Bulgarian",bul:"Bulgarian",bur:"Burmese",my:"Burmese",mya:"Burmese",ca:"Catalan",cat:"Catalan",khm:"Central Khmer",km:"Central Khmer",chi:"Chinese",zh:"Chinese",zho:"Chinese",hr:"Croatian",hrv:"Croatian",ces:"Czech",cs:"Czech",cze:"Czech",da:"Danish",dan:"Danish",dut:"Dutch",nl:"Dutch",nld:"Dutch",en:"English",eng:"English",est:"Estonian",et:"Estonian",fil:"Filipino",fi:"Finnish",fin:"Finnish",fr:"French",fra:"French",fre:"French",gl:"Galician",glg:"Galician",lg:"Ganda",lug:"Ganda",geo:"Georgian",ka:"Georgian",kat:"Georgian",de:"German",deu:"German",ger:"German",hat:"Haitian Creole",ht:"Haitian Creole",he:"Hebrew",heb:"Hebrew",hi:"Hindi",hin:"Hindi",hmn:"Hmong",hu:"Hungarian",hun:"Hungarian",ice:"Icelandic",is:"Icelandic",isl:"Icelandic",id:"Indonesian",ind:"Indonesian",ga:"Irish",gle:"Irish",it:"Italian",ita:"Italian",ja:"Japanese",jpn:"Japanese",kaz:"Kazakh",kk:"Kazakh",ko:"Korean",kor:"Korean",ku:"Kurdish",kur:"Kurdish",lao:"Lao",lo:"Lao",lav:"Latvian",lv:"Latvian",lit:"Lithuanian",lt:"Lithuanian",lb:"Luxembourgish",ltz:"Luxembourgish",may:"Malay",ms:"Malay",msa:"Malay",el:"Greek",ell:"Greek",gre:"Greek",mn:"Mongolian",mon:"Mongolian",no:"Norwegian",nor:"Norwegian",fa:"Persian",fas:"Persian",per:"Persian",pl:"Polish",pol:"Polish",por:"Portuguese",pt:"Portuguese",ro:"Romanian",ron:"Romanian",rum:"Romanian",ru:"Russian",rus:"Russian",scc:"Serbian",sr:"Serbian",srp:"Serbian",ii:"Sichuan Yi",iii:"Sichuan Yi",scn:"Sicilian",sk:"Slovak",slk:"Slovak",slo:"Slovak",sl:"Slovenian",slv:"Slovenian",so:"Somali",som:"Somali",es:"Spanish",spa:"Spanish",sw:"Swahili",swa:"Swahili",sv:"Swedish",swe:"Swedish",gsw:"Swiss German",tgl:"Tagalog",tl:"Tagalog",te:"Telugu",tel:"Telugu",th:"Thai",tha:"Thai",bo:"Tibetan",bod:"Tibetan",tib:"Tibetan",tr:"Turkish",tur:"Turkish",uk:"Ukrainian",ukr:"Ukrainian",uz:"Uzbek",uzb:"Uzbek",vi:"Vietnamese",vie:"Vietnamese"};function Fr(e){return Br[e.toLowerCase()]}n(247);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qr(e,t,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wr(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kr="bp-media-controls-is-hd",Xr="manifest.mpd",Zr=function(){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ur(t=function(e,t){return!t||"object"!==zr(t)&&"function"!=typeof t?Ur(e):t}(this,Wr(r).call(this,e))),"autoCaptionDisplayer",void 0),t.api=e.api,t.adaptationHandler=t.adaptationHandler.bind(Ur(t)),t.handleBuffering=t.handleBuffering.bind(Ur(t)),t.getBandwidthInterval=t.getBandwidthInterval.bind(Ur(t)),t.handleAudioTrack=t.handleAudioTrack.bind(Ur(t)),t.handleQuality=t.handleQuality.bind(Ur(t)),t.handleSubtitle=t.handleSubtitle.bind(Ur(t)),t.loadeddataHandler=t.loadeddataHandler.bind(Ur(t)),t.requestFilter=t.requestFilter.bind(Ur(t)),t.shakaErrorHandler=t.shakaErrorHandler.bind(Ur(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(r,Tr),function(e,t,n){t&&Nr(e.prototype,t),n&&Nr(e,n)}(r,[{key:"setup",value:function(){this.isSetup||(qr(Wr(r.prototype),"setup",this).call(this),this.bandwidthHistory=[],this.switchHistory=[],this.hdVideoId=-1,this.sdVideoId=-1,this.textTracks=[],this.audioTracks=[],this.wrapperEl.classList.add("bp-media-dash"))}},{key:"destroy",value:function(){this.emit("bandwidthhistory",this.bandwidthHistory),this.emit("switchhistory",this.switchHistory),this.filmstripStatus&&this.filmstripStatus.destroy(),clearInterval(this.statsIntervalId),this.player&&(this.player.destroy(),this.player=void 0),this.mediaControls&&(this.mediaControls.removeListener("qualitychange",this.handleQuality),this.mediaControls.removeListener("subtitlechange",this.handleSubtitle),this.mediaControls.removeListener("audiochange",this.handleAudioTrack)),this.removeStats(),qr(Wr(r.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;return this.mediaUrl=this.options.representation.content.url_template,this.watermarkCacheBust=Date.now(),this.addEventListenersForMediaLoad(),Promise.all([this.loadAssets(this.getJSAssets()),this.getRepStatus().getPromise()]).then(function(){e.loadDashPlayer(),e.resetLoadTimeout()}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJSAssets());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;this.api.get(this.createContentUrlWithAuthParams(a,Xr),{type:"document"})}}},{key:"getJSAssets",value:function(){return["third-party/media/".concat(b.ab,"/shaka-player.compiled.js")]}},{key:"loadDashPlayer",value:function(){shaka.polyfill.installAll(),this.adapting=!0,this.player=new shaka.Player(this.mediaEl),this.player.addEventListener("adaptation",this.adaptationHandler),this.player.addEventListener("error",this.shakaErrorHandler),this.player.addEventListener("buffering",this.handleBuffering),this.player.configure({abr:{enabled:!1},streaming:{bufferingGoal:60,retryParameters:{timeout:0,maxAttempts:100,baseDelay:500,backoffFactor:2,fuzzFactor:.5}}}),this.player.getNetworkingEngine().registerRequestFilter(this.requestFilter),this.startLoadTimer(),this.player.load(this.mediaUrl,this.startTimeInSeconds).catch(this.shakaErrorHandler)}},{key:"handleBuffering",value:function(e){var t=e.buffering,n=this.createTimerTag(y.e.totalBufferLag);t?sr.a.start(n):(sr.a.stop(n),this.metrics[y.e.totalBufferLag]+=sr.a.get(n).elapsed,sr.a.reset(n))}},{key:"processBufferFillMetric",value:function(){var e=this.createTimerTag(y.e.bufferFill),t=sr.a.get(e).elapsed;this.metrics[y.e.bufferFill]=t,this.emitMetric(y.f.bufferFill,t)}},{key:"processMetrics",value:function(){if(this.loaded){var e=this.metrics[y.e.totalBufferLag],t=this.determineWatchLength();this.metrics[y.e.totalBufferLag]=e,this.metrics[y.e.lagRatio]=e/t,this.metrics[y.e.duration]=this.mediaEl?1e3*this.mediaEl.duration:0,this.metrics[y.e.watchLength]=t,this.emitMetric(y.f.endPlayback,this.metrics[y.e.lagRatio])}}},{key:"determineWatchLength",value:function(){if(!this.mediaEl||!this.mediaEl.played)return-1;for(var e=this.mediaEl.played,t=0,n=0;n<e.length;n+=1){var i=e.start(n);t+=e.end(n)-i}return 1e3*t}},{key:"requestFilter",value:function(e,t){var n=this,i=e===shaka.net.NetworkingEngine.RequestType.MANIFEST?Xr:void 0;t.uris=t.uris.map(function(e){var t=n.createContentUrlWithAuthParams(e,i);return i!==Xr&&n.options.file.watermark_info.is_watermarked&&(t=Object(_.e)(t,{watermark_content:n.watermarkCacheBust})),t})}},{key:"getActiveTrack",value:function(){return this.player.getVariantTracks().find(function(e){return e.active})}},{key:"showLoadingIcon",value:function(e){this.getActiveTrack().id!==e&&qr(Wr(r.prototype),"showLoadingIcon",this).call(this)}},{key:"enableVideoId",value:function(t){var e=this.player.getVariantTracks(),n=this.getActiveTrack(),i=e.find(function(e){return e.videoId===t&&e.audioId===n.audioId});i&&i.id!==n.id&&(this.showLoadingIcon(i.id),this.player.selectVariantTrack(i,!0))}},{key:"enableAudioId",value:function(t){var e=this.player.getVariantTracks(),n=this.getActiveTrack(),i=e.find(function(e){return e.roles[0]===t&&e.videoId===n.videoId});i&&i.audioId!==n.audioId&&(this.showLoadingIcon(i.id),this.player.selectVariantTrack(i,!0))}},{key:"enableAdaptation",value:function(e){this.adapting=e,this.player.configure({abr:{enabled:e}})}},{key:"handleSubtitle",value:function(){var e=parseInt(this.cache.get("media-subtitles"),10);if(this.autoCaptionDisplayer&&0===e)this.autoCaptionDisplayer.setTextVisibility(!0),this.emit("subtitlechange","Auto-Generated");else if(void 0!==this.textTracks[e]){var t=this.textTracks[e];this.player.selectTextTrack(t),this.player.setTextTrackVisibility(!0),this.emit("subtitlechange",t.language)}else this.autoCaptionDisplayer&&this.autoCaptionDisplayer.setTextVisibility(!1),this.player.setTextTrackVisibility(!1),this.emit("subtitlechange",null)}},{key:"handleAudioTrack",value:function(){var e=parseInt(this.cache.get("media-audiotracks"),10),t=this.audioTracks[e];void 0!==t&&this.enableAudioId(t.role)}},{key:"handleQuality",value:function(){var e=-1!==this.hdVideoId?this.cache.get("media-quality"):"sd";switch(e){case"hd":this.enableAdaptation(!1),this.enableVideoId(this.hdVideoId);break;case"sd":this.enableAdaptation(!1),this.enableVideoId(this.sdVideoId);break;case"auto":default:this.enableAdaptation(!0)}this.showGearHdIcon(this.getActiveTrack()),e&&this.emit("qualitychange",e)}},{key:"showGearHdIcon",value:function(e){(0<arguments.length&&void 0!==e?e:{}).videoId===this.hdVideoId?this.wrapperEl.classList.add(Kr):this.wrapperEl.classList.remove(Kr)}},{key:"adaptationHandler",value:function(){var e=this.getActiveTrack();this.showGearHdIcon(e),this.isLoaded()&&(this.adapting&&this.emit("adaptation",e.bandwidth),this.hideLoadingIcon())}},{key:"shakaErrorHandler",value:function(e){var t=e.detail?e.detail:e,n=new m.a(y.c.SHAKA,"We’re sorry, the preview didn’t load. Please refresh the page.",{code:t.code,severity:t.severity},"Shaka error. Code = ".concat(t.code,", Category = ").concat(t.category,", Severity = ").concat(t.severity,", Data = ").concat(t.data.toString()));if(1<t.severity){if(t.code===shaka.util.Error.Code.HTTP_ERROR){var i=t.data[0];return void this.handleDownloadError(n,i)}this.triggerError(n)}}},{key:"addEventListenersForMediaControls",value:function(){qr(Wr(r.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.addListener("qualitychange",this.handleQuality),this.mediaControls.addListener("subtitlechange",this.handleSubtitle),this.mediaControls.addListener("audiochange",this.handleAudioTrack)}},{key:"loadSubtitles",value:function(){this.textTracks=this.player.getTextTracks().sort(function(e,t){return e.id-t.id}),0<this.textTracks.length&&this.mediaControls.initSubtitles(this.textTracks.map(function(e){return Fr(e.language)||e.language}),Fr(this.options.location.locale.substring(0,2)))}},{key:"loadAutoGeneratedCaptions",value:function(e){if(this.transcript!==e){this.transcript=e;var t=this.createTextCues(e);if(t.length)if(this.autoCaptionDisplayer){var n=this.autoCaptionDisplayer.isTextVisible();this.autoCaptionDisplayer.destroy(),this.setupAutoCaptionDisplayer(t),this.autoCaptionDisplayer.setTextVisibility(n)}else this.setupAutoCaptionDisplayer(t),this.mediaControls.setLabel(this.mediaControls.subtitlesButtonEl,"Auto-Generated Captions"),this.mediaControls.initSubtitles(["Auto-Generated"],Fr(this.options.location.locale.substring(0,2)))}}},{key:"createTextCues",value:function(e){return Object(_.q)(e,"entries",[]).map(function(e){var t=e.appears,n=void 0===t?[{}]:t,i=e.text,r=void 0===i?"":i,o=Array.isArray(n)&&0<n.length?n[0]:{},a=o.start,s=void 0===a?0:a,l=o.end,c=void 0===l?0:l;return new shaka.text.Cue(s,c,r)})}},{key:"setupAutoCaptionDisplayer",value:function(e){this.autoCaptionDisplayer=new shaka.text.SimpleTextDisplayer(this.mediaEl),this.autoCaptionDisplayer.append(e),this.player.configure({textDisplayFactory:this.autoCaptionDisplayer})}},{key:"loadAlternateAudio",value:function(){var e=this.player.getVariantTracks().sort(function(e,t){return e.audioId-t.audioId}),t=[],n=[],i=0;for(i=0;i<e.length;i+=1){var r=e[i];t.indexOf(r.audioId)<0&&(t.push(r.audioId),n.push(r))}if(this.audioTracks=n.map(function(e){return{language:e.language,role:e.roles[0]}}),1<this.audioTracks.length){var o=this.audioTracks.map(function(e){return Fr(e.language)||e.language});this.mediaControls.initAlternateAudio(o)}}},{key:"loadeddataHandler",value:function(){this.isDestroyed()||(this.calculateVideoDimensions(),this.loadUI(),this.isAutoplayEnabled()&&this.autoplay(),this.loadFilmStrip(),this.resize(),this.handleVolume(),this.startBandwidthTracking(),this.loadSubtitles(),this.loadAlternateAudio(),this.showPlayButton(),this.loaded=!0,this.emit(y.n.load),this.showMedia(),this.mediaControls.show(),this.options.autoFocus&&this.mediaContainerEl.focus())}},{key:"loadUI",value:function(){qr(Wr(r.prototype),"loadUI",this).call(this),-1!==this.hdVideoId&&this.mediaControls.enableHDSettings()}},{key:"loadFilmStrip",value:function(){var e=Object(wn.h)(this.options.file,"filmstrip");if(e&&e.metadata&&0<e.metadata.interval){var t=this.createContentUrlWithAuthParams(e.content.url_template);this.filmstripStatus=this.getRepStatus(e),this.mediaControls.initFilmstrip(t,this.filmstripStatus,this.aspect,e.metadata.interval)}}},{key:"calculateVideoDimensions",value:function(){var e=this.player.getVariantTracks(),t=e.reduce(function(e,t){return e.width>t.width?e:t}),n=e.reduce(function(e,t){return e.width<t.width?e:t});this.player.isAudioOnly()?(this.videoWidth=854,this.videoHeight=480):(this.videoWidth=t.width,this.videoHeight=t.height,this.sdVideoId=n.videoId,t.videoId!==n.videoId&&(this.hdVideoId=t.videoId)),this.aspect=this.videoWidth/this.videoHeight}},{key:"resize",value:function(){var e=this.videoWidth||0,t=this.videoHeight||0,n={height:this.wrapperEl.clientHeight,width:this.wrapperEl.clientWidth};if(e<420&&(t=(e=420)/this.aspect),this.mediaEl.style.width="",!B.a.isFullscreen(this.containerEl)&&e<=n.width&&t<=n.height)1<=this.aspect?this.mediaEl.style.width="".concat(e,"px"):this.mediaEl.style.width="".concat(t*this.aspect,"px");else{var i=e+e*((n.height-t)/t);t+t*((n.width-e)/e)<=n.height?this.mediaEl.style.width="".concat(n.width,"px"):i<=n.width&&(this.mediaEl.style.width="".concat(n.height*this.aspect,"px"))}qr(Wr(r.prototype),"resize",this).call(this)}},{key:"getBandwidthInterval",value:function(){if(!this.isDestroyed()&&this.player&&this.player.getStats&&!this.mediaEl.paused&&!this.mediaEl.ended){var e=this.player.getStats(),t=e.estimatedBandwidth,n=e.switchHistory,i=e.streamBandwidth;this.bandwidthHistory.push({bandwidth:t,stream:i}),this.switchHistory.push({switchHistory:n,stream:i}),this.statsEl&&(this.statsEl.textContent="".concat(Math.round(t/1e3)," kbps"))}}},{key:"startBandwidthTracking",value:function(){this.statsIntervalId=setInterval(this.getBandwidthInterval,3e3)}},{key:"removeStats",value:function(){this.statsEl&&this.mediaContainerEl&&this.mediaContainerEl.removeChild(this.statsEl),this.statsEl=void 0}},{key:"toggleStats",value:function(){this.statsEl?this.removeStats():(this.statsEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.statsEl.className="bp-media-dash-stats",this.statsEl.textContent="?!? kbps")}},{key:"onKeydown",value:function(e){return"Shift+I"===e&&this.player?(this.toggleStats(),!0):qr(Wr(r.prototype),"onKeydown",this).call(this,e)}}]),r}();function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jr(e,t){return!t||"object"!==Qr(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function $r(e,t,n){return($r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eo(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function to(e,t){return(to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var no=["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"],io=[{NAME:"MP3",CONSTRUCTOR:Sr,REP:b.db,EXT:["mp3"]},{NAME:"Dash",CONSTRUCTOR:Zr,REP:"dash",EXT:no},{NAME:"MP4",CONSTRUCTOR:Dr,REP:"mp4",EXT:no},{NAME:"MP3",CONSTRUCTOR:Sr,REP:"mp3",EXT:["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"]}],ro=new(function(){function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=Jr(this,eo(o).call(this))).viewers=io,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&to(e,t)}(o,a),function(e,t,n){t&&Yr(e.prototype,t),n&&Yr(e,n)}(o,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=$r(eo(o.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(_.E)(e)){var r=Object(_.D)("We’re sorry, your browser doesn’t support preview for {1}.",["360-degree videos"]);throw new m.a(y.c.BROWSER_UNSUPPORTED,r,{file:e})}return i}}]),o}());function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ho="bp-is-hidden",fo=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),uo(lo(t=function(e,t){return!t||"object"!==oo(t)&&"function"!=typeof t?lo(e):t}(this,so(n).call(this))),"el",void 0),uo(lo(t),"vrButtonEl",void 0),t.vrButtonEl=null,t.el=e,t.handleToggleVr=t.handleToggleVr.bind(lo(t)),t.addUi(),t.attachEventHandlers(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(n,D.a),function(e,t,n){t&&ao(e.prototype,t),n&&ao(e,n)}(n,[{key:"addUi",value:function(){var e=this.el.querySelector(".".concat("bp-media-controls-container"));this.vrButtonEl=e.appendChild(document.createElement("button")),this.vrButtonEl.classList.add("bp-media-controls-btn"),this.vrButtonEl.setAttribute("aria-label","Toggle VR display"),this.vrButtonEl.setAttribute("title","Toggle VR display"),this.vrButtonEl.classList.add(ho),this.vrButtonEl.appendChild(document.createElement("span")).innerHTML=f.b}},{key:"attachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.addEventListener("click",this.handleToggleVr)}},{key:"detachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.removeEventListener("click",this.handleToggleVr)}},{key:"handleToggleVr",value:function(){this.emit(ke)}},{key:"showVrButton",value:function(){this.vrButtonEl&&this.vrButtonEl.classList.remove(ho)}},{key:"destroy",value:function(){this.removeAllListeners(),this.detachEventHandlers(),this.vrButtonEl&&this.vrButtonEl.parentElement&&this.vrButtonEl.parentElement.removeChild(this.vrButtonEl),this.vrButtonEl=null,this.el=null,this.handleToggleVr=null}}]),n}();function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(e,t,n){return(mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yo(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wo=function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bo(t=function(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?bo(e):t}(this,(e=yo(o)).call.apply(e,[this].concat(i)))),"inputController",void 0),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(o,Et),function(e,t,n){t&&vo(e.prototype,t),n&&vo(e,n)}(o,[{key:"getInputController",value:function(){if(!this.inputController){var e=this.box3d.getApplication();if(!e)return null;this.inputController=e.getComponentByScriptName("Input")}return this.inputController}},{key:"destroy",value:function(){this.inputController=null,mo(yo(o.prototype),"destroy",this).call(this)}}]),o}(),Eo=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!v.a.isMobile(),renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}];n(248);function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e,t,n){return(Po="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _o="VIDEO_ID",jo={imageId:_o,minFilter:"linear",magFilter:"linear",wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"};function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ho(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ao(e,t){return!t||"object"!==To(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ro(e,t,n){return(Ro="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Io(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vo=["Chrome","Edge","Firefox","Opera","Safari"],Do=[{NAME:"Video360",CONSTRUCTOR:function(){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Co(So(t=function(e,t){return!t||"object"!==ko(t)&&"function"!=typeof t?So(e):t}(this,Lo(r).call(this,e))),"renderer",void 0),Co(So(t),"controls",void 0),Co(So(t),"textureAsset",void 0),Co(So(t),"videoAsset",void 0),Co(So(t),"skybox",void 0),t.create360Environment=t.create360Environment.bind(So(t)),t.handleToggleVr=t.handleToggleVr.bind(So(t)),t.handleShowVrButton=t.handleShowVrButton.bind(So(t)),t.onCanvasMouseDown=t.onCanvasMouseDown.bind(So(t)),t.onCanvasMouseUp=t.onCanvasMouseUp.bind(So(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(r,Zr),function(e,t,n){t&&Oo(e.prototype,t),n&&Oo(e,n)}(r,[{key:"setup",value:function(){this.isSetup||(Po(Lo(r.prototype),"setup",this).call(this),this.destroyed=!1,this.mediaEl.style.display="none",this.mediaContainerEl.style.width="100%",this.mediaContainerEl.style.height="100%",this.wrapperEl.classList.add("bp-video-360"))}},{key:"destroy",value:function(){Po(Lo(r.prototype),"destroy",this).call(this),this.skybox&&(this.skybox.setAttribute("skyboxTexture",null),this.skybox=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.videoAsset&&(this.videoAsset.destroy(),this.videoAsset=null),this.controls&&(this.destroyControls(),this.controls=null),this.renderer&&(this.renderer.getBox3D().off("mouseDown",this.onCanvasMouseDown),this.renderer.getBox3D().off("mouseUp",this.onCanvasMouseUp),this.renderer.removeListener(Le,this.handleShowVrButton),this.renderer.destroy(),this.renderer=null)}},{key:"getJSAssets",value:function(){return Po(Lo(r.prototype),"getJSAssets",this).call(this).concat(St)}},{key:"loadeddataHandler",value:function(){var e=this,t=this.options,n=t.token,i=t.apiHost;this.renderer=new wo(this.mediaContainerEl,new BoxSDK({token:n,apiBase:i})),this.renderer.on(Le,this.handleShowVrButton),this.renderer.staticBaseURI=this.options.location.staticBaseURI,this.options.sceneEntities=Eo,this.renderer.initBox3d(this.options).then(this.create360Environment).then(function(){Po(Lo(r.prototype),"loadeddataHandler",e).call(e),e.createControls(),e.renderer.initVr()})}},{key:"createControls",value:function(){if(this.controls=new fo(this.mediaContainerEl),this.controls.on(ke,this.handleToggleVr),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D().canvas;e&&(e.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&e.addEventListener("touchstart",this.pointerHandler))}}},{key:"destroyControls",value:function(){if(this.controls.removeListener(ke,this.handleToggleVr),this.controls.destroy(),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D().canvas;e&&(e.removeEventListener("mousemove",this.mousemoveHandler),e.removeEventListener("touchstart",this.pointerHandler))}}},{key:"resize",value:function(){Po(Lo(r.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"create360Environment",value:function(){var t=this;return this.skybox=this.renderer.getScene().getComponentByScriptId("skybox_renderer"),this.videoAsset=this.renderer.getBox3D().createVideo({loop:!1,generateMipmaps:!1,querySelector:".".concat(this.mediaContainerEl.className," video"),autoPlay:!1,muted:!1},_o),this.textureAsset=this.renderer.getBox3D().createTexture2d(jo,"VIDEO_TEX_ID"),new Promise(function(e){t.textureAsset.load(function(){t.skybox.setAttribute("skyboxTexture",t.textureAsset.id),t.skybox.enable(),t.renderer.getBox3D().on("mouseDown",t.onCanvasMouseDown),e()})})}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr(),this.renderer.vrEnabled?this.skybox.setAttribute("stereoEnabled",!1):(this.mediaEl.paused&&this.mediaEl.play(),this.skybox.setAttribute("stereoEnabled",!0))}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"onCanvasMouseDown",value:function(){this.renderer.getBox3D().once("mouseUp",this.onCanvasMouseUp)}},{key:"onCanvasMouseUp",value:function(){var e=this.renderer.getInputController();!e||e.getPreviousMouseDragState()||e.getPreviousTouchDragState()||this.togglePlay()}}]),r}(),REP:"dash",EXT:["3g2","3gp","avi","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","qt","wmv"]}],Bo=new(function(){function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=Ao(this,Io(s).call(this))).viewers=Do,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(s,Ee),function(e,t,n){t&&Ho(e.prototype,t),n&&Ho(e,n)}(s,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=Ro(Io(s.prototype),"determineViewer",this).call(this,e,n);if(i){var r=v.a.getName(),o=v.a.isIOS();if(!Vo.some(function(e){return e===r})||o||!v.a.hasWebGL()){var a=Object(_.D)("We’re sorry, your browser doesn’t support preview for {1}.",["360-degree videos"]);throw new m.a(y.c.BROWSER_UNSUPPORTED,a,{file:e})}}return i}}]),s}());function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wo="bp-find-match-not-found",Go=function(){function r(e,t,n){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=function(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?Uo(e):t}(this,No(r).call(this))).opened=!1,i.bar=e,i.eventBus=n,i.findController=t,null===i.eventBus)throw new Error("DocFindBar cannot be used without an EventBus instance.");if(null===i.findController)throw new Error("DocFindBar cannot be used without a PDFFindController instance.");return i.onKeydown=i.onKeydown.bind(Uo(i)),i.findFieldHandler=i.findFieldHandler.bind(Uo(i)),i.barKeyDownHandler=i.barKeyDownHandler.bind(Uo(i)),i.findNextHandler=i.findNextHandler.bind(Uo(i)),i.findPreviousHandler=i.findPreviousHandler.bind(Uo(i)),i.close=i.close.bind(Uo(i)),i.eventBus.on("updatefindcontrolstate",i.updateUIState.bind(Uo(i))),i.eventBus.on("updatefindmatchescount",i.updateUIResultsCount.bind(Uo(i))),i.bar.classList.add(b.K),i.createFindField(),i.createFindButtons(),i.findPreviousButtonEl=i.bar.querySelector(".bp-doc-find-prev"),i.findNextButtonEl=i.bar.querySelector(".bp-doc-find-next"),i.findCloseButtonEl=i.bar.querySelector(".bp-doc-find-close"),i.bindDOMListeners(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}(r,D.a),function(e,t,n){t&&zo(e.prototype,t),n&&zo(e,n)}(r,[{key:"createFindField",value:function(){var e=document.createElement("span");e.classList.add("bp-doc-find-search"),e.innerHTML=f.t.trim(),this.bar.appendChild(e),this.findFieldEl=document.createElement("input"),this.findFieldEl.classList.add("bp-doc-find-field"),this.bar.appendChild(this.findFieldEl),this.findResultsCountEl=document.createElement("span"),this.findResultsCountEl.classList.add("bp-doc-find-results-count"),this.findResultsCountEl.classList.add(b.K),this.bar.appendChild(this.findResultsCountEl)}},{key:"createFindButtons",value:function(){var e='<button class="bp-doc-find-prev" type="button">'.concat(f.k,"</button>").trim(),t='<button class="bp-doc-find-next" type="button">'.concat(f.j,"</button>").trim(),n='<button class="bp-doc-find-close" type="button">'.concat(f.g,"</button>").trim();this.findButtonContainerEl=document.createElement("span"),this.findButtonContainerEl.classList.add("bp-doc-find-controls"),this.findButtonContainerEl.innerHTML=e+t+n,this.bar.appendChild(this.findButtonContainerEl)}},{key:"destroy",value:function(){this.removeAllListeners(),this.unbindDOMListeners(),this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"dispatchFindEvent",value:function(e,t){this.findController.executeCommand(e,{query:this.findFieldEl.value,phraseSearch:!0,highlightAll:!0,findPrevious:t})}},{key:"updateUIState",value:function(e){var t=e.matchesCount,n=e.state;switch(this.status="",n){case 1:this.findFieldEl.classList.add(Wo);break;case 3:this.status="pending";break;case 0:this.findFieldEl.classList.remove(Wo)}this.findFieldEl.setAttribute("data-status",this.status),this.updateUIResultsCount({matchesCount:t})}},{key:"updateUIResultsCount",value:function(e){var t=e.matchesCount;if(this.findResultsCountEl)if(t&&t.total){var n=this.findResultsCountEl.getBoundingClientRect().width+13;this.findFieldEl.style.paddingRight="".concat(n,"px"),this.findResultsCountEl.textContent="".concat(t.current," ").concat(" of "," ").concat(t.total),this.findResultsCountEl.classList.remove(b.K)}else this.findResultsCountEl.classList.add(b.K)}},{key:"setFindFieldElValue",value:function(e){this.findFieldEl.value=e}},{key:"bindDOMListeners",value:function(){this.bar.addEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.addEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.addEventListener("click",this.findPreviousHandler),this.findNextButtonEl.addEventListener("click",this.findNextHandler),this.findCloseButtonEl.addEventListener("click",this.close)}},{key:"unbindDOMListeners",value:function(){this.bar.removeEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.removeEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.removeEventListener("click",this.findPreviousHandler),this.findNextButtonEl.removeEventListener("click",this.findNextHandler),this.findCloseButtonEl.removeEventListener("click",this.close)}},{key:"onKeydown",value:function(e){switch(Object(_.k)(e).toLowerCase()){case"meta+f":case"control+f":case"meta+g":case"control+g":case"f3":this.open(),e.preventDefault();break;default:return!1}return!0}},{key:"findFieldHandler",value:function(){this.dispatchFindEvent("find")}},{key:"barKeyDownHandler",value:function(e){switch(Object(_.k)(e).toLowerCase()){case"enter":this.findNextHandler(!1);break;case"shift+enter":this.findPreviousHandler(!1);break;case"escape":case"esc":if(!this.opened)return;this.close(),e.stopPropagation(),e.preventDefault();break;case"shift++":case"shift+_":case"[":case"]":e.stopPropagation()}}},{key:"findNextHandler",value:function(e){this.findFieldEl.value&&(e?this.dispatchFindEvent("findagain",!1):this.findNextButtonEl.focus(),this.emit(y.n.metric,{name:y.l.NEXT}))}},{key:"findPreviousHandler",value:function(e){this.findFieldEl.value&&(e?this.dispatchFindEvent("findagain",!0):this.findPreviousButtonEl.focus(),this.emit(y.n.metric,{name:y.l.PREVIOUS}))}},{key:"open",value:function(){this.prevSearchQuery&&(this.setFindFieldElValue(this.prevSearchQuery),this.findFieldHandler()),this.opened||(this.opened=!0,this.bar.classList.remove(b.K),this.emit(y.n.metric,{name:y.l.OPEN})),this.findFieldEl.select(),this.findFieldEl.focus()}},{key:"close",value:function(){this.prevSearchQuery=this.findFieldEl.value,this.setFindFieldElValue(""),this.findFieldHandler(),this.opened&&(this.emit("close"),this.opened=!1,this.bar.classList.add(b.K))}}]),r}(),Ko=n(29),Xo=n(17),Zo=n.n(Xo),Qo=n(56),Yo=n.n(Qo);function Jo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ea=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$o(this,"anchorEl",void 0),$o(this,"scrollingEl",void 0),$o(this,"containerHeight",void 0),$o(this,"itemHeight",void 0),$o(this,"listEl",void 0),$o(this,"margin",void 0),$o(this,"maxBufferHeight",void 0),$o(this,"maxRenderedItems",void 0),$o(this,"previousScrollTop",void 0),$o(this,"renderItemFn",void 0),$o(this,"totalItems",void 0),$o(this,"totalViewItems",void 0),this.anchorEl=e,this.previousScrollTop=0,this.createListElement=this.createListElement.bind(this),this.isVisible=this.isVisible.bind(this),this.onScrollEndHandler=this.onScrollEndHandler.bind(this),this.onScrollHandler=this.onScrollHandler.bind(this),this.getCurrentListInfo=this.getCurrentListInfo.bind(this),this.renderItems=this.renderItems.bind(this),this.scrollIntoView=this.scrollIntoView.bind(this),this.debouncedOnScrollEndHandler=Oi()(this.onScrollEndHandler,151),this.throttledOnScrollHandler=o()(this.onScrollHandler,150)}return function(e,t,n){t&&Jo(e.prototype,t),n&&Jo(e,n)}(t,[{key:"destroy",value:function(){this.scrollingEl&&this.scrollingEl.remove(),this.scrollingEl=null,this.listEl=null}},{key:"init",value:function(e){this.validateRequiredConfig(e),this.totalItems=e.totalItems,this.itemHeight=e.itemHeight,this.containerHeight=e.containerHeight,this.renderItemFn=e.renderItemFn,this.margin=e.margin||0,this.onScrollEnd=e.onScrollEnd,this.onScrollStart=e.onScrollStart,this.scrollingEl=document.createElement("div"),this.scrollingEl.className="bp-vs",this.listEl=this.createListElement(),this.scrollingEl.appendChild(this.listEl),this.anchorEl.appendChild(this.scrollingEl),this.resize(this.containerHeight);var t=e.initialRowIndex||0;if(this.renderItems(t<this.maxRenderedItems?0:t),this.scrollIntoView(t),this.bindDOMListeners(),e.onInit){var n=this.getCurrentListInfo();e.onInit(n)}}},{key:"resize",value:function(e){e&&Zo()(e)&&(this.containerHeight=e,this.totalViewItems=Math.floor(this.containerHeight/(this.itemHeight+this.margin)),this.maxBufferHeight=this.totalViewItems*this.itemHeight,this.maxRenderedItems=3*(this.totalViewItems+1))}},{key:"validateRequiredConfig",value:function(e){if(!e.totalItems||!Zo()(e.totalItems))throw new Error("totalItems is required");if(!e.itemHeight||!Zo()(e.itemHeight))throw new Error("itemHeight is required");if(!e.renderItemFn||!Yo()(e.renderItemFn))throw new Error("renderItemFn is required");if(!e.containerHeight||!Zo()(e.containerHeight))throw new Error("containerHeight is required")}},{key:"bindDOMListeners",value:function(){this.scrollingEl.addEventListener("scroll",this.throttledOnScrollHandler,{passive:!0}),this.scrollingEl.addEventListener("scroll",this.debouncedOnScrollEndHandler,{passive:!0})}},{key:"unbindDOMListeners",value:function(){this.scrollingEl&&(this.scrollingEl.removeEventListener("scroll",this.throttledOnScrollHandler),this.scrollingEl.removeEventListener("scroll",this.debouncedOnScrollEndHandler))}},{key:"onScrollHandler",value:function(e){var t=e.target.scrollTop;if(Math.abs(t-this.previousScrollTop)>this.maxBufferHeight){var n=Math.floor(t/(this.itemHeight+this.margin))-this.totalViewItems;this.renderItems(Math.max(n,0)),this.previousScrollTop=t}}},{key:"onScrollEndHandler",value:function(){if(this.onScrollEnd){var e=this.getCurrentListInfo();this.onScrollEnd(e)}}},{key:"getCurrentListInfo",value:function(){var e=this.listEl,t=e.firstElementChild,n=e.lastElementChild,i=e.children,r=t?parseInt(t.dataset.bpVsRowIndex,10):-1,o=n?parseInt(n.dataset.bpVsRowIndex,10):-1;r=Zo()(r)?r:-1,o=Zo()(o)?o:-1;var a=[];return i&&(a=this.getListItems().map(function(e){return e&&e.children?e.children[0]:null})),{startOffset:r,endOffset:o,items:a}}},{key:"renderItems",value:function(e){var t=0<arguments.length&&void 0!==e?e:0,n=this.getCurrentListInfo(),i=n.startOffset,r=n.endOffset;if(i!==t){var o=Math.max(0,this.totalItems-this.maxRenderedItems),a=o<t?o:t,s=t+this.maxRenderedItems;s>=this.totalItems&&(s=this.totalItems-1);var l=document.createDocumentFragment();i<=t&&t<=r?(a=r+1,this.createItems(l,a,s),this.deleteItems(this.listEl,i-i,t-i),this.listEl.appendChild(l)):i<=s&&s<=r?(this.createItems(l,t,i-1),this.deleteItems(this.listEl,s-i+1),this.listEl.insertBefore(l,this.listEl.firstElementChild)):(this.createItems(l,a,s),this.deleteItems(this.listEl),this.listEl.appendChild(l))}}},{key:"createItems",value:function(e,t,n){if(!(!e||t<0||n<0))for(var i=t;i<=n;i+=1){var r=this.renderItem(i);e.appendChild(r)}}},{key:"deleteItems",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length?n:void 0;!t||i<0||r<0||Array.prototype.slice.call(t.children,i,r).forEach(function(e){return t.removeChild(e)})}},{key:"renderItem",value:function(e){var t,n=document.createElement("li"),i=(this.itemHeight+this.margin)*e+this.margin;try{t=this.renderItemFn.call(this,e)}catch(e){}return n.style.top="".concat(i,"px"),n.style.height="".concat(this.itemHeight,"px"),n.classList.add("bp-vs-list-item"),n.dataset.bpVsRowIndex=e,t&&n.appendChild(t),n}},{key:"createListElement",value:function(){var e=document.createElement("ol");return e.className="bp-vs-list",e.style.height="".concat(this.totalItems*(this.itemHeight+this.margin)+this.margin,"px"),e}},{key:"scrollIntoView",value:function(n){if(!(!this.scrollingEl||n<0||n>=this.totalItems)){var e=this.getListItems().find(function(e){var t=e.dataset.bpVsRowIndex;return parseInt(t,10)===n});if(e)this.isVisible(e)||e.scrollIntoView();else{var t=(this.itemHeight+this.margin)*n;this.scrollingEl.scrollTop=t,this.scrollingEl.dispatchEvent(new Event("scroll"))}}}},{key:"isVisible",value:function(e){if(!this.scrollingEl||!e)return!1;var t=this.scrollingEl.scrollTop,n=e.offsetTop;return t<=n&&n+this.itemHeight<=t+this.containerHeight}},{key:"getVisibleItems",value:function(){var t=this;return this.listEl?this.getListItems().filter(function(e){return t.isVisible(e)}).map(function(e){return e&&e.children&&e.children[0]}):[]}},{key:"getListItems",value:function(){return this.listEl?Array.prototype.slice.call(this.listEl.children):[]}}]),t}(),ta=n(59);function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oa(e,t,n){return(oa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aa(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sa(e,t){return(sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ca=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),la(ra(t=function(e,t){return!t||"object"!==na(t)&&"function"!=typeof t?ra(e):t}(this,aa(i).call(this))),"cacheQueue",void 0),la(ra(t),"maxEntries",void 0),t.maxEntries=e||500,t.cache={},t.cacheQueue=[],t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sa(e,t)}(i,ta["a"]),function(e,t,n){t&&ia(e.prototype,t),n&&ia(e,n)}(i,[{key:"destroy",value:function(){this.cache=null,this.cacheQueue=null}},{key:"set",value:function(e,t){if(this.inCache(e)||this.cacheQueue.push(e),oa(aa(i.prototype),"set",this).call(this,e,t),this.cacheQueue.length>this.maxEntries){var n=this.cacheQueue.shift();this.unset(n)}}}]),i}();function ua(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ha(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fa="bp-thumbnail-nav",pa="bp-thumbnail-image-loaded",va="bp-thumbnail-is-selected",ba=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),da(this,"anchorEl",void 0),da(this,"pageRatio",void 0),da(this,"currentPage",void 0),da(this,"currentThumbnails",void 0),da(this,"isOpen",void 0),da(this,"pdfViewer",void 0),da(this,"scale",void 0),da(this,"thumbnailImageCache",void 0),this.anchorEl=e,this.currentThumbnails=[],this.pdfViewer=t,this.thumbnailImageCache=new ca,this.isOpen=!1,this.createImageEl=this.createImageEl.bind(this),this.createPlaceholderThumbnail=this.createPlaceholderThumbnail.bind(this),this.createThumbnailImage=this.createThumbnailImage.bind(this),this.generateThumbnailImages=this.generateThumbnailImages.bind(this),this.getThumbnailDataURL=this.getThumbnailDataURL.bind(this),this.renderNextThumbnailImage=this.renderNextThumbnailImage.bind(this),this.requestThumbnailImage=this.requestThumbnailImage.bind(this),this.thumbnailClickHandler=this.thumbnailClickHandler.bind(this),this.onKeydown=this.onKeydown.bind(this),this.anchorEl.addEventListener("click",this.thumbnailClickHandler),this.anchorEl.addEventListener("keydown",this.onKeydown)}return function(e,t,n){t&&ha(e.prototype,t),n&&ha(e,n)}(n,[{key:"thumbnailClickHandler",value:function(e){var t=e.target;if(t.classList.contains(fa)){var n=t.parentNode.dataset.bpPageNum,i=parseInt(n,10);this.onThumbnailSelect&&this.onThumbnailSelect(i)}this.anchorEl.focus(),e.preventDefault(),e.stopImmediatePropagation()}},{key:"onKeydown",value:function(e){var t=Object(_.k)(e),n=!1,i=this.currentPage;"ArrowUp"===t?(i-=1,n=!0):"ArrowDown"===t&&(i+=1,n=!0),n&&(e.preventDefault(),e.stopImmediatePropagation()),this.onThumbnailSelect&&this.onThumbnailSelect(i)}},{key:"destroy",value:function(){this.virtualScroller&&(this.virtualScroller.destroy(),this.virtualScroller=null),this.thumbnailImageCache&&(this.thumbnailImageCache.destroy(),this.thumbnailImageCache=null),this.pdfViewer=null,this.currentThumbnails=[],this.currentPage=null,this.anchorEl.removeEventListener("click",this.thumbnailClickHandler)}},{key:"init",value:function(e){var o=this;this.virtualScroller=new ea(this.anchorEl),e&&(this.onThumbnailSelect=e.onSelect,this.currentPage=e.currentPage||1,this.isOpen=!!e.isOpen),this.pdfViewer.pdfDocument.getPage(1).then(function(e){var t=e.getViewport({scale:1}),n=t.width,i=t.height;if(Zo()(n)&&0<n&&Zo()(i)&&0<i){o.scale=154/n,o.pageRatio=n/i;var r=e.getViewport({scale:o.scale});o.thumbnailHeight=Math.ceil(r.height),o.virtualScroller.init({initialRowIndex:o.currentPage-1,totalItems:o.pdfViewer.pagesCount,itemHeight:o.thumbnailHeight+6,containerHeight:o.getContainerHeight(),margin:15,renderItemFn:o.createPlaceholderThumbnail,onScrollEnd:o.generateThumbnailImages,onInit:o.generateThumbnailImages})}})}},{key:"generateThumbnailImages",value:function(e){var t=e.items;this.currentThumbnails=t,this.renderNextThumbnailImage()}},{key:"renderNextThumbnailImage",value:function(){var e=this.virtualScroller.getVisibleItems().concat(this.currentThumbnails).find(function(e){return!e.classList.contains(pa)});if(e){var t=parseInt(e.dataset.bpPageNum,10);this.requestThumbnailImage(t-1,e)}}},{key:"createPlaceholderThumbnail",value:function(e){var t=document.createElement("div"),n=e+1;t.className="bp-thumbnail",t.dataset.bpPageNum=n,t.appendChild(this.createPageNumber(n));var i=this.createThumbnailNav();t.appendChild(i),n===this.currentPage&&t.classList.add(va);var r=this.thumbnailImageCache.get(e);return r&&!r.inProgress&&(i.appendChild(r.image),t.classList.add(pa)),this.currentThumbnails.push(t),t}},{key:"createThumbnailNav",value:function(){var e=document.createElement("div");return e.className=fa,e.setAttribute("role","button"),e}},{key:"requestThumbnailImage",value:function(e,t){var n=this;requestAnimationFrame(function(){n.createThumbnailImage(e).then(function(e){e&&(t.lastChild.appendChild(e),t.classList.add(pa)),n.renderNextThumbnailImage()})})}},{key:"createThumbnailImage",value:function(t){var n=this,e=this.thumbnailImageCache.get(t);return e&&e.image?Promise.resolve(e.image):e&&e.inProgress?Promise.resolve(null):(this.thumbnailImageCache.set(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ua(n,!0).forEach(function(e){da(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ua(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{inProgress:!0})),this.getThumbnailDataURL(t+1).then(this.createImageEl).then(function(e){return n.thumbnailImageCache.set(t,{inProgress:!1,image:e}),e}))}},{key:"getThumbnailDataURL",value:function(e){var o=this,a=document.createElement("canvas");return this.pdfViewer.pdfDocument.getPage(e).then(function(e){var t=e.getViewport({scale:1}),n=t.width,i=n/t.height;i<o.pageRatio?(a.height=Math.ceil(308/o.pageRatio),a.width=a.height*i):(a.width=308,a.height=Math.ceil(308/i));var r=a.width/n;return e.render({canvasContext:a.getContext("2d"),viewport:e.getViewport({scale:r})}).promise}).then(function(){return a.toDataURL()})}},{key:"createImageEl",value:function(e){var t=document.createElement("div");return t.classList.add("bp-thumbnail-image"),t.style.backgroundImage="url('".concat(e,"')"),t.style.width="".concat(154,"px"),t.style.height="".concat(this.thumbnailHeight,"px"),t}},{key:"createPageNumber",value:function(e){var t=document.createElement("div");return t.className="bp-thumbnail-page-number",t.textContent="".concat(e),t}},{key:"setCurrentPage",value:function(e){var t=parseInt(e,10);1<=t&&t<=this.pdfViewer.pagesCount&&(this.currentPage=t,this.applyCurrentPageSelection(),this.virtualScroller.scrollIntoView(t-1))}},{key:"applyCurrentPageSelection",value:function(){var t=this;this.currentThumbnails.forEach(function(e){parseInt(e.dataset.bpPageNum,10)===t.currentPage?e.classList.add(va):e.classList.remove(va)})}},{key:"toggle",value:function(){this.anchorEl&&(this.isOpen?this.toggleClose():this.toggleOpen())}},{key:"toggleOpen",value:function(){this.virtualScroller&&(this.isOpen=!0,this.virtualScroller.scrollIntoView(this.currentPage-1))}},{key:"toggleClose",value:function(){this.isOpen=!1}},{key:"resize",value:function(){this.virtualScroller&&this.virtualScroller.resize(this.getContainerHeight())}},{key:"getContainerHeight",value:function(){return this.anchorEl?this.anchorEl.parentNode.clientHeight:null}}]),n}(),ma="third-party/doc/".concat(b.V,"/"),ya=["".concat(ma,"pdf.min.js"),"".concat(ma,"pdf_viewer.min.js"),"".concat(ma,"exif.min.js")],ga=["".concat(ma,"pdf.worker.min.js")],wa=["".concat(ma,"pdf_viewer.min.css")];function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Oa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pa(e,t,n){return(Pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=La(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _a="doc-current-page-map",ja=[y.m.CLOSE,y.m.NAVIGATE,y.m.OPEN],Ta=0,Ha=1,Aa=2,Ra="pinch-page",Ia="pinching",Ma="doc-thumbnails-toggled-map",Va=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ca(Sa(t=function(e,t){return!t||"object"!==Ea(t)&&"function"!=typeof t?Sa(e):t}(this,La(i).call(this,e))),"encoding",void 0),t.emitMetric=t.emitMetric.bind(Sa(t)),t.handleAssetAndRepLoad=t.handleAssetAndRepLoad.bind(Sa(t)),t.handleFindBarClose=t.handleFindBarClose.bind(Sa(t)),t.onThumbnailSelectHandler=t.onThumbnailSelectHandler.bind(Sa(t)),t.pagechangingHandler=t.pagechangingHandler.bind(Sa(t)),t.pagerenderedHandler=t.pagerenderedHandler.bind(Sa(t)),t.pagesinitHandler=t.pagesinitHandler.bind(Sa(t)),t.pinchToZoomChangeHandler=t.pinchToZoomChangeHandler.bind(Sa(t)),t.pinchToZoomEndHandler=t.pinchToZoomEndHandler.bind(Sa(t)),t.pinchToZoomStartHandler=t.pinchToZoomStartHandler.bind(Sa(t)),t.print=t.print.bind(Sa(t)),t.setPage=t.setPage.bind(Sa(t)),t.throttledScrollHandler=t.getScrollHandler().bind(Sa(t)),t.toggleThumbnails=t.toggleThumbnails.bind(Sa(t)),t.zoomIn=t.zoomIn.bind(Sa(t)),t.zoomOut=t.zoomOut.bind(Sa(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(i,d["a"]),function(e,t,n){t&&Oa(e.prototype,t),n&&Oa(e,n)}(i,[{key:"setup",value:function(){if(!this.isSetup){if(Pa(La(i.prototype),"setup",this).call(this),this.docEl=this.createViewer(document.createElement("div")),this.docEl.classList.add("bp-doc"),this.docEl.tabIndex="0","Safari"===v.a.getName()&&this.docEl.classList.add("is-safari"),this.isMobile){var e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1, user-scalable=no"),document.getElementsByTagName("head")[0].appendChild(e)}this.viewerEl=this.docEl.appendChild(document.createElement("div")),this.viewerEl.classList.add("pdfViewer"),this.loadTimeout=18e4,this.startPageNum=this.getStartPage(this.startAt),this.options.enableThumbnailsSidebar&&(this.thumbnailsSidebarEl=document.createElement("div"),this.thumbnailsSidebarEl.className="".concat(b.B),this.thumbnailsSidebarEl.setAttribute("data-testid","thumbnails-sidebar"),this.thumbnailsSidebarEl.tabIndex=0,this.rootEl.insertBefore(this.thumbnailsSidebarEl,this.containerEl))}}},{key:"destroy",value:function(){if(this.unbindDOMListeners(),this.unbindEventBusListeners(),this.printBlob=null,this.printURL&&URL.revokeObjectURL(this.printURL),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.findBar&&this.findBar.destroy(),this.pdfLoadingTask)try{this.pdfLoadingTask.destroy()}catch(e){}this.pdfViewer&&(this.pdfViewer.cleanup(),this.pdfViewer.pdfDocument&&this.pdfViewer.pdfDocument.destroy()),this.printPopup&&this.printPopup.destroy(),this.thumbnailsSidebar&&this.thumbnailsSidebar.destroy(),this.thumbnailsSidebarEl&&(this.rootEl.classList.remove(b.C),this.thumbnailsSidebarEl.remove(),this.thumbnailsSidebarEl=null),Pa(La(i.prototype),"destroy",this).call(this)}},{key:"unbindEventBusListeners",value:function(){var n=this;if(this.pdfEventBus){var i=this.pdfEventBus._listeners||{};Object.keys(i).forEach(function(t){var e=i[t];Array.isArray(e)&&e.forEach(function(e){n.pdfEventBus.off(t,e)})})}}},{key:"getStartPage",value:function(e){var t,n=0<arguments.length&&void 0!==e?e:{},i=n.unit,r=n.value;return r&&i?"pages"!==i||(t=parseInt(r,10))&&!(t<1)?t:void 0:t}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.preload,r=void 0===i||i,o=e.content,a=void 0===o||o,s=this.options,l=s.file,c=s.representation,u=l&&l.watermark_info&&l.watermark_info.is_watermarked;if(n&&(this.prefetchAssets(ya,wa),this.prefetchAssets(ga,[],!0)),r&&!u){var h=Object(wn.h)(l,b.kb);if(h&&this.isRepresentationReady(h)){var d=h.content.url_template;this.api.get(this.createContentUrlWithAuthParams(d),{type:"blob"})}}if(a&&!u&&this.isRepresentationReady(c)){var f=c.content.url_template;this.api.get(this.createContentUrlWithAuthParams(f),{type:"document"})}}},{key:"showPreload",value:function(){var e=this.options.file,t=e&&e.watermark_info&&e.watermark_info.is_watermarked;if(!(!this.preloader||t||this.startPageNum&&1!==this.startPageNum||1!==this.getCachedPage())){var n=Object(wn.h)(e,b.kb);if(n&&this.getViewerOption("preload")&&Ko.a.getStatus(n)===b.Gb){var i=n.content.url_template,r=this.createContentUrlWithAuthParams(i);this.startPreloadTimer(),this.preloader.showPreload(r,this.containerEl)}}}},{key:"hidePreload",value:function(){this.preloader&&this.preloader.hidePreload()}},{key:"load",value:function(){Pa(La(i.prototype),"load",this).call(this),this.showPreload();var e=this.options.representation.content.url_template;return this.pdfUrl=this.createContentUrlWithAuthParams(e),Promise.all([this.loadAssets(ya,wa),this.getRepStatus().getPromise()]).then(this.handleAssetAndRepLoad).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(){this.setupPdfjs(),this.initViewer(this.pdfUrl),this.initFind(),this.initPrint(),Pa(La(i.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"handleFindBarClose",value:function(){this.docEl&&this.docEl.focus()}},{key:"find",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;this.findBar&&(this.setPage(1),this.findBar.setFindFieldElValue(e),this.findBar.findFieldHandler(),n&&this.findBar.open())}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(b.K),this.printPopup.printCheckmark.classList.remove(b.K))}},{key:"previousPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber+1)}},{key:"setPage",value:function(e){var t=parseInt(e,10);!t||t<1||t>this.pdfViewer.pagesCount||(this.pdfViewer.currentPageNumber=t,this.cachePage(this.pdfViewer.currentPageNumber),this.thumbnailsSidebar&&this.thumbnailsSidebar.setCurrentPage(t))}},{key:"getCachedPage",value:function(){var e=1;this.cache.has(_a)&&(e=this.cache.get(_a)[this.options.file.id]||e);return e}},{key:"cachePage",value:function(e){var t={};this.cache.has(_a)&&(t=this.cache.get(_a)),t[this.options.file.id]=e,this.cache.set(_a,t,!0)}},{key:"zoomIn",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:1,n=this.pdfViewer.currentScale;n=(1.1*n).toFixed(3),n=Math.min(10,n),0<(t-=1)&&n<10;);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:!0,canZoomIn:n<10}),this.pdfViewer.currentScaleValue=n}},{key:"zoomOut",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:1,n=this.pdfViewer.currentScale;n=(n/1.1).toFixed(3),n=Math.max(.1,n),0<(t-=1)&&.1<n;);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:.1<n,canZoomIn:!0}),this.pdfViewer.currentScaleValue=n}},{key:"onKeydown",value:function(e,t){switch(e){case"ArrowLeft":this.previousPage();break;case"ArrowRight":this.nextPage();break;case"[":this.previousPage();break;case"]":this.nextPage();break;default:return!!this.findBar&&this.findBar.onKeydown(t)}return!0}},{key:"emitMetric",value:function(e){var t=e.name,n=e.data;Pa(La(i.prototype),"emitMetric",this).call(this,t,n)}},{key:"initViewer",value:function(r){var o=this;this.bindDOMListeners(),this.startLoadTimer(),this.pdfEventBus=new this.pdfjsViewer.EventBus,this.pdfEventBus.on("pagechanging",this.pagechangingHandler),this.pdfEventBus.on("pagerendered",this.pagerenderedHandler),this.pdfEventBus.on("pagesinit",this.pagesinitHandler),this.pdfLinkService=new this.pdfjsViewer.PDFLinkService({eventBus:this.pdfEventBus,externalLinkRel:"noopener noreferrer nofollow",externalLinkTarget:this.pdfjsLib.LinkTarget.BLANK}),this.pdfFindController=new this.pdfjsViewer.PDFFindController({eventBus:this.pdfEventBus,linkService:this.pdfLinkService}),this.pdfViewer=this.initPdfViewer(),this.pdfLinkService.setViewer(this.pdfViewer);var e=this.options,t=e.file,n=e.location,i=t.size,a=t.watermark_info,s=Object(_.g)(n),l={},c={},u=v.a.hasFontIssue(),h=26214400<=i,d=a&&a.is_watermarked||!h,f="en-US"===n.locale?1048576:524288,p=this.getViewerOption("rangeChunkSize")||f;return v.a.isIOS()&&(l["If-None-Match"]="webkit-no-cache"),this.encoding=d?b.W.GZIP:void 0,this.encoding&&(c[b.mb]=this.encoding),this.pdfLoadingTask=this.pdfjsLib.getDocument({cMapPacked:!0,cMapUrl:s("third-party/doc/".concat(b.V,"/cmaps/")),disableCreateObjectURL:!1,disableFontFace:u,disableRange:d,disableStream:!0,httpHeaders:l,rangeChunkSize:p,url:Object(_.e)(r,c)}),this.pdfLoadingTask.promise.then(function(e){o.pdfLinkService.setDocument(e,r),o.pdfViewer.setDocument(e),o.shouldThumbnailsBeToggled()&&(o.rootEl.classList.add(b.C),o.emit(y.n.thumbnailsOpen),o.resize())}).catch(function(e){var t=e.status,n=e.message,i=202===t?new m.a(y.c.DELETED_REPS,"We’re sorry, the preview didn’t load. Please refresh the page.",{isRepDeleted:!0},n):new m.a(y.c.CONTENT_DOWNLOAD,"We’re sorry, the preview didn’t load. This document may be protected.",n);o.handleDownloadError(i,r)})}},{key:"initPdfViewer",value:function(){return this.initPdfViewerClass(this.pdfjsViewer.PDFViewer)}},{key:"initPdfViewerClass",value:function(e){var t=this.options,n=t.file,i=t.location,r=Object(_.g)(i),o=Object(wn.e)(n,b.ib)&&!this.getViewerOption("disableTextLayer"),a=this.isMobile?Ha:Aa;return new e({container:this.docEl,eventBus:this.pdfEventBus,findController:this.pdfFindController,imageResourcesPath:r("third-party/doc/".concat(b.V,"/images/")),linkService:this.pdfLinkService,maxCanvasPixels:this.isMobile?2949120:-1,textLayerMode:o?a:Ta})}},{key:"initFind",value:function(){this.findBarEl=this.containerEl.appendChild(document.createElement("div")),this.findBarEl.classList.add(b.f);var e=Object(wn.e)(this.options.file,b.ib);e&&!this.getViewerOption("disableFindBar")&&(this.findBar=new Go(this.findBarEl,this.pdfFindController,this.pdfEventBus,e),this.findBar.addListener(y.n.metric,this.emitMetric),this.findBar.addListener("close",this.handleFindBarClose))}},{key:"resize",value:function(){if(this.pdfViewer&&this.somePageRendered){var e=this.pdfViewer.currentPageNumber;this.pdfViewer.currentScaleValue=this.pdfViewer.currentScaleValue||"auto",this.pdfViewer.update(),this.setPage(e),this.thumbnailsSidebar&&this.thumbnailsSidebar.resize(),Pa(La(i.prototype),"resize",this).call(this)}else this.preloader&&this.preloader.resize()}},{key:"startPreloadTimer",value:function(){var e=this.options.file,t=sr.a.createTag(e.id,y.d.preloadTime);sr.a.start(t)}},{key:"stopPreloadTimer",value:function(){var e=this.options.file,t=sr.a.createTag(e.id,y.d.preloadTime),n=sr.a.get(t);n&&n.start&&(sr.a.stop(t),this.emitMetric({name:y.d.previewPreloadEvent,data:n.elapsed}),sr.a.reset(t))}},{key:"onPreload",value:function(){this.options.logger.setPreloaded(),this.stopPreloadTimer(),this.resetLoadTimeout()}},{key:"setupPdfjs",value:function(){this.pdfjsLib=window.pdfjsLib,this.pdfjsViewer=window.pdfjsViewer;var e=this.options.location,t=Object(_.g)(e)("third-party/doc/".concat(b.V,"/pdf.worker.min.js"));this.pdfjsLib.GlobalWorkerOptions.workerSrc=t}},{key:"initPrint",value:function(){this.printPopup=new jn(this.rootEl);var e=document.createElement("div");e.className="bp-print-check ".concat(b.K),e.innerHTML=f.r.trim();var t=document.createElement("div");t.classList.add(b.F),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPageIds",value:function(){var e=this.containerEl.querySelectorAll(".page");[].forEach.call(e,function(e){var t=e.dataset.pageNumber;t&&(e.id="bp-page-".concat(t))})}},{key:"fetchPrintBlob",value:function(e){var t=this;return this.api.get(e,{type:"blob"}).then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=v.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}},{key:"loadUI",value:function(){this.controls=new h(this.containerEl),this.pageControls=new ee(this.controls,this.docEl),this.pageControls.addListener("pagechange",this.setPage),this.bindControlListeners()}},{key:"bindDOMListeners",value:function(){this.docEl.addEventListener("scroll",this.throttledScrollHandler),this.hasTouch&&(this.docEl.addEventListener("touchstart",this.pinchToZoomStartHandler),this.docEl.addEventListener("touchmove",this.pinchToZoomChangeHandler),this.docEl.addEventListener("touchend",this.pinchToZoomEndHandler))}},{key:"unbindDOMListeners",value:function(){this.docEl&&(this.docEl.removeEventListener("scroll",this.throttledScrollHandler),this.hasTouch&&(this.docEl.removeEventListener("touchstart",this.pinchToZoomStartHandler),this.docEl.removeEventListener("touchmove",this.pinchToZoomChangeHandler),this.docEl.removeEventListener("touchend",this.pinchToZoomEndHandler)))}},{key:"bindControlListeners",value:function(){this.options.enableThumbnailsSidebar&&this.controls.add("Toggle thumbnails",this.toggleThumbnails,"bp-toggle-thumbnails-icon",f.u),this.controls.add("Zoom out",this.zoomOut,"bp-doc-zoom-out-icon",f.w),this.controls.add("Zoom in",this.zoomIn,"bp-doc-zoom-in-icon",f.v),this.pageControls.add(this.pdfViewer.currentPageNumber,this.pdfViewer.pagesCount),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",f.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",f.m)}},{key:"pagesinitHandler",value:function(){this.pdfViewer.currentScaleValue="auto",this.loadUI();var e=this.pdfViewer,t=e.pagesCount,n=e.currentScale,i=this.startPageNum||this.getCachedPage();this.setPage(i),this.docEl.classList.add(b.O),this.loaded||(this.loaded=!0,this.emit(y.n.load,{encoding:this.encoding,numPages:t,endProgress:!1,scale:n}),this.setupPageIds())}},{key:"initThumbnails",value:function(){this.thumbnailsSidebar=new ba(this.thumbnailsSidebarEl,this.pdfViewer),this.thumbnailsSidebar.init({currentPage:this.pdfViewer.currentPageNumber,isOpen:this.shouldThumbnailsBeToggled(),onSelect:this.onThumbnailSelectHandler})}},{key:"onThumbnailSelectHandler",value:function(e){this.emitMetric({name:y.m.NAVIGATE,data:e}),this.setPage(e)}},{key:"pagerenderedHandler",value:function(e){var t=e.pageNumber;t&&(this.emit("pagerender",t),this.emit("scale",{scale:this.pdfViewer.currentScale,pageNum:t}),this.somePageRendered||(this.hidePreload(),this.emit(y.n.progressEnd),this.somePageRendered=!0,this.options.enableThumbnailsSidebar&&(this.initThumbnails(),this.resize())))}},{key:"pagechangingHandler",value:function(e){var t=e.pageNumber;this.pageControls.updateCurrentPage(t),this.thumbnailsSidebar&&this.thumbnailsSidebar.setCurrentPage(t),this.loaded&&this.cachePage(t),this.emit("pagefocus",t)}},{key:"handleFullscreenEnter",value:function(){this.pdfViewer.currentScaleValue="page-fit",Pa(La(i.prototype),"handleFullscreenEnter",this).call(this)}},{key:"handleFullscreenExit",value:function(){this.pdfViewer.currentScaleValue="auto",Pa(La(i.prototype),"handleFullscreenExit",this).call(this)}},{key:"getScrollHandler",value:function(){var e=this;return o()(function(){e.scrollTimer&&clearTimeout(e.scrollTimer),e.scrollStarted||(e.emit("scrollstart",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!0),e.scrollTimer=setTimeout(function(){e.emit("scrollend",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!1},e.isMobile?500:250)},200)}},{key:"pinchToZoomStartHandler",value:function(e){if(!(e.touches.length<2)){e.preventDefault(),e.stopPropagation(),this.isPinching=!0;var t=e.pageX&&e.pageY?[e.pageX,e.pageY]:Object(_.p)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY),n=this.pdfViewer._getVisiblePages();this.pinchPage=Object(_.m)(this.docEl.scrollLeft+t[0],this.docEl.scrollTop+t[1],n),this.scaledXOffset=this.docEl.scrollLeft-this.pinchPage.offsetLeft+t[0],this.scaledYOffset=this.docEl.scrollTop-this.pinchPage.offsetTop+t[1]+15,this.pinchPage.style["transform-origin"]="".concat(this.scaledXOffset,"px ").concat(this.scaledYOffset,"px"),this.originalXOffset=t[0],this.originalYOffset=t[1],this.originalDistance=Object(_.n)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY)}}},{key:"pinchToZoomChangeHandler",value:function(e){if(this.isPinching){var t=e.scale?e.scale:Object(_.n)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY)/this.originalDistance,n=this.pdfViewer.currentScale*t;1===t||Math.abs(this.pinchScale-t)<.01||10<=n||n<=.1||3<t||t<.25||(this.pinchScale=t,this.pinchPage.classList.add(Ra),this.docEl.firstChild.classList.add(Ia),this.pinchPage.style.transform="scale(".concat(this.pinchScale,")"))}}},{key:"pinchToZoomEndHandler",value:function(){this.pinchPage&&this.isPinching&&1!==this.pinchScale&&(this.pdfViewer.currentScaleValue=this.pdfViewer.currentScale*this.pinchScale,this.pinchPage.style.transform=null,this.pinchPage.style["transform-origin"]=null,this.pinchPage.classList.remove(Ra),this.docEl.firstChild.classList.remove(Ia),this.docEl.scroll(this.scaledXOffset*this.pinchScale-this.originalXOffset,this.scaledYOffset*this.pinchScale-this.originalYOffset+this.pinchPage.offsetTop),this.isPinching=!1,this.originalDistance=0,this.pinchScale=1,this.pinchPage=null)}},{key:"toggleThumbnails",value:function(){var e=this;if(this.thumbnailsSidebar){this.thumbnailsSidebar.toggle();var t,n,i=this.pdfViewer.pagesCount;this.cacheThumbnailsToggledState(this.thumbnailsSidebar.isOpen),n=this.thumbnailsSidebar.isOpen?(this.rootEl.classList.remove(b.z),this.rootEl.classList.add(b.C),this.rootEl.classList.add(b.D),t=y.m.OPEN,y.n.thumbnailsOpen):(this.rootEl.classList.remove(b.C),this.rootEl.classList.add(b.z),this.rootEl.classList.add(b.A),t=y.m.CLOSE,y.n.thumbnailsClose),this.emitMetric({name:t,data:i}),this.emit(n),setTimeout(function(){e.resize(),e.rootEl.classList.remove(b.A),e.rootEl.classList.remove(b.D)},301)}}},{key:"getMetricsWhitelist",value:function(){return ja}},{key:"handleAnnotatorEvents",value:function(e){if(Pa(La(i.prototype),"handleAnnotatorEvents",this).call(this,e),this.thumbnailsSidebarEl)switch(e.event){case b.a.modeEnter:this.thumbnailsSidebarEl.classList.add("bp-thumbnails-container--dark");break;case b.a.modeExit:this.thumbnailsSidebarEl.classList.remove("bp-thumbnails-container--dark")}}},{key:"getCachedThumbnailsToggledState",value:function(){return(this.cache.get(Ma)||{})[this.options.file.id]}},{key:"cacheThumbnailsToggledState",value:function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ka(n,!0).forEach(function(e){Ca(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ka(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.cache.get(Ma)||{},Ca({},this.options.file.id,!!e));this.cache.set(Ma,t,!0)}},{key:"shouldThumbnailsBeToggled",value:function(){if(!this.options.enableThumbnailsSidebar)return!1;var e=this.getCachedThumbnailsToggledState(),t=(this.pdfViewer&&this.pdfViewer.pdfDocument).numPages,n=e;return!1!==n&&(n=!0),n&&1<(void 0===t?0:t)}}]),i}(),Da=n(60);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wa=/pdfWidth:([0-9.]+)pts,pdfHeight:([0-9.]+)pts,numPages:([0-9]+)/,Ga='<div class="'.concat(b.t,'"></div>'),Ka=function(){function n(e){var a,t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).api;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),qa(Na(a=function(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?Na(e):t}(this,za(n).call(this))),"api",new Da.a),qa(Na(a),"containerEl",void 0),qa(Na(a),"imageEl",void 0),qa(Na(a),"maxZoomScale",b.gb),qa(Na(a),"overlayEl",void 0),qa(Na(a),"pdfData",void 0),qa(Na(a),"preloadEl",void 0),qa(Na(a),"previewUI",void 0),qa(Na(a),"srcUrl",void 0),qa(Na(a),"wrapperClassName",void 0),qa(Na(a),"wrapperEl",void 0),qa(Na(a),"cleanupPreload",function(){a.wrapperEl&&(a.wrapperEl.parentNode.removeChild(a.wrapperEl),a.wrapperEl=void 0),a.preloadEl=void 0,a.imageEl=void 0,a.srcUrl&&URL.revokeObjectURL(a.srcUrl)}),qa(Na(a),"loadHandler",function(){return a.preloadEl&&a.imageEl?a.readEXIF(a.imageEl).then(function(e){a.pdfData=e;var t=a.getScaledWidthAndHeight(e),n=t.scaledWidth,i=t.scaledHeight;a.scaleAndShowPreload(n,i,Math.min(e.numPages,500))}).catch(function(){var e=a.imageEl,t=e.naturalWidth,n=e.naturalHeight,i=a.getScaledDimensions(t,n),r=i.scaledWidth,o=i.scaledHeight;a.scaleAndShowPreload(r,o,2)}):Promise.resolve()}),a.api=t,a.previewUI=e,a.wrapperClassName=b.u,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(n,D.a),function(e,t,n){t&&Fa(e.prototype,t),n&&Fa(e,n)}(n,[{key:"showPreload",value:function(e,t){var n=this;return this.containerEl=t,this.api.get(e,{type:"blob"}).then(_.r).then(function(e){n.checkDocumentLoaded()||(n.srcUrl=URL.createObjectURL(e),n.wrapperEl=document.createElement("div"),n.wrapperEl.className=n.wrapperClassName,n.wrapperEl.innerHTML='\n                <div class="'.concat(b.q," ").concat(b.L,'">\n                    <img class="').concat(b.r,'" src="').concat(n.srcUrl,'" />\n                    <div class="').concat(b.r," ").concat(b.s,'">\n                        ').concat(Ga,"\n                    </div>\n                </div>\n            ").trim(),n.containerEl.appendChild(n.wrapperEl),n.preloadEl=n.wrapperEl.querySelector(".".concat(b.q)),n.imageEl=n.preloadEl.querySelector("img.".concat(b.r)),n.overlayEl=n.preloadEl.querySelector(".".concat(b.s)),n.bindDOMListeners())})}},{key:"scaleAndShowPreload",value:function(e,t,n){if(!this.checkDocumentLoaded()){Object(_.F)(this.imageEl,e,t),Object(_.F)(this.overlayEl,e,t);for(var i=0;i<n-1;i+=1){var r=document.createElement("div");r.className=b.r,r.innerHTML=Ga,Object(_.F)(r,e,t),this.preloadEl.appendChild(r)}this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(b.L),this.emit("preload")}}},{key:"hidePreload",value:function(){this.wrapperEl&&(this.unbindDOMListeners(),this.restoreScrollPosition(),this.wrapperEl.classList.add(b.Q),this.wrapperEl.addEventListener("transitionend",this.cleanupPreload),this.wrapperEl.addEventListener("scroll",this.cleanupPreload))}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("load",this.loadHandler)}},{key:"unbindDOMListeners",value:function(){this.imageEl.removeEventListener("load",this.loadHandler)}},{key:"restoreScrollPosition",value:function(){var e=this.wrapperEl.scrollTop,t=this.wrapperEl.parentNode.querySelector(".bp-doc");t&&0<e&&(t.scrollTop=e)}},{key:"getScaledWidthAndHeight",value:function(e){var t=e.pdfWidth,n=e.pdfHeight,i=this.getScaledDimensions(t,n);return{scaledWidth:i.scaledWidth,scaledHeight:i.scaledHeight}}},{key:"resize",value:function(){if(this.preloadEl&&(this.pdfData||this.imageEl)){var e;if(this.pdfData)e=this.getScaledWidthAndHeight(this.pdfData);else{var t=this.imageEl,n=t.naturalWidth,i=t.naturalHeight;e=this.getScaledDimensions(n,i)}for(var r=e,o=r.scaledWidth,a=r.scaledHeight,s=this.preloadEl.getElementsByClassName(b.r),l=0;l<s.length;l+=1)Object(_.F)(s[l],o,a)}}},{key:"getScaledDimensions",value:function(e,t){var n=this.wrapperEl,i=n.clientWidth,r=n.clientHeight,o=(i-b.hb)/e,a=(r-b.fb)/t,s=t<e?Math.min(a,o):o;return this.maxZoomScale&&(s=Math.min(this.maxZoomScale,s)),{scaledWidth:Math.floor(s*e),scaledHeight:Math.floor(s*t)}}},{key:"readEXIF",value:function(h){return new Promise(function(c,u){try{EXIF.getData(h,function(){var e=EXIF.getTag(h,"UserComment").map(function(e){return String.fromCharCode(e)}).join(""),t=Wa.exec(e);if(t&&4===t.length){var n=parseInt(t[1],10)*b.eb,i=parseInt(t[2],10)*b.eb,r=parseInt(t[3],10);if(r<=0)u(new Error("EXIF num pages data is invalid"));else{var o=n/i,a=h.naturalWidth/h.naturalHeight;if(.025<Math.abs(o-a)){var s=i/n;if(.025<Math.abs(s-a))return void u(new Error("EXIF PDF width and height are invalid"));var l=n;n=i,i=l}c({pdfWidth:n,pdfHeight:i,numPages:r})}}else u(new Error("No valid EXIF data found"))})}catch(e){u(new Error("Error reading EXIF data"))}})}},{key:"checkDocumentLoaded",value:function(){return!!this.previewUI.previewContainer.classList.contains(b.U)&&(this.hidePreload(),!0)}}]),n}();n(249);function Xa(e){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qa(e,t){return!t||"object"!==Xa(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ya(e,t,n){return(Ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ja(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ja(e){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var es=function(){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Qa(this,Ja(n).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(n,Va),function(e,t,n){t&&Za(e.prototype,t),n&&Za(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(Ya(Ja(n.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-document"),this.preloader=new Ka(this.previewUI,{api:this.api}),this.preloader.addListener("preload",this.onPreload.bind(this)))}},{key:"destroy",value:function(){Ya(Ja(n.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"onKeydown",value:function(e,t){return"Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e?(this.zoomOut(),!0):"ArrowUp"===e&&B.a.isFullscreen(this.containerEl)?(this.previousPage(),!0):"ArrowDown"===e&&B.a.isFullscreen(this.containerEl)?(this.nextPage(),!0):Ya(Ja(n.prototype),"onKeydown",this).call(this,e,t)}}]),n}();function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function is(e,t){return!t||"object"!==ts(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function rs(e,t,n){return(rs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=os(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function as(e,t){return(as=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ss=b.bb.FIELD_HASXREFS,ls=b.bb.TEMPLATE_AUTOCAD,cs=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=is(this,os(n).call(this,e))).api=e.api,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&as(e,t)}(n,es),function(e,t,n){t&&ns(e.prototype,t),n&&ns(e,n)}(n,[{key:"load",value:function(){rs(os(n.prototype),"load",this).call(this),this.checkForXrefs()}},{key:"checkForXrefs",value:function(){var t=this,e=this.options.file,n=e.extension,i=e.id;this.api.metadata.getXrefsMetadata(i,ls,this.options).then(function(e){e[ss]&&(t.options.ui.showNotification("This preview has references you cannot view. Open the file in its native application.",null,!0),t.emitMetric({name:y.g,data:n}))})}}]),n}();function us(e){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e,t){return(ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bs=function(){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),vs(fs(n=function(e,t){return!t||"object"!==us(t)&&"function"!=typeof t?fs(e):t}(this,ds(i).call(this,e,t))),"maxZoomScale",0),vs(fs(n),"preloadEl",void 0),vs(fs(n),"previewUI",void 0),vs(fs(n),"wrapperClassName",void 0),n.wrapperClassName=b.v,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ps(e,t)}(i,Ka),function(e,t,n){t&&hs(e.prototype,t),n&&hs(e,n)}(i,[{key:"scaleAndShowPreload",value:function(e,t){this.checkDocumentLoaded()||(Object(_.F)(this.imageEl,e,t),Object(_.F)(this.overlayEl,e,t),this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(b.L),this.emit("preload"))}}]),i}();n(250);function ms(e){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ws(e,t,n){return(ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Es(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ks(e,t){return(ks=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Os=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==ms(t)&&"function"!=typeof t?gs(e):t}(this,Es(n).call(this,e))).mobileScrollHandler=t.mobileScrollHandler.bind(gs(t)),t.pagesinitHandler=t.pagesinitHandler.bind(gs(t)),t.pagechangeHandler=t.pagechangeHandler.bind(gs(t)),t.throttledWheelHandler=t.getWheelHandler().bind(gs(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ks(e,t)}(n,Va),function(e,t,n){t&&ys(e.prototype,t),n&&ys(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(ws(Es(n.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-presentation"),this.preloader=new bs(this.previewUI,{api:this.api}),this.preloader.addListener("preload",this.onPreload.bind(this)))}},{key:"destroy",value:function(){ws(Es(n.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"setPage",value:function(e){this.checkOverflow();var t=this.docEl.querySelectorAll(".page");[].forEach.call(t,function(e){e.classList.add(b.L)}),ws(Es(n.prototype),"setPage",this).call(this,e),this.docEl.querySelector('[data-page-number="'.concat(this.pdfViewer.currentPageNumber,'"]')).classList.remove(b.L),this.pdfViewer.update()}},{key:"onKeydown",value:function(e,t){return"ArrowUp"===e?(this.previousPage(),!0):"ArrowDown"===e?(this.nextPage(),!0):ws(Es(n.prototype),"onKeydown",this).call(this,e,t)}},{key:"checkOverflow",value:function(){var e=this.docEl,t=this.docEl.querySelector('[data-page-number="'.concat(this.pdfViewer.currentPageNumber,'"]')),n=t.clientWidth>e.clientWidth,i=t.clientHeight-30>e.clientHeight;return e.classList.remove("overflow-x"),e.classList.remove("overflow-y"),n&&e.classList.add("overflow-x"),i&&e.classList.add("overflow-y"),n||i}},{key:"initViewer",value:function(e){ws(Es(n.prototype),"initViewer",this).call(this,e),this.overwritePdfViewerBehavior()}},{key:"bindDOMListeners",value:function(){ws(Es(n.prototype),"bindDOMListeners",this).call(this),this.docEl.addEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.addEventListener("touchstart",this.mobileScrollHandler),this.docEl.addEventListener("touchmove",this.mobileScrollHandler),this.docEl.addEventListener("touchend",this.mobileScrollHandler))}},{key:"unbindDOMListeners",value:function(){ws(Es(n.prototype),"unbindDOMListeners",this).call(this),this.docEl.removeEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.removeEventListener("touchstart",this.mobileScrollHandler),this.docEl.removeEventListener("touchmove",this.mobileScrollHandler),this.docEl.removeEventListener("touchend",this.mobileScrollHandler))}},{key:"mobileScrollHandler",value:function(e){if(!(this.checkOverflow()||this.isPinching||1<e.touches.length))if("touchstart"===e.type)this.scrollStart=e.changedTouches[0].clientY;else if("touchmove"===e.type)e.preventDefault();else{var t=e.changedTouches[0].clientY;if(!this.scrollStart||!t)return;this.scrollStart>t+5?this.nextPage():this.scrollStart<t-5&&this.previousPage(),this.scrollStart=null}}},{key:"pagesinitHandler",value:function(){[].slice.call(this.docEl.querySelectorAll(".pdfViewer .page"),0).forEach(function(e){"1"!==e.getAttribute("data-page-number")&&e.classList.add(b.L)}),ws(Es(n.prototype),"pagesinitHandler",this).call(this),this.pdfViewer.currentScaleValue="page-fit"}},{key:"pagechangeHandler",value:function(e){this.setPage(e.pageNumber),ws(Es(n.prototype),"pagechangeHandler",this).call(this,e)}},{key:"getWheelHandler",value:function(){var t=this;return o()(function(e){0===e.deltaY||0!==e.deltaX||t.checkOverflow()||(0<e.deltaY?t.nextPage():e.deltaY<0&&t.previousPage())},200)}},{key:"overwritePdfViewerBehavior",value:function(){var n=this;this.pdfViewer.scrollPageIntoView=function(e){if(n.loaded){var t=e;"number"!=typeof t&&(t=e.pageNumber||1),n.setPage(t)}},this.pdfViewer._getVisiblePages=function(){var e=n.pdfViewer._pages[n.pdfViewer._currentPageNumber-1];return{first:e,last:e,views:[{id:e.id,view:e}]}}}}]),n}();function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ps(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ls(e,t){return!t||"object"!==Ss(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function xs(e){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _s=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ls(this,xs(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(e,es),function(e,t,n){t&&Ps(e.prototype,t),n&&Ps(e,n)}(e,[{key:"initPdfViewer",value:function(){return this.initPdfViewerClass(this.pdfjsViewer.PDFSinglePageViewer)}}]),e}();function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hs(e,t){return!t||"object"!==js(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function As(e,t,n){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rs(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Rs(e){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Is(e,t){return(Is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ms=[{NAME:"Presentation",CONSTRUCTOR:Os,REP:"pdf",EXT:["gslide","gslides","odp","ppt","pptx","key"]},{NAME:"AutoCAD",CONSTRUCTOR:cs,REP:"pdf",EXT:["dwg"]},{NAME:"Document",CONSTRUCTOR:es,REP:"pdf",EXT:Rn},{NAME:"Presentation",CONSTRUCTOR:Os,REP:"pdf",EXT:Rn},{NAME:"SinglePage",CONSTRUCTOR:_s,REP:"pdf",EXT:Rn},{NAME:"Document",CONSTRUCTOR:es,REP:b.db,EXT:["pdf","lcdpdf"]},{NAME:"Presentation",CONSTRUCTOR:Os,REP:b.db,EXT:["pdf","lcdpdf"]},{NAME:"SinglePage",CONSTRUCTOR:_s,REP:b.db,EXT:["pdf","lcdpdf"]}],Vs=new(function(){function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=Hs(this,Rs(o).call(this))).viewers=Ms,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Is(e,t)}(o,a),function(e,t,n){t&&Ts(e.prototype,t),n&&Ts(e,n)}(o,[{key:"determineRepresentation",value:function(e,t){var n,i=As(Rs(o.prototype),"determineRepresentation",this).call(this,e,t),r=Ko.a.getStatus(i);return"pdf"===e.extension&&"pdf"===i.representation&&r!==b.Gb&&(n=Object(wn.h)(e,b.db)),n||i}}]),o}());function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qs='\n    <div class="box3d-animation-clip" data-type="clip">\n        <div class="box3d-animation-clip-icon"></div>\n        <div class="box3d-animation-clip-value"></div>\n    </div>'.trim(),Ws=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Us(zs(e=function(e,t){return!t||"object"!==Ds(t)&&"function"!=typeof t?zs(e):t}(this,Fs(t).call(this))),"pullupEl",void 0),Us(zs(e),"uiRegistry",void 0),Us(zs(e),"clipEls",void 0),e.pullupEl=it(),e.pullupEl.classList.add("box3d-animation-clip-pullup"),e.uiRegistry=new at,e.uiRegistry.registerItem("settings-pullup-el",e.pullupEl),e.clipEls={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(t,D.a),function(e,t,n){t&&Bs(e.prototype,t),n&&Bs(e,n)}(t,[{key:"addClip",value:function(e,t,n){var i=Object(_.i)(this.pullupEl,qs).firstChild,r=this.formatDurationStr(n),o=i.querySelector(".box3d-animation-clip-value");o.setAttribute("data-value",e),o.textContent="".concat(r," ").concat(t),o.addEventListener("click",this.handleClipClick.bind(this)),this.pullupEl.appendChild(i),this.clipEls[e]=i}},{key:"destroy",value:function(){this.pullupEl=null,this.uiRegistry.unregisterAll(),this.uiRegistry=null}},{key:"formatDurationStr",value:function(e){var t=Math.floor(e),n=Math.floor(t/3600),i=this.padLeft(n.toString(),2);t-=3600*n;var r=Math.floor(t/60),o=this.padLeft(r.toString(),2);t-=60*r;var a=this.padLeft(t.toString(),2);return"".concat(i,":").concat(o,":").concat(a)}},{key:"getClipCount",value:function(){return Object.keys(this.clipEls).length}},{key:"getClipId",value:function(e){return Object.keys(this.clipEls)[e]}},{key:"handleClipClick",value:function(e){if(e.target){var t=e.target.getAttribute("data-value");this.selectClip(t)}}},{key:"hide",value:function(){this.pullupEl.classList.add(Ge)}},{key:"padLeft",value:function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}},{key:"reset",value:function(){0<this.getClipCount()&&this.selectClip(this.getClipId(0))}},{key:"selectClip",value:function(t){var n=this;Object.keys(this.clipEls).forEach(function(e){n.clipEls[e].querySelector(".box3d-animation-clip-icon").innerHTML=e===t?f.f:""}),this.emit(Re,t)}},{key:"show",value:function(){this.pullupEl.classList.remove(Ge)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(Ge)}}]),t}();function Gs(e){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ks(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Xs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ks(n,!0).forEach(function(e){el(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ks(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Zs(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Js(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $s(e,t){return($s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tl=[{text:Ze,callback:"onRenderModeSelected",args:[Ze]},{text:Qe,callback:"onRenderModeSelected",args:[Qe]},{text:Ye,callback:"onRenderModeSelected",args:[Ye]},{text:Je,callback:"onRenderModeSelected",args:[Je]},{text:$e,callback:"onRenderModeSelected",args:[$e]}],nl=[{text:"Perspective",callback:"onProjectionSelected",args:[Ke]},{text:"Orthographic",callback:"onProjectionSelected",args:[Xe]}],il=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),el(Js(e=function(e,t){return!t||"object"!==Gs(t)&&"function"!=typeof t?Js(e):t}(this,Ys(t).call(this))),"renderModeEl",void 0),el(Js(e),"renderModeListEl",void 0),el(Js(e),"showWireframesEl",void 0),el(Js(e),"showGridEl",void 0),el(Js(e),"showSkeletonsEl",void 0),el(Js(e),"projectionEl",void 0),el(Js(e),"projectionListEl",void 0),el(Js(e),"uiRegistry",void 0),e.uiRegistry=new at,e.createUi(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$s(e,t)}(t,D.a),function(e,t,n){t&&Qs(e.prototype,t),n&&Qs(e,n)}(t,[{key:"convertToValidCallback",value:function(e){var t,n=e,i=n.callback;"string"==typeof i&&this[i]&&(n.callback=(t=this[i]).bind.apply(t,[this].concat(Zs(n.args))))}},{key:"createUi",value:function(){var n=this;this.pullupEl=it(),this.uiRegistry.registerItem("settings-pullup-el",this.pullupEl);var e=ot("Render Mode","Lit",tl.map(function(e){var t=Xs({},e);return n.convertToValidCallback(t),t}));this.renderModeEl=e.querySelector("button"),this.pullupEl.appendChild(e);var t=rt();this.showGridEl=nt();var i=tt("Show grid");t.appendChild(this.showGridEl),t.appendChild(i),this.pullupEl.appendChild(t),this.showGridEl.addEventListener("click",function(){n.onShowGridToggled()});var r=rt();this.showWireframesEl=nt();var o=tt("Show wireframes");r.appendChild(this.showWireframesEl),r.appendChild(o),this.pullupEl.appendChild(r),this.showWireframesEl.addEventListener("click",function(){n.onShowWireframesToggled()});var a=rt();this.showSkeletonsEl=nt();var s=tt("Show skeletons");a.appendChild(this.showSkeletonsEl),a.appendChild(s),this.pullupEl.appendChild(a),this.showSkeletonsEl.addEventListener("click",function(){n.onShowSkeletonsToggled()});var l=ot("Camera Projection","Perspective",nl.map(function(e){var t=Xs({},e);return n.convertToValidCallback(t),t}));this.projectionEl=l.querySelector("button"),this.pullupEl.appendChild(l),this.renderModeListEl=e.querySelector(".".concat(b.p)),this.projectionListEl=l.querySelector(".".concat(b.p)),this.uiRegistry.registerItem("settings-render-mode-selector-label",this.renderModeEl,"click",function(){n.projectionListEl.classList.remove(b.R)}),this.uiRegistry.registerItem("settings-projection-mode-selector-label",this.projectionEl,"click",function(){n.renderModeListEl.classList.remove(b.R)});var c=rt("Rotate Model"),u=this.createAxisWidget();this.pullupEl.appendChild(c),this.pullupEl.appendChild(u)}},{key:"createAxisWidget",value:function(){var e=this,t=rt();return t.appendChild(this.createRotationAxis("x",function(){return e.onAxisRotationSelected("x",-1)},function(){return e.onAxisRotationSelected("x",1)})),t.appendChild(this.createRotationAxis("y",function(){return e.onAxisRotationSelected("y",-1)},function(){return e.onAxisRotationSelected("y",1)})),t.appendChild(this.createRotationAxis("z",function(){return e.onAxisRotationSelected("z",1)},function(){return e.onAxisRotationSelected("z",-1)})),t}},{key:"createRotationAxis",value:function(e,t,n){var i=document.createElement("div");i.classList.add("box3d-settings-axis-widget"),i.classList.add("box3d-settings-axis-widget-".concat(e));var r=document.createElement("span");r.classList.add("box3d-setting-axis-rotate"),r.classList.add("box3d-setting-axis-rotate-left"),this.uiRegistry.registerItem("minus-".concat(e,"-axis-icon"),r,"click",t),i.appendChild(r);var o=document.createElement("span");o.textContent=e.toUpperCase(),i.appendChild(o);var a=document.createElement("span");return a.classList.add("box3d-setting-axis-rotate"),a.classList.add("box3d-setting-axis-rotate-right"),this.uiRegistry.registerItem("plus-".concat(e,"-axis-icon"),a,"click",n),i.appendChild(a),i}},{key:"onRenderModeSelected",value:function(e){this.emit(Ie,e)}},{key:"onAxisRotationSelected",value:function(e,t){var n={};n[e]=90*t,this.emit(Ae,n)}},{key:"onProjectionSelected",value:function(e){this.emit(Me,e)}},{key:"onShowSkeletonsToggled",value:function(){this.emit(Ve,this.showSkeletonsEl.checked)}},{key:"hideSkeletons",value:function(){this.showSkeletonsEl.checked=!1,this.onShowSkeletonsToggled()}},{key:"onShowWireframesToggled",value:function(){this.emit(De,this.showWireframesEl.checked)}},{key:"onShowGridToggled",value:function(){this.emit(Be,this.showGridEl.checked)}},{key:"hideWireframes",value:function(){this.showWireframesEl.checked=!1,this.onShowWireframesToggled()}},{key:"showGrid",value:function(){this.showGridEl.checked=!0,this.onShowGridToggled()}},{key:"reset",value:function(){this.hideWireframes(),this.hideSkeletons(),this.showGrid()}},{key:"setCurrentRenderMode",value:function(e){this.renderModeEl.textContent=e}},{key:"setCurrentProjectionMode",value:function(e){this.projectionEl.textContent=e}},{key:"setGridVisible",value:function(e){this.showGridEl.checked=e}},{key:"show",value:function(){this.pullupEl.classList.remove(Ge)}},{key:"hide",value:function(){this.pullupEl.classList.add(Ge),this.projectionListEl.classList.remove(b.R),this.renderModeListEl.classList.remove(b.R)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(Ge),this.projectionListEl.classList.remove(b.R),this.renderModeListEl.classList.remove(b.R)}},{key:"destroy",value:function(){this.uiRegistry.unregisterAll(),this.uiRegistry=null,this.renderModeEl=null,this.showWireframesEl=null,this.showGridEl=null,this.showSkeletonsEl=null,this.projectionEl=null,this.pullupEl=null}}]),t}();function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ol(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function al(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sl(e,t,n){return(sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ll(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cl(e,t){return(cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hl=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ul(al(t=function(e,t){return!t||"object"!==rl(t)&&"function"!=typeof t?al(e):t}(this,ll(n).call(this,e))),"animationClipsPullup",void 0),ul(al(t),"settingsPullup",void 0),ul(al(t),"isAnimationPlaying",!1),ul(al(t),"resetButtonEl",void 0),ul(al(t),"animationToggleEl",void 0),ul(al(t),"settingsButtonEl",void 0),ul(al(t),"animationClipButtonEl",void 0),t.animationClipsPullup=new Ws(e),t.settingsPullup=new il,t.handleSelectAnimationClip=t.handleSelectAnimationClip.bind(al(t)),t.handleToggleAnimation=t.handleToggleAnimation.bind(al(t)),t.handleToggleAnimationClips=t.handleToggleAnimationClips.bind(al(t)),t.handleToggleSettings=t.handleToggleSettings.bind(al(t)),t.handleSetRenderMode=t.handleSetRenderMode.bind(al(t)),t.handleSetSkeletonsVisible=t.handleSetSkeletonsVisible.bind(al(t)),t.handleSetWireframesVisible=t.handleSetWireframesVisible.bind(al(t)),t.handleSetGridVisible=t.handleSetGridVisible.bind(al(t)),t.handleSetCameraProjection=t.handleSetCameraProjection.bind(al(t)),t.handleAxisRotation=t.handleAxisRotation.bind(al(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cl(e,t)}(n,ft),function(e,t,n){t&&ol(e.prototype,t),n&&ol(e,n)}(n,[{key:"addUi",value:function(){this.resetButtonEl=this.controls.add("Reset",this.handleReset,"",f.a),this.animationClipsPullup.addListener(Re,this.handleSelectAnimationClip),this.animationToggleEl=this.controls.add("Play/pause animation",this.handleToggleAnimation,"",f.p),this.animationClipButtonEl=this.controls.add("Animation clips",this.handleToggleAnimationClips,"",f.c),this.animationClipButtonEl.parentNode.appendChild(this.animationClipsPullup.pullupEl),this.hideAnimationControls(),this.addVrButton(),this.settingsPullup.addListener(Ie,this.handleSetRenderMode),this.settingsPullup.addListener(Ve,this.handleSetSkeletonsVisible),this.settingsPullup.addListener(De,this.handleSetWireframesVisible),this.settingsPullup.addListener(Be,this.handleSetGridVisible),this.settingsPullup.addListener(Me,this.handleSetCameraProjection),this.settingsPullup.addListener(Ae,this.handleAxisRotation),this.settingsButtonEl=this.controls.add("Settings",this.handleToggleSettings,"",f.n),this.settingsButtonEl.parentNode.appendChild(this.settingsPullup.pullupEl),this.addFullscreenButton(),this.handleSetRenderMode(Ze)}},{key:"hidePullups",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.hide(),this.emit(ze,!1)}},{key:"handleToggleSettings",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.toggle(),this.emit(ze)}},{key:"handleSetRenderMode",value:function(e){this.emit(Ie,e),this.settingsPullup.setCurrentRenderMode(e)}},{key:"handleSetSkeletonsVisible",value:function(e){this.emit(Ve,e)}},{key:"handleSetWireframesVisible",value:function(e){this.emit(De,e)}},{key:"handleSetGridVisible",value:function(e){this.emit(Be,e),this.settingsPullup.setGridVisible(e)}},{key:"handleSetCameraProjection",value:function(e){this.emit(Me,e)}},{key:"handleAxisRotation",value:function(e){this.emit(Ae,e)}},{key:"showAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.remove(je),this.animationClipButtonEl.classList.remove(je))}},{key:"hideAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.add(je),this.animationClipButtonEl.classList.add(je))}},{key:"handleSelectAnimationClip",value:function(e){this.setAnimationPlaying(!1),this.emit(Re,e)}},{key:"handleToggleAnimationClips",value:function(){this.settingsPullup.hide(),this.animationClipsPullup.toggle()}},{key:"handleToggleAnimation",value:function(){this.hidePullups(),this.setAnimationPlaying(!this.isAnimationPlaying)}},{key:"setAnimationPlaying",value:function(e){this.isAnimationPlaying=e,this.animationToggleEl.innerHTML=this.isAnimationPlaying?f.o:f.p,this.emit(Fe,this.isAnimationPlaying)}},{key:"addAnimationClip",value:function(e,t,n){this.animationClipsPullup.addClip(e,t,n)}},{key:"selectAnimationClip",value:function(e){this.animationClipsPullup.selectClip(e)}},{key:"handleToggleFullscreen",value:function(){sl(ll(n.prototype),"handleToggleFullscreen",this).call(this),this.hidePullups()}},{key:"setCurrentProjectionMode",value:function(e){this.settingsPullup.onProjectionSelected(e),this.settingsPullup.setCurrentProjectionMode(e)}},{key:"handleReset",value:function(){sl(ll(n.prototype),"handleReset",this).call(this),this.hidePullups(),this.settingsPullup.reset(),this.setAnimationPlaying(!1)}},{key:"destroy",value:function(){this.animationClipsPullup.removeListener(Re,this.handleSelectAnimationClip),this.animationClipsPullup.destroy(),this.animationClipsPullup=null,this.settingsPullup.removeListener(Ie,this.handleSetRenderMode),this.settingsPullup.removeListener(Ve,this.handleSetSkeletonsVisible),this.settingsPullup.removeListener(De,this.handleSetWireframesVisible),this.settingsPullup.removeListener(Be,this.handleSetGridVisible),this.settingsPullup.removeListener(Me,this.handleSetCameraProjection),this.settingsPullup.removeListener(Ae,this.handleAxisRotation),this.settingsPullup.destroy(),this.settingsPullup=null,sl(ll(n.prototype),"destroy",this).call(this)}}]),n}();function dl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pl=0,vl=1,bl=2,ml=1,yl=function(){function i(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),fl(this,"vrGamepads",void 0),fl(this,"box3d",void 0),fl(this,"controllerState",void 0),fl(this,"initialScaleDistance",0),fl(this,"initialScale",new THREE.Vector3),fl(this,"vrWorkVector1",new THREE.Vector3),fl(this,"vrWorkVector2",new THREE.Vector3),fl(this,"vrWorkMatrix",new THREE.Matrix4),this.vrGamepads=e,this.box3d=t,this.onScaleUpdate=this.onScaleUpdate.bind(this),this.onGamepadButtonDown=this.onGamepadButtonDown.bind(this),this.onGamepadButtonUp=this.onGamepadButtonUp.bind(this),this.vrGamepads.forEach(function(e){e.listenTo(e,"gamepadButtonDown",n.onGamepadButtonDown),e.listenTo(e,"gamepadButtonUp",n.onGamepadButtonUp)}),this.controllerState={initiatingController:null,selectedObject:null,previousParent:null,controlType:pl}}return function(e,t,n){t&&dl(e.prototype,t),n&&dl(e,n)}(i,[{key:"destroy",value:function(){this.vrGamepads.forEach(function(e){return e.stopListening()})}},{key:"changeParent",value:function(e,t){var n=t.runtimeData,i=e.runtimeData;n&&i&&(i.matrix.premultiply(i.parent.matrixWorld),this.vrWorkMatrix.getInverse(n.matrixWorld),i.applyMatrix(this.vrWorkMatrix),e.setPosition(i.position.x,i.position.y,i.position.z),e.setQuaternion(i.quaternion.x,i.quaternion.y,i.quaternion.z,i.quaternion.w),e.setScale(i.scale.x,i.scale.y,i.scale.z),t.addChild(e))}},{key:"startTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.initiatingController)}},{key:"endTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.previousParent)}},{key:"onScaleUpdate",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2);var e=this.vrWorkVector1.sub(this.vrWorkVector2).length()/this.initialScaleDistance;this.vrWorkVector1.copy(this.initialScale).multiplyScalar(e),this.controllerState.selectedObject.setScale(this.vrWorkVector1.x,this.vrWorkVector1.y,this.vrWorkVector1.z)}},{key:"startScale",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2),this.controllerState.selectedObject.getScale(this.initialScale),this.initialScaleDistance=this.vrWorkVector1.sub(this.vrWorkVector2).length(),this.box3d.listenTo(this.box3d,"update",this.onScaleUpdate)}},{key:"endScale",value:function(){this.box3d.stopListening(this.box3d,"update",this.onScaleUpdate)}},{key:"onGamepadButtonUp",value:function(n,e){if(e===ml)if(this.controllerState.controlType===vl)this.endTranslation(),this.controllerState.controlType=pl,this.controllerState.selectedObject=null;else if(this.controllerState.controlType===bl){this.controllerState.controlType=vl,this.endScale();var t=this.vrGamepads.find(function(e){var t=e.getComponentByScriptId("motion_gamepad_device");return t&&t.getGamepad()!==n});this.controllerState.initiatingController=t,this.startTranslation()}}},{key:"onGamepadButtonDown",value:function(n,e){if(e===ml){if(this.controllerState.controlType===vl)return this.controllerState.controlType=bl,this.endTranslation(),void this.startScale();var t,i=this.vrGamepads.find(function(e){var t=e.getComponentByScriptId("motion_gamepad_device");return t&&t.getGamepad()===n}),r=i.getComponentByScriptId("intersection_checker").checkIntersection(),o=Object.keys(r);if(o.length&&(t=r[o[0]].getInstanceTop()),t){if(this.vrGamepads.find(function(e){return t===e.getChild()}))return;this.controllerState.controlType=vl,this.controllerState.selectedObject=t,this.controllerState.previousParent=t.getParentObject(),this.controllerState.initiatingController=i,this.startTranslation()}}}}]),i}();var gl=function(e){return[{id:"MAT_CAP_TEX",type:"texture2D",properties:{name:"Mat Cap Texture",imageId:"MAT_CAP_IMG",wrapModeU:"clampToEdge",wrapModeV:"clampToEdge",flipY:!0}},{id:"MAT_CAP_IMG",type:"image",properties:{name:"Mat Cap Image",width:256,height:256,stream:!1},representations:[{src:"".concat(e,"third-party/model3d/").concat(b.cb,"/matcap.png"),isExternal:!0,contentType:"image/png",contentEncoding:"identity",width:256,height:256,compression:"zip"}]}]};function wl(e){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function El(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function kl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ol(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e,t,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pl(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Pl(e){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ll(e,t){return(Ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cl="third-party/model3d/".concat(b.cb,"/box3d-player.json"),_l=0,jl=0,Tl=0,Hl=0,Al=0,Rl=0,Il=1,Ml=function(){function s(e,t,n){var i,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),xl(Ol(r=function(e,t){return!t||"object"!==wl(t)&&"function"!=typeof t?Ol(e):t}(this,Pl(s).call(this,e,t,n))),"instance",void 0),xl(Ol(r),"grid",void 0),xl(Ol(r),"axisDisplay",void 0),xl(Ol(r),"renderModeValues",void 0),r.renderModeValues=(xl(i={},Ze,Box3D.RenderMode.Lit),xl(i,Qe,Box3D.RenderMode.Unlit),xl(i,Ye,Box3D.RenderMode.Normals),xl(i,Je,Box3D.RenderMode.Shape),xl(i,$e,Box3D.RenderMode.UVOverlay),i),r.handleCanvasClick=r.handleCanvasClick.bind(Ol(r)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ll(e,t)}(s,Et),function(e,t,n){t&&kl(e.prototype,t),n&&kl(e,n)}(s,[{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas.removeEventListener("click",this.handleCanvasClick),this.cleanupScene(),Sl(Pl(s.prototype),"destroy",this).call(this))}},{key:"load",value:function(e,t){var n=this,i=1<arguments.length&&void 0!==t?t:{},r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?El(n,!0).forEach(function(e){xl(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):El(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},i),o=r.location;if(o&&(r.sceneEntities=gl(o.staticBaseURI),!r.box3dApplication)){var a=Object(_.g)(o);r.box3dApplication=a(Cl)}return Sl(Pl(s.prototype),"load",this).call(this,e,r).then(this.loadBox3dFile.bind(this,i.file.id)).catch(function(){return n.onUnsupportedRepresentation()})}},{key:"handleCanvasClick",value:function(e){this.emit(He,e)}},{key:"loadBox3dFile",value:function(i){var r=this;this.box3d.canvas.addEventListener("click",this.handleCanvasClick);var e=this.box3d.getApplication().getComponentByScriptId("render_modes");return e&&e.setAttribute("shapeTexture","MAT_CAP_TEX"),new Promise(function(e,t){var n=r.getScene();n||t(new Error("Provided Box3D application data contains no scene")),r.instance=n.getDescendantByName("Preview Model"),r.instance||t(new Error('Provided Box3D application must include node named "Preview Model"')),r.instance.getComponentByScriptId("remote_instance")?(r.instance.once("remoteInstanceCreated",function(){r.setupScene(),e()}),r.instance.trigger("createRemoteInstance",i)):r.instance.when("load",function(){r.setupScene(),e()})})}},{key:"setupScene",value:function(){var e=this,t=this.getScene();if(t){this.instance.addComponent("axis_rotation",{},"axis_rotation_".concat(this.instance.id)),this.instance.addComponent("animation",{},"animation_".concat(this.instance.id));var n=this.box3d.getAssetsByClass(Box3D.AnimationAsset);0<n.length&&this.setAnimationAsset(n[0]),this.addHelpersToScene(),t.when("load",function(){return e.onSceneLoad()})}else this.onSceneLoad()}},{key:"reset",value:function(){this.resetModel(),Sl(Pl(s.prototype),"reset",this).call(this)}},{key:"resetModel",value:function(){if(this.instance){this.instance.getChildren().forEach(function(e){e.setPosition(_l,jl,Tl),e.setScale(1,1,1),e.setQuaternion(Hl,Al,Rl,Il),e.unsetProperty("bounds")}),this.instance.unsetProperty("bounds");var e=this.instance.getComponentByScriptId("scale_to_size");e&&e.enable();var t=this.instance.getComponentByScriptId("align_to_position");t&&t.enable(),this.vrEnabled&&this.disableAutoTransform()}}},{key:"resetView",value:function(){Sl(Pl(s.prototype),"resetView",this).call(this);var e=this.getCamera();if(e){var t=e.getComponentByScriptId("orbit_camera");if(t&&this.instance.runtimeData){var n=this.instance.getBounds();this.instance.runtimeData.updateMatrixWorld(),n.min.applyMatrix4(this.instance.runtimeData.matrixWorld),n.max.applyMatrix4(this.instance.runtimeData.matrixWorld);var i=new THREE.Vector3;i.subVectors(n.max,n.min);var r=this.instance.getCenter();r.applyMatrix4(this.instance.runtimeData.matrixWorld),t.reset(),t.setPivotPosition(r);var o=1.5*Math.max(Math.max(i.x,i.y),i.z);t.setOrbitDistance(o)}}}},{key:"onSceneLoad",value:function(){Sl(Pl(s.prototype),"onSceneLoad",this).call(this),this.initVrGamepadControls(),this.resetSkeletons(),this.box3d.getEntitiesByType("video").forEach(function(e){return e.play()})}},{key:"setAnimationAsset",value:function(e){if(this.instance){var t=this.instance.getComponentByScriptId("animation");t.setAsset(e),t.setLoop(!0)}}},{key:"setAnimationClip",value:function(e){this.instance&&this.instance.getComponentByScriptId("animation").setClipId(e)}},{key:"toggleAnimation",value:function(e){var t=this;if(this.instance){var n=this.instance.getComponentByScriptId("animation"),i=n?n.asset:void 0;i&&i.when("load",function(){t.instance.when("load",function(){e?n.play():n.pause()})})}}},{key:"stopAnimation",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("animation");e&&e.stop()}}},{key:"onUnsupportedRepresentation",value:function(){this.emit("error",new Error("We’re sorry, we can’t preview this file type in your web browser. To view this content please download and open it on your device."))}},{key:"addHelpersToScene",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid=new THREE.GridHelper(10,10,4386,11184810),this.grid.material.transparent=!0,this.grid.material.blending=THREE.MultiplyBlending,e.add(this.grid),this.grid.visible=!0,this.axisDisplay=new THREE.AxisHelper(.5),e.add(this.axisDisplay),this.axisDisplay.visible=!1)}},{key:"cleanupHelpers",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid&&(e.remove(this.grid),this.grid.material.dispose(),this.grid.geometry.dispose()),this.axisDisplay&&(e.remove(this.axisDisplay),this.axisDisplay.material.dispose(),this.axisDisplay.geometry.dispose()))}},{key:"toggleHelpers",value:function(e){var t=void 0!==e?e:!this.axisDisplay.visible;this.axisDisplay.visible=t,this.box3d.needsRender=!0}},{key:"cleanupScene",value:function(){this.cleanupHelpers(),this.resetSkeletons()}},{key:"resetSkeletons",value:function(){this.box3d&&Box3D.globalEvents.trigger("resetSkeletons")}},{key:"setRenderMode",value:function(e){this.box3d&&Box3D.globalEvents.trigger(Ie,this.renderModeValues[e])}},{key:"setCameraProjection",value:function(e){var t=this.getCamera();if(t){switch(e){case Xe:t.setProperty("cameraType","orthographic");break;case Ke:t.setProperty("cameraType","perspective")}this.resetView()}}},{key:"rotateOnAxis",value:function(e){this.instance&&this.box3d&&this.instance.trigger("rotate_on_axis",e,!0)}},{key:"setAxisRotation",value:function(e,t,n){this.instance&&this.instance.trigger("set_axes_orientation",e,t,n)}},{key:"setSkeletonsVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(Ve,e)}},{key:"setWireframesVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(De,e)}},{key:"setGridVisible",value:function(e){this.box3d&&(this.grid.visible=e)}},{key:"enableVr",value:function(){if(!this.vrEnabled){Sl(Pl(s.prototype),"enableVr",this).call(this);var e=this.box3d.getVrDisplay();this.vrDeviceHasPosition=e?e.capabilities.hasPosition:void 0,this.vrDeviceHasPosition?this.grid.visible=!0:this.box3d.on("update",this.updateNonPositionalVrControls,this),this.disableAutoTransform()}}},{key:"onDisableVr",value:function(){this.vrDeviceHasPosition||this.box3d.off("update",this.updateNonPositionalVrControls,this),Sl(Pl(s.prototype),"onDisableVr",this).call(this)}},{key:"disableAutoTransform",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("scale_to_size");if(e){var t=this.instance.getScale();e.disable(),this.instance.setScale(t.x,t.y,t.z)}var n=this.instance.getComponentByScriptId("align_to_position");if(n){var i=this.instance.getPosition();n.disable(),this.instance.setPosition(i.x,i.y,i.z)}}}},{key:"updateNonPositionalVrControls",value:function(){var e=this.getCamera(),t=e.getComponentByScriptId("orbit_camera");if(t){var n=e.runtimeData;n.position.set(0,0,t.getOrbitDistance()),n.position.applyQuaternion(n.quaternion),n.position.add(t.pivotPoint.position)}}},{key:"initVrGamepadControls",value:function(){this.vrControls=new yl(this.vrGamepads,this.box3d)}}]),s}();n(251);function Vl(e){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fl(e,t,n){return(Fl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zl(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function zl(e){return(zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nl(e,t){return(Nl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ql(e){return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gl(e,t){return!t||"object"!==ql(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Kl(e,t,n){return(Kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xl(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Xl(e){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zl(e,t){return(Zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ql=[{NAME:"Model3d",CONSTRUCTOR:function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Ul(Bl(t=function(e,t){return!t||"object"!==Vl(t)&&"function"!=typeof t?Bl(e):t}(this,zl(n).call(this,e))),"instances",[]),Ul(Bl(t),"axes",{up:null,forward:null}),t.handleRotateOnAxis=t.handleRotateOnAxis.bind(Bl(t)),t.handleSelectAnimationClip=t.handleSelectAnimationClip.bind(Bl(t)),t.handleSetCameraProjection=t.handleSetCameraProjection.bind(Bl(t)),t.handleSetRenderMode=t.handleSetRenderMode.bind(Bl(t)),t.handleShowSkeletons=t.handleShowSkeletons.bind(Bl(t)),t.handleShowWireframes=t.handleShowWireframes.bind(Bl(t)),t.handleShowGrid=t.handleShowGrid.bind(Bl(t)),t.handleToggleAnimation=t.handleToggleAnimation.bind(Bl(t)),t.handleToggleHelpers=t.handleToggleHelpers.bind(Bl(t)),t.handleCanvasClick=t.handleCanvasClick.bind(Bl(t)),t.onMetadataError=t.onMetadataError.bind(Bl(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nl(e,t)}(n,At),function(e,t,n){t&&Dl(e.prototype,t),n&&Dl(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(Fl(zl(n.prototype),"setup",this).call(this),this.wrapperEl.classList.add(Te),this.loadTimeout=18e4)}},{key:"createSubModules",value:function(){this.controls=new hl(this.wrapperEl),this.renderer=new Ml(this.wrapperEl,this.boxSdk,{api:this.api})}},{key:"attachEventHandlers",value:function(){Fl(zl(n.prototype),"attachEventHandlers",this).call(this),this.controls&&(this.controls.on(Ae,this.handleRotateOnAxis),this.controls.on(Re,this.handleSelectAnimationClip),this.controls.on(Me,this.handleSetCameraProjection),this.controls.on(Ie,this.handleSetRenderMode),this.controls.on(Ve,this.handleShowSkeletons),this.controls.on(De,this.handleShowWireframes),this.controls.on(Be,this.handleShowGrid),this.controls.on(Fe,this.handleToggleAnimation),this.controls.on(ze,this.handleToggleHelpers)),this.renderer&&this.renderer.on(He,this.handleCanvasClick)}},{key:"detachEventHandlers",value:function(){Fl(zl(n.prototype),"detachEventHandlers",this).call(this),this.controls&&(this.controls.removeListener(Ae,this.handleRotateOnAxis),this.controls.removeListener(Re,this.handleSelectAnimationClip),this.controls.removeListener(Me,this.handleSetCameraProjection),this.controls.removeListener(Ie,this.handleSetRenderMode),this.controls.removeListener(Ve,this.handleShowSkeletons),this.controls.removeListener(De,this.handleShowWireframes),this.controls.removeListener(Be,this.handleShowGrid),this.controls.removeListener(Fe,this.handleToggleAnimation),this.controls.removeListener(ze,this.handleToggleHelpers)),this.renderer&&this.renderer.removeListener(He,this.handleCanvasClick)}},{key:"handleSelectAnimationClip",value:function(e){this.renderer.setAnimationClip(e)}},{key:"handleRotateOnAxis",value:function(e){this.renderer.rotateOnAxis(e)}},{key:"handleRotationAxisSet",value:function(e,t,n){var i=!(2<arguments.length&&void 0!==n)||n;this.renderer.setAxisRotation(e,t,i)}},{key:"handleSceneLoaded",value:function(){var t=this;return this.loaded=!0,this.boxSdk.getMetadataClient().get(this.options.file.id,"global","box3d").then(function(e){if(200!==e.status)throw new Error("Received unsuccessful response status: ".concat(e.status));return e.response}).catch(this.onMetadataError).then(function(e){return t.controls&&t.controls.addUi(),t.axes.up=e.upAxis||"+Y",t.axes.forward=e.forwardAxis||"+Z",t.renderMode=e.defaultRenderMode||Ze,t.projection=e.cameraProjection||Ke,"true"===e.renderGrid?t.renderGrid=!0:"false"===e.renderGrid?t.renderGrid=!1:t.renderGrid=!0,"+Y"===t.axes.up&&"+Z"===t.axes.forward||t.handleRotationAxisSet(t.axes.up,t.axes.forward,!1),t.handleReset(),t.populateAnimationControls(),t.showWrapper(),t.emit("load"),!0})}},{key:"onMetadataError",value:function(e){return{}}},{key:"populateAnimationControls",value:function(){var i=this;if(this.controls){var r=this.renderer.box3d.getEntitiesByType("animation");if(0<r.length){var e=r[0].getClipIds();e.forEach(function(e){var t=r[0].getClip(e),n=t.stop-t.start;i.controls.addAnimationClip(e,t.name,n)}),0<e.length&&(this.controls.showAnimationControls(),this.controls.selectAnimationClip(e[0]))}}}},{key:"handleToggleAnimation",value:function(e){this.renderer.toggleAnimation(e)}},{key:"handleCanvasClick",value:function(){this.controls.hidePullups()}},{key:"showWrapper",value:function(){this.wrapperEl.classList.remove(Te)}},{key:"handleReset",value:function(){Fl(zl(n.prototype),"handleReset",this).call(this),this.controls&&(this.controls.handleSetRenderMode(this.renderMode),this.controls.setCurrentProjectionMode(this.projection),this.controls.handleSetSkeletonsVisible(!1),this.controls.handleSetWireframesVisible(!1),this.controls.handleSetGridVisible(this.renderGrid)),this.renderer&&(this.handleRotationAxisSet(this.axes.up,this.axes.forward,!1),this.renderer.stopAnimation(),this.renderer.resetView())}},{key:"handleSetRenderMode",value:function(e){var t=0<arguments.length&&void 0!==e?e:"Lit";this.renderer.setRenderMode(t)}},{key:"handleToggleHelpers",value:function(e){this.renderer.toggleHelpers(e)}},{key:"handleSetCameraProjection",value:function(e){this.renderer.setCameraProjection(e)}},{key:"handleShowSkeletons",value:function(e){this.renderer.setSkeletonsVisible(e)}},{key:"handleShowWireframes",value:function(e){this.renderer.setWireframesVisible(e)}},{key:"handleShowGrid",value:function(e){this.renderer.setGridVisible(e)}}]),n}(),REP:"3d",EXT:["box3d","fbx","obj","dae","3ds","ply","stl"]}],Yl=new(function(){function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=Gl(this,Xl(o).call(this))).viewers=Ql,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zl(e,t)}(o,a),function(e,t,n){t&&Wl(e.prototype,t),n&&Wl(e,n)}(o,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=Kl(Xl(o.prototype),"determineViewer",this).call(this,e,n);if(!i||v.a.supportsModel3D())return i;var r=Object(_.D)("We’re sorry, your browser doesn’t support preview for {1}.",["3D models"]);throw new m.a(y.c.BROWSER_UNSUPPORTED,r,{file:e})}}]),o}());function Jl(e){return(Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ec(e,t){return!t||"object"!==Jl(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function tc(e,t,n){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nc(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function nc(e){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ic(e,t){return(ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rc(e){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){return!t||"object"!==rc(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ac(e){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sc(e,t){return(sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lc=[{NAME:"IFrame",CONSTRUCTOR:function(){function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),ec(this,nc(c).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ic(e,t)}(c,d["a"]),function(e,t,n){t&&$l(e.prototype,t),n&&$l(e,n)}(c,[{key:"setup",value:function(){this.isSetup||(tc(nc(c.prototype),"setup",this).call(this),this.iframeEl=this.createViewer(document.createElement("iframe")),this.iframeEl.setAttribute("width","100%"),this.iframeEl.setAttribute("height","100%"),this.iframeEl.setAttribute("frameborder",0),this.loadTimeout=12e4)}},{key:"load",value:function(){var e="",t=this.options,n=t.file,i=t.sharedLink,r=void 0===i?"":i,o=t.appHost,a=n.extension;if("boxnote"===a){e="".concat(o,"/notes_embedded/").concat(n.id,"?isReadonly=1&is_preview=1");var s=r.indexOf("/s/");if(-1!==s){var l=r.substr(s+3);e="".concat(e,"&s=").concat(l)}}else"boxdicom"===a&&(e="".concat(o,"/dicom_viewer/").concat(n.id));this.startLoadTimer(),this.iframeEl.src=e,this.loaded=!0,this.emit(y.n.load),tc(nc(c.prototype),"load",this).call(this)}}]),c}(),REP:b.db,EXT:["boxnote","boxdicom"]}],cc=new(function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=oc(this,ac(t).call(this))).viewers=lc,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(t,a),t}()),uc=n(45);function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pc(e,t,n){return(pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vc(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function vc(e){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bc(e,t){return(bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mc="office-online-iframe";function yc(e){return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wc(e,t){return!t||"object"!==yc(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ec(e,t,n){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kc(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oc(e,t){return(Oc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sc=[{NAME:"Office",CONSTRUCTOR:function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==hc(t)&&"function"!=typeof t?fc(e):t}(this,vc(n).call(this,e))).print=t.print.bind(fc(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bc(e,t)}(n,d["a"]),function(e,t,n){t&&dc(e.prototype,t),n&&dc(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(pc(vc(n.prototype),"setup",this).call(this),this.platformSetup=!1,this.setupIframe(),this.initPrint(),this.setupPDFUrl(),this.loadTimeout=12e4)}},{key:"destroy",value:function(){this.printBlob=null,this.printPopup&&this.printPopup.destroy(),this.printURL&&URL.revokeObjectURL(this.printURL),pc(vc(n.prototype),"destroy",this).call(this)}},{key:"load",value:function(){pc(vc(n.prototype),"load",this).call(this),this.startLoadTimer(),this.loaded=!0,this.emit(y.n.load)}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(b.K),this.printPopup.printCheckmark.classList.remove(b.K))}},{key:"initPrint",value:function(){this.printPopup=new jn(this.rootEl);var e=document.createElement("div");e.className="bp-print-check ".concat(b.K),e.innerHTML=f.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPDFUrl",value:function(){var e=this.options.file,t=Object(wn.h)(e,"pdf"),n=Object(_.q)(t,"content.url_template");n&&(this.pdfUrl=this.createContentUrlWithAuthParams(n))}},{key:"setupIframe",value:function(){var e=this.options,t=e.appHost,n=e.apiHost,i=e.file,r=e.sharedLink,o=e.location.locale,a=this.createIframeElement();(this.createViewer(a),this.platformSetup)?(this.createFormElement(n,i.id,r,o).submit(),a.contentWindow.postMessage("Host_PostmessageReady",uc.a.getOrigin())):a.src=this.setupRunmodeURL(t,i.id,r)}},{key:"setupRunmodeURL",value:function(e,t,n){var i="/integrations/officeonline/openExcelOnlinePreviewer",r=document.createElement("a");if(r.href=n){var o="".concat(r.protocol,"//").concat(r.hostname);i="".concat(o).concat(i);var a=n.split("/s/")[1];if(a)i="".concat(i,"?s=").concat(a,"&fileId=").concat(t);else{var s=r.hostname.split(".")[0],l=r.href.split("/v/")[1];i="".concat(i,"?v=").concat(l,"&vanity_subdomain=").concat(s,"&fileId=").concat(t)}}else i="".concat(e).concat(i,"?fileId=").concat(t);return i}},{key:"setupWOPISrc",value:function(e,t,n){var i="".concat(e,"/wopi/files/");if(n){var r=n.split("/s/")[1];r&&(i="".concat(i,"s_").concat(r,"_f_"))}return"".concat(i).concat(t)}},{key:"createIframeElement",value:function(){var e=document.createElement("iframe");return e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("frameborder",0),e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups"),this.platformSetup&&(e.setAttribute("allowfullscreen","true"),e.name=mc,e.id=mc),e}},{key:"createFormElement",value:function(e,t,n,i){var r=this.setupWOPISrc(e,t,n),o={origin:uc.a.getOrigin()},a=this.containerEl.appendChild(document.createElement("form"));a.setAttribute("action","".concat("https://excel.officeapps.live.com/x/_layouts/xlembed.aspx","?ui=").concat(i,"&rs=").concat(i,"&WOPISrc=").concat(r,"&sc=").concat(JSON.stringify(o))),a.setAttribute("method","POST"),a.setAttribute("target",mc);var s=document.createElement("input");s.setAttribute("name","access_token"),s.setAttribute("value","".concat(this.options.token)),s.setAttribute("type","hidden");var l=document.createElement("input");return l.setAttribute("name","access_token_TTL"),l.setAttribute("value",0),l.setAttribute("type","hidden"),a.appendChild(s),a.appendChild(l),a}},{key:"fetchPrintBlob",value:function(e){var t=this;return this.api.get(e,{type:"blob"}).then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=v.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}}]),n}(),REP:b.db,EXT:["xlsx","xlsm","xlsb"]}],Pc=new(function(){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=wc(this,kc(r).call(this))).viewers=Sc,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oc(e,t)}(r,a),function(e,t,n){t&&gc(e.prototype,t),n&&gc(e,n)}(r,[{key:"determineViewer",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],i=e.shared_link&&e.shared_link.is_password_enabled;return(!Object(wn.e)(e,b.ib)||5242880<e.size||i)&&n.push("Office"),Ec(kc(r.prototype),"determineViewer",this).call(this,e,n)}}]),r}());t.a=[Ei,Pc,Vs,gn,Bo,ro,nn,pe,Yl,cc]},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(n,e,t){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(this,t(19))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(93),o=n(89),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var i=n(178);e.exports=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var u=n(180),h=n(181),d=n(64),f=n(95),p=n(184),v=n(185),b=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=d(e),i=!n&&h(e),r=!n&&!i&&f(e),o=!n&&!i&&!r&&v(e),a=n||i||r||o,s=a?u(e.length,String):[],l=s.length;for(var c in e)!t&&!b.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||p(c,l))||s.push(c);return s}},function(e,s,l){(function(e){var t=l(14),n=l(183),i=s&&!s.nodeType&&s,r=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===i?t.Buffer:void 0,a=(o?o.isBuffer:void 0)||n;e.exports=a}).call(this,l(65)(e))},function(e,t){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=function(t,n){return function(e){return t(n(e))}}},function(e,t,n){var i=n(56),r=n(96);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},function(e,t,n){var i=n(94),r=n(190),o=n(98);e.exports=function(e){return o(e)?i(e,!0):r(e)}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var i=n(102),r=n(103),o=n(69),a=n(100),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,o(e)),e=r(e);return t}:a;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},function(e,t,n){var i=n(97)(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){var r=n(102),o=n(64);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t,n){"use strict";e.exports=function(n,i){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(i,e)}}},function(e,t,n){"use strict";var a=n(13);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(a.isURLSearchParams(t))i=t.toString();else{var r=[];a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),r.push(s(t)+"="+s(e))}))}),i=r.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(s,e,l){"use strict";(function(e){var n=l(13),i=l(226),t={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,a={adapter:(void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?o=l(109):"undefined"!=typeof XMLHttpRequest&&(o=l(109)),o),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),s.exports=a}).call(this,l(225))},function(e,t,u){"use strict";var h=u(13),d=u(227),f=u(106),p=u(229),v=u(230),b=u(110);e.exports=function(c){return new Promise(function(n,i){var r=c.data,o=c.headers;h.isFormData(r)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(c.auth){var e=c.auth.username||"",t=c.auth.password||"";o.Authorization="Basic "+btoa(e+":"+t)}if(a.open(c.method.toUpperCase(),f(c.url,c.params,c.paramsSerializer),!0),a.timeout=c.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?p(a.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:e,config:c,request:a};d(n,i,t),a=null}},a.onabort=function(){a&&(i(b("Request aborted",c,"ECONNABORTED",a)),a=null)},a.onerror=function(){i(b("Network Error",c,null,a)),a=null},a.ontimeout=function(){i(b("timeout of "+c.timeout+"ms exceeded",c,"ECONNABORTED",a)),a=null},h.isStandardBrowserEnv()){var s=u(231),l=(c.withCredentials||v(c.url))&&c.xsrfCookieName?s.read(c.xsrfCookieName):void 0;l&&(o[c.xsrfHeaderName]=l)}if("setRequestHeader"in a&&h.forEach(o,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)}),c.withCredentials&&(a.withCredentials=!0),c.responseType)try{a.responseType=c.responseType}catch(e){if("json"!==c.responseType)throw e}"function"==typeof c.onDownloadProgress&&a.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(e){a&&(a.abort(),i(e),a=null)}),void 0===r&&(r=null),a.send(r)})}},function(e,t,n){"use strict";var a=n(228);e.exports=function(e,t,n,i,r){var o=new Error(e);return a(o,t,n,i,r)}},function(e,t,n){"use strict";var r=n(13);e.exports=function(t,n){n=n||{};var i={};return r.forEach(["url","method","params","data"],function(e){void 0!==n[e]&&(i[e]=n[e])}),r.forEach(["headers","auth","proxy"],function(e){r.isObject(n[e])?i[e]=r.deepMerge(t[e],n[e]):void 0!==n[e]?i[e]=n[e]:r.isObject(t[e])?i[e]=r.deepMerge(t[e]):void 0!==t[e]&&(i[e]=t[e])}),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(e){void 0!==n[e]?i[e]=n[e]:void 0!==t[e]&&(i[e]=t[e])}),i}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},,,,,,,,,,,,,,,function(e,t,n){e.exports=n(219)},function(e,t,n){var i,c;
/*!
 * jsUri
 * https://github.com/derek-watson/jsUri
 *
 * Copyright 2013, Derek Watson
 * Released under the MIT license.
 *
 * Includes parseUri regular expressions
 * http://blog.stevenlevithan.com/archives/parseuri
 * Copyright 2007, Steven Levithan
 * Released under the MIT license.
 */function u(e){return e&&(e=e.toString().replace(c.pluses,"%20"),e=decodeURIComponent(e)),e}function o(e){var t,n,i,r,o,a,s,l=[];if(null==e||""===e)return l;for(0===e.indexOf("?")&&(e=e.substring(1)),t=0,s=(n=e.toString().split(c.query_separator)).length;t<s;t++)0!==(r=(i=n[t]).indexOf("="))&&(o=u(i.substring(0,r)),a=u(i.substring(r+1)),l.push(-1===r?[i,null]:[o,a]));return l}function r(e){this.uriParts=function(e){var n=c.uri_parser.exec(e||""),i={};return["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"].forEach(function(e,t){i[e]=n[t]||""}),i}(e),this.queryPairs=o(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}
/*!
 * jsUri
 * https://github.com/derek-watson/jsUri
 *
 * Copyright 2013, Derek Watson
 * Released under the MIT license.
 *
 * Includes parseUri regular expressions
 * http://blog.stevenlevithan.com/archives/parseuri
 * Copyright 2007, Steven Levithan
 * Released under the MIT license.
 */
c={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),i=0;i<o;){var a;i in r&&(a=r[i],e.call(n,a,i,r)),i++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(t){r.prototype[t]=function(e){return void 0!==e&&(this.uriParts[t]=e),this.uriParts[t]}}),r.prototype.hasAuthorityPrefix=function(e){return void 0!==e&&(this.hasAuthorityPrefixUserPref=e),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},r.prototype.isColonUri=function(e){if(void 0===e)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!e},r.prototype.query=function(e){var t,n,i,r="";for(void 0!==e&&(this.queryPairs=o(e)),t=0,i=this.queryPairs.length;t<i;t++)n=this.queryPairs[t],0<r.length&&(r+="&"),null===n[1]?r+=n[0]:(r+=n[0],r+="=",void 0!==n[1]&&(r+=encodeURIComponent(n[1])));return 0<r.length?"?"+r:r},r.prototype.getQueryParamValue=function(e){var t,n,i;for(n=0,i=this.queryPairs.length;n<i;n++)if(e===(t=this.queryPairs[n])[0])return t[1]},r.prototype.getQueryParamValues=function(e){var t,n,i,r=[];for(t=0,i=this.queryPairs.length;t<i;t++)e===(n=this.queryPairs[t])[0]&&r.push(n[1]);return r},r.prototype.deleteQueryParam=function(e,t){var n,i,r,o,a,s=[];for(n=0,a=this.queryPairs.length;n<a;n++)r=u((i=this.queryPairs[n])[0])===u(e),o=i[1]===t,(1!==arguments.length||r)&&(2!==arguments.length||r&&o)||s.push(i);return this.queryPairs=s,this},r.prototype.addQueryParam=function(e,t,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[e,t])):0<arguments.length&&this.queryPairs.push([e,t]),this},r.prototype.hasQueryParam=function(e){var t,n=this.queryPairs.length;for(t=0;t<n;t++)if(this.queryPairs[t][0]==e)return!0;return!1},r.prototype.replaceQueryParam=function(e,t,n){var i,r,o=-1,a=this.queryPairs.length;if(3===arguments.length){for(i=0;i<a;i++)if(u((r=this.queryPairs[i])[0])===u(e)&&decodeURIComponent(r[1])===u(n)){o=i;break}0<=o&&this.deleteQueryParam(e,u(n)).addQueryParam(e,t,o)}else{for(i=0;i<a;i++)if(u((r=this.queryPairs[i])[0])===u(e)){o=i;break}this.deleteQueryParam(e),this.addQueryParam(e,t,o)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(t){var e="set"+t.charAt(0).toUpperCase()+t.slice(1);r.prototype[e]=function(e){return this[t](e),this}}),r.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},r.prototype.origin=function(){var e=this.scheme();return this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@")),this.host()&&(e+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(e+=":"+this.port())),e},r.prototype.addTrailingSlash=function(){var e=this.path()||"";return"/"!==e.substr(-1)&&this.path(e+"/"),this},r.prototype.toString=function(){var e,t=this.origin();return this.isColonUri()?this.path()&&(t+=":"+this.path()):this.path()?(e=this.path(),c.ends_with_slashes.test(t)||c.starts_with_slashes.test(e)?(t&&t.replace(c.ends_with_slashes,"/"),e=e.replace(c.starts_with_slashes,"/")):t+="/",t+=e):this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},r.prototype.clone=function(){return new r(this.toString())},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.start=Date.now(),this.log={locale:e,event:"preview",browser:t,client:{name:"box-content-preview",version:"2.23.0"},converted:!0,cache:{hit:!1,stale:!1},time:{conversion:0,rendering:0,total:0}}}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(n,[{key:"setCached",value:function(){this.log.cache.hit=!0}},{key:"setCacheStale",value:function(){this.log.cache.stale=!0}},{key:"setUnConverted",value:function(){this.log.converted=!1,this.log.time.conversion=Date.now()-this.start}},{key:"setPreloaded",value:function(){this.log.time.preload=Date.now()-this.start}},{key:"setFile",value:function(e){this.log.file=e}},{key:"setType",value:function(e){this.log.type=e}},{key:"done",value:function(e){return this.log.count=e,this.log.time.total=Date.now()-this.start,this.log.time.rendering=this.log.time.total-this.log.time.conversion,this.log}}]),n}();t.a=r},function(e,t,n){"use strict";var i=n(11),a=n(6),s=n(7),l=n(3),c=n(1),u=n(2);n(252);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}(this,f(n).call(this,e))).download=t.download.bind(h(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,i["a"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(n,[{key:"setup",value:function(){this.isSetup||(d(f(n.prototype),"setup",this).call(this),this.infoEl=this.createViewer(document.createElement("div")),this.infoEl.className="bp-error",this.iconEl=this.infoEl.appendChild(document.createElement("div")),this.iconEl.className="bp-icon bp-icon-file",this.messageEl=this.infoEl.appendChild(document.createElement("p")),this.messageEl.className="bp-error-text")}},{key:"finishLoadingSetup",value:function(){}},{key:"destroy",value:function(){this.downloadBtnEl&&this.downloadBtnEl.removeEventListener("click",this.download),d(f(n.prototype),"destroy",this).call(this)}},{key:"load",value:function(e){var t=e instanceof a.a?e:new a.a(c.c.GENERIC,"We’re sorry, the preview didn’t load.",{},e.message),n=t.displayMessage,i=t.details,r=t.message,o=this.options.file;if(this.icon=Object(l.y)("FILE_DEFAULT"),o)switch(o.extension){case"zip":case"tgz":case"flv":this.icon=Object(l.x)(o.extension)}this.iconEl.innerHTML=this.icon,this.messageEl.textContent=n,i&&i.linkText&&i.linkUrl?this.addLinkButton(i.linkText,i.linkUrl):Object(s.b)(o,this.options)&&this.addDownloadButton(),this.loaded=!0,this.emit(c.n.load,{error:Object(u.G)(r)})}},{key:"addLinkButton",value:function(e,t){var n=this.infoEl.appendChild(document.createElement("a"));n.className="bp-btn bp-btn-primary",n.target="_blank",n.textContent=e,n.href=t}},{key:"addDownloadButton",value:function(){this.downloadBtnEl=this.infoEl.appendChild(document.createElement("button")),this.downloadBtnEl.className="bp-btn bp-btn-primary",this.downloadBtnEl.dataset.testid="preview-error-download-btn",this.downloadBtnEl.textContent="Download",this.downloadBtnEl.addEventListener("click",this.download)}},{key:"download",value:function(){this.emit(c.n.download)}}]),n}();t.a=v},,,,,,,,function(e,t,n){"use strict";var o=n(0);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mountEl=e,this.containerEl=document.createElement("div"),this.containerEl.classList.add(o.x),this.progressBarEl=document.createElement("div"),this.progressBarEl.classList.add(o.w),this.containerEl.appendChild(this.progressBarEl),this.mountEl.appendChild(this.containerEl)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"destroy",value:function(){this.progressBarEl&&(clearInterval(this.progressInterval),this.mountEl&&this.mountEl.removeChild(this.containerEl),this.containerEl=null,this.progressBarEl=null)}},{key:"start",value:function(){var e=this;this.showProgress(),this.progress=0,this.progressInterval=setInterval(function(){95<=e.progress?clearInterval(e.progressInterval):(80<=e.progress?e.progress+=Math.random():e.progress+=5*Math.random(),e.updateProgress(e.progress))},150)}},{key:"finish",value:function(){this.hideProgress(),clearInterval(this.progressInterval),this.updateProgress(100)}},{key:"updateProgress",value:function(e){this.progressBarEl&&(this.progressBarEl.style.width="".concat(e,"%"))}},{key:"showProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.add(o.R)}},{key:"hideProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.remove(o.R)}}]),t}(),r=n(58),s=n(2);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"container",void 0),c(this,"contentContainer",void 0),c(this,"leftHandler",void 0),c(this,"rightHandler",void 0),c(this,"mousemoveHandler",void 0),c(this,"keydownHandler",void 0),c(this,"previewContainer",void 0),c(this,"progressBar",void 0)}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"cleanup",value:function(){this.progressBar&&this.progressBar.destroy(),this.previewContainer&&this.previewContainer.removeEventListener("mousemove",this.mousemoveHandler),this.container&&(this.container.innerHTML=""),document.removeEventListener("keydown",this.keydownHandler)}},{key:"setup",value:function(e,t,n,i,r){return this.container=e.container,this.leftHandler=n,this.rightHandler=i,this.mousemoveHandler=r,this.keydownHandler=t,"string"==typeof this.container?this.container=document.querySelector(this.container):this.container||(this.container=document.body),this.cleanup(),Object(s.s)(this.container,'<div class="bp-container">\n    <div class="bp-header-container bp-is-hidden">\n        <div>\n            <span class="bp-default-logo">\n                <svg height="25" width="45" viewBox="0 0 98 52" focusable="false">\n                    <path\n                        d="M95.34 44.7c1.1 1.53.8 3.66-.75 4.8-1.56 1.13-3.74.84-4.93-.64l-7.8-10.23-7.82 10.23c-1.2 1.48-3.36 1.77-4.9.63-1.55-1.15-1.87-3.28-.75-4.8l9.06-11.86L68.4 21c-1.1-1.54-.8-3.67.75-4.8 1.55-1.14 3.72-.85 4.9.63l7.82 10.23 7.8-10.23c1.2-1.48 3.38-1.77 4.92-.63 1.52 1.13 1.84 3.26.73 4.8L86.3 32.84l9.04 11.85zM53.9 43.22c-5.86 0-10.6-4.65-10.6-10.4 0-5.72 4.74-10.37 10.6-10.37 5.85 0 10.6 4.65 10.6 10.38 0 5.74-4.75 10.4-10.6 10.4zm-31.23 0c-5.85 0-10.6-4.65-10.6-10.4 0-5.72 4.75-10.37 10.6-10.37 5.86 0 10.6 4.65 10.6 10.38 0 5.74-4.74 10.4-10.6 10.4zm31.22-27.7c-6.78 0-12.66 3.73-15.63 9.2-2.97-5.47-8.84-9.2-15.6-9.2-4 0-7.66 1.3-10.6 3.46V4.38C12.02 2.52 10.45 1 8.53 1 6.6 1 5.03 2.5 5 4.4v28.7c.16 9.43 8 17.03 17.67 17.03 6.77 0 12.64-3.73 15.6-9.2 2.98 5.47 8.86 9.2 15.62 9.2 9.74 0 17.66-7.75 17.66-17.32 0-9.55-7.92-17.3-17.68-17.3z"\n                    ></path>\n                </svg>\n            </span>\n            <img class="bp-is-hidden bp-custom-logo" />\n            <div class="bp-header-btns">\n                <button\n                    class="bp-btn-plain bp-btn-annotate-draw bp-is-hidden"\n                    data-testid="draw-annotation"\n                    type="button"\n                >\n                    <svg\n                        class="bp-btn-annotate-draw-enter"\n                        width="22"\n                        height="21"\n                        viewBox="0 0 14.88 14.88"\n                        focusable="false"\n                    >\n                        <path\n                            d="M11.65,6.64,5.11,13.17.06,14.94,1.83,9.89,8.37,3.35Zm1.41-1.41L9.78,1.94,11.37.35a1,1,0,0,1,1.41,0l1.87,1.87a1,1,0,0,1,0,1.41Z"\n                            transform="translate(-0.06 -0.06)"\n                            fill-rule="evenodd"\n                        />\n                    </svg>\n                </button>\n                <button\n                    class="bp-btn-plain bp-btn-annotate-point bp-is-hidden"\n                    data-testid="point-annotation"\n                    type="button"\n                >\n                    <svg width="22" height="21" viewBox="0 0 22 21" focusable="false">\n                        <path\n                            d="M11 21l-4-4H1.99C.89 17 0 16.11 0 15V2C0 .895.89 0 1.99 0h18.02C21.11 0 22 .89 22 2v13c0 1.105-.89 2-1.99 2H15l-4 4zm-7-9.5c0-.276.228-.5.51-.5h8.98c.282 0 .51.232.51.5 0 .276-.228.5-.51.5H4.51c-.282 0-.51-.232-.51-.5zm0-3c0-.276.23-.5.5-.5h11c.276 0 .5.232.5.5 0 .276-.23.5-.5.5h-11c-.276 0-.5-.232-.5-.5zm0-3c0-.276.22-.5.498-.5h13.004c.275 0 .498.232.498.5 0 .276-.22.5-.498.5H4.498C4.223 6 4 5.768 4 5.5z"\n                            fill-rule="evenodd"\n                        />\n                    </svg>\n                </button>\n                <button class="bp-btn-plain bp-btn-print bp-is-hidden" data-testid="print-preview" type="button">\n                    <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                        <path\n                            d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"\n                        />\n                        <path d="M0 0h24v24H0z" fill="none" />\n                    </svg>\n                </button>\n                <button class="bp-btn-plain bp-btn-download bp-is-hidden" data-testid="download-preview" type="button">\n                    <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />\n                        <path d="M0 0h24v24H0z" fill="none" />\n                    </svg>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="bp" data-testid="bp" tabindex="-1">\n        <div class="bp-content" data-testid="bp-content" tabindex="-1">\n            <div class="bp-loading-wrapper">\n                <div class="bp-loading">\n                    <div class="bp-icon bp-icon-file"></div>\n                    <div class="bp-crawler-wrapper">\n                        <div class="bp-crawler">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                    </div>\n                    <span class="bp-loading-text"></span>\n                </div>\n                <div class="bp-loading-btn-container">\n                    <button class="bp-btn-plain bp-btn-loading-download bp-is-invisible" type="button"></button>\n                </div>\n            </div>\n            <button class="bp-btn-plain bp-navigate bp-navigate-left bp-is-hidden" type="button">\n                <svg viewBox="0 0 48 48" focusable="false">\n                    <path\n                        fill="#494949"\n                        stroke="#DCDCDC"\n                        stroke-miterlimit="10"\n                        d="M30.8,33.2L21.7,24l9.2-9.2L28,12L16,24l12,12L30.8,33.2z"\n                    />\n                    <path display="none" fill="none" d="M0,0h48v48H0V0z" />\n                </svg>\n            </button>\n            <button class="bp-btn-plain bp-navigate bp-navigate-right bp-is-hidden" type="button">\n                <svg viewBox="0 0 48 48" focusable="false">\n                    <path\n                        fill="#494949"\n                        stroke="#DCDCDC"\n                        stroke-miterlimit="10"\n                        d="M17.2,14.8l9.2,9.2l-9.2,9.2L20,36l12-12L20,12L17.2,14.8z"\n                    />\n                    <path display="none" fill="none" d="M48,48H0L0,0l48,0V48z" />\n                </svg>\n            </button>\n        </div>\n    </div>\n</div>\n'),this.container=this.container.querySelector(o.tb),this.previewContainer=this.container.querySelector(o.nb),this.contentContainer=this.container.querySelector(o.ub),"none"!==e.header&&this.setupHeader(e.header,e.logoUrl),this.progressBar=new a(this.container),this.setupLoading(),document.addEventListener("keydown",this.keydownHandler),this.container}},{key:"isSetup",value:function(){return this.container&&""!==this.container.innerHTML}},{key:"showNavigation",value:function(e,t){if(this.container){var n=this.container.querySelector(o.Cb),i=this.container.querySelector(o.Db);if(n&&i&&(n.title="Previous file",i.title="Next file",n.classList.add(o.K),i.classList.add(o.K),this.previewContainer.classList.remove(o.h),n.removeEventListener("click",this.leftHandler),i.removeEventListener("click",this.rightHandler),this.previewContainer.removeEventListener("mousemove",this.mousemoveHandler),!(t.length<2))){this.previewContainer.classList.add(o.h),this.previewContainer.addEventListener("mousemove",this.mousemoveHandler);var r=t.indexOf(e);0<r&&(n.addEventListener("click",this.leftHandler),n.classList.remove(o.K)),r<t.length-1&&(i.addEventListener("click",this.rightHandler),i.classList.remove(o.K))}}}},{key:"showPrintButton",value:function(e){var t=this.container.querySelector(o.sb);t&&(t.title="Print",t.classList.remove(o.K),t.addEventListener("click",e))}},{key:"showDownloadButton",value:function(e){var t=this.container.querySelector(o.qb);t&&(t.title="Download",t.classList.remove(o.K),t.addEventListener("click",e))}},{key:"showLoadingDownloadButton",value:function(e){var t=this.container.querySelector(o.rb);t&&(t.title="Download",t.classList.remove(o.L),t.addEventListener("click",e))}},{key:"showLoadingIndicator",value:function(){this.previewContainer&&this.previewContainer.classList.remove(o.U)}},{key:"hideLoadingIndicator",value:function(){if(this.previewContainer){this.previewContainer.classList.add(o.U);var e=this.previewContainer.querySelector(o.vb);e&&e.classList.remove(o.K)}}},{key:"startProgressBar",value:function(){this.progressBar.start()}},{key:"finishProgressBar",value:function(){this.progressBar.finish()}},{key:"setupNotification",value:function(){this.notification=new r.a(this.contentContainer)}},{key:"showNotification",value:function(e,t,n){this.notification&&this.notification.show(e,t,n)}},{key:"hideNotification",value:function(){this.notification&&this.notification.hide()}},{key:"replaceHeader",value:function(e){var t=this.container.querySelector(e);if(t){var n=this.container.querySelectorAll(".".concat(o.i));[].forEach.call(n,function(e){e.classList.add(o.K)}),t.classList.remove(o.K)}}},{key:"setupHeader",value:function(e,t){var n=this.container.querySelector(o.wb);n.classList.remove(o.K);var i=n.firstElementChild;if(i.className="".concat(o.i," ").concat(o.d),this.previewContainer.classList.add(o.g),"dark"===e&&this.container.classList.add(o.y),t){i.querySelector(o.Bb).classList.add(o.K);var r=i.querySelector(o.Ab);r.src=t,r.classList.remove(o.K)}}},{key:"setupLoading",value:function(){var e=this.container.querySelector(o.zb);e&&(e.querySelector(o.yb).textContent="Loading Preview...",e.querySelector(o.rb).textContent="Download File")}}]),e}();t.a=u},,,,,function(e,t,n){e.exports=n(144)},function(e,R,I){"use strict";I.r(R),function(e){I(145);var t=I(8),n=I.n(t),i=I(57),r=I.n(i),o=I(15),a=I.n(o),s=I(60),l=I(4),u=I(129),c=I(88),h=I(59),m=I(6),d=I(130),f=I(138),p=I(84),v=I(5),b=I(2),y=I(7),g=I(0),w=I(1),E=I(85);I(253);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(n,!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=["Office"],T=["INPUT","SELECT","TEXTAREA"],H=Object(b.l)(g.lb,document.currentScript),A=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(x(t=function(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?x(e):t}(this,L(e).call(this))),"api",new s.a),_(x(t),"open",!1),_(x(t),"count",{success:0,error:0,navigation:0}),_(x(t),"file",{}),_(x(t),"previewOptions",{}),_(x(t),"options",{}),_(x(t),"disabledViewers",{}),_(x(t),"token",""),_(x(t),"viewer",void 0),_(x(t),"collection",[]),_(x(t),"loaders",c.a),_(x(t),"logger",void 0),_(x(t),"retryCount",0),_(x(t),"logRetryCount",0),_(x(t),"retryTimeout",void 0),_(x(t),"container",void 0),_(x(t),"throttledMousemoveHandler",void 0),_(x(t),"cache",void 0),_(x(t),"ui",void 0),j.forEach(function(e){t.disabledViewers[e]=1}),t.location=H,t.cache=new h.a,t.ui=new f.a,t.browserInfo=l.a.getBrowserInfo(),t.download=t.download.bind(x(t)),t.print=t.print.bind(x(t)),t.handleTokenResponse=t.handleTokenResponse.bind(x(t)),t.handleFileInfoResponse=t.handleFileInfoResponse.bind(x(t)),t.handleFetchError=t.handleFetchError.bind(x(t)),t.handleViewerEvents=t.handleViewerEvents.bind(x(t)),t.handleViewerMetrics=t.handleViewerMetrics.bind(x(t)),t.triggerError=t.triggerError.bind(x(t)),t.throttledMousemoveHandler=t.getGlobalMousemoveHandler().bind(x(t)),t.navigateLeft=t.navigateLeft.bind(x(t)),t.navigateRight=t.navigateRight.bind(x(t)),t.keydownHandler=t.keydownHandler.bind(x(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(e,n.a),function(e,t,n){t&&P(e.prototype,t),n&&P(e,n)}(e,[{key:"destroy",value:function(){if(this.emitLoadMetrics(),this.viewer&&"function"==typeof this.viewer.destroy){if(this.file&&this.file.id){var e=v.a.createTag(this.file.id,w.b),t=v.a.get(e);v.a.stop(e);var n=S({event_name:w.i,value:{duration:t?t.elapsed:null,viewer_status:this.viewer.getLoadStatus()}},this.createLogEvent());v.a.reset(e),this.emit(w.k,n)}this.api.ejectInterceptors(),this.viewer.destroy()}this.viewer=void 0}},{key:"show",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};if(null!==t&&"object"===k(t))throw new Error("Bad access token!");this.previewOptions=S({},i,{token:t}),this.updateCollection(i.collection),this.parseOptions(this.previewOptions),this.load(e)}},{key:"hide",value:function(){this.open=!1,this.destroy(),this.ui.cleanup(),this.file=void 0}},{key:"reload",value:function(e){if(void 0===e&&(e=this.options.skipServerUpdate),e){if(!Object(y.d)(this.file))return;this.destroy(),this.setupUI(),this.loadViewer()}else{if(!this.file.id)return;this.load(this.file.id)}}},{key:"updateCollection",value:function(e){var t=Array.isArray(e)?e:[],n=[],i=[];t.forEach(function(e){if(e&&Object(b.v)(e))i.push(e.toString());else{if(!e||"object"!==k(e)||!Object(b.v)(e.id))throw new Error("Bad collection provided!");var t=S({},e,{id:e.id.toString()});i.push(t.id),n.push(t)}}),this.updateFileCache(n),this.collection=i,this.file&&this.ui.showNavigation(this.file.id,this.collection)}},{key:"updateFileCache",value:function(e){var i=this,t=0<arguments.length&&void 0!==e?e:[],n=t;Array.isArray(n)||(n=[t]),n.forEach(function(e){if(!e.watermark_info||!e.watermark_info.is_watermarked)if(Object(y.d)(e))Object(y.a)(i.cache,e);else{var t="[Preview SDK] Tried to cache invalid file",n=new m.a(w.c.INVALID_CACHE_ATTEMPT,t,{file:e});i.emitPreviewError(n)}})}},{key:"getCurrentViewer",value:function(){return this.viewer}},{key:"getCurrentFile",value:function(){return this.file}},{key:"getCurrentCollection",value:function(){return this.collection}},{key:"getViewers",value:function(){var t=[];return this.loaders.forEach(function(e){t=t.concat(e.getViewers())}),t}},{key:"disableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){t.disabledViewers[e]=1}):e&&(this.disabledViewers[e]=1)}},{key:"enableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){delete t.disabledViewers[e]}):e&&delete this.disabledViewers[e]}},{key:"disableHotkeys",value:function(){this.options.useHotkeys=!1}},{key:"enableHotkeys",value:function(){this.options.useHotkeys=!0}},{key:"resize",value:function(){this.viewer&&"function"==typeof this.viewer.resize&&this.viewer.resize()}},{key:"print",value:function(){Object(y.b)(this.file,this.options)&&Object(y.c)(this.viewer,"print")&&this.viewer.print()}},{key:"download",value:function(){var n=this,i="Sorry! You can’t download this file.";if(Object(y.b)(this.file,this.options)){var e=this.options,t=e.apiHost,r=e.queryParams;if(Object(y.m)(this.file,this.options)){var o=Object(b.q)(this.viewer.getRepresentation(),"content.url_template");if(!o)return void this.ui.showNotification(i);var a=S({response_content_disposition_type:"attachment"},r),s=Object(b.e)(this.viewer.createContentUrlWithAuthParams(o,this.viewer.getAssetPath()),a);this.api.reachability.downloadWithReachabilityCheck(s)}else{var l=Object(b.e)(Object(y.g)(this.file.id,t),r);this.api.get(l,{headers:this.getRequestHeaders()}).then(function(e){var t=Object(b.e)(e.download_url,r);n.api.reachability.downloadWithReachabilityCheck(t)}).catch(function(e){var t=Object(b.q)(e,"response.data.code")===g.X?"Downloading of this content has been disabled based on an access policy.":i;n.ui.showNotification(t)})}var c=S({event_name:w.h,value:this.viewer?this.viewer.getLoadStatus():null},this.createLogEvent());this.emit(w.k,c)}else this.ui.showNotification(i)}},{key:"updateToken",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t;this.previewOptions.token=e,n&&this.reload(!1)}},{key:"prefetch",value:function(e){var t,n,i,r=e.fileId,o=e.fileVersionId,a=e.token,s=e.sharedLink,l=void 0===s?"":s,c=e.sharedLinkPassword,u=void 0===c?"":c,h=e.preload,d=void 0!==h&&h;try{if(!(i=(n=(t=Object(y.f)(this.cache,{fileId:r,fileVersionId:o}))?this.getLoader(t):null)?n.determineViewer(t):null))return}catch(e){var f="Error prefetching file ID ".concat(r," - ").concat(e),p=new m.a(w.c.PREFETCH_FILE,f,{},e.message);return void this.emitPreviewError(p)}var v={viewer:i,file:t,token:a,representation:n.determineRepresentation(t,i)};d&&(v.sharedLink=l,v.sharedLinkPassword=u);var b=new i.CONSTRUCTOR(this.createViewerOptions(v));"function"==typeof b.prefetch&&b.prefetch({assets:!0,preload:d||!!b.getViewerOption("preload"),content:!d})}},{key:"prefetchViewers",value:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:[];this.getViewers().filter(function(e){return-1!==t.indexOf(e.NAME)}).forEach(function(e){var t=new e.CONSTRUCTOR(n.createViewerOptions({viewer:e}));"function"==typeof t.prefetch&&t.prefetch({assets:!0,preload:!1,content:!1})})}},{key:"load",value:function(e){this.destroy(),this.open=!0,this.logger=new u.a(this.location.locale,this.browserInfo),clearTimeout(this.retryTimeout);var t=this.file?this.file.id:void 0,n=this.file&&this.file.file_version?this.file.file_version.id:void 0,i=this.getFileOption(e,g.Y)||"";if("string"==typeof e||"number"==typeof e){var r=e.toString(),o=i?{fileVersionId:i}:{fileId:r},a={id:r};i&&(a.file_version={id:i}),this.file=Object(y.f)(this.cache,o)||a}else if(Object(y.d)(e))this.file=e;else{if(!e||"string"!=typeof e.id)throw new m.a(w.c.BAD_INPUT,"We’re sorry, the preview didn’t load.",{},"File is not a well-formed Box File object. See FILE_FIELDS in file.js for a list of required fields.");var s=e.id,l=e.file_version;this.file={id:s},l&&(this.file.file_version={id:l.id})}var c=v.a.createTag(this.file.id,w.d.previewLoadTime);v.a.start(c),i?i===n?this.retryCount+=1:this.retryCount=0:this.file.id===t?this.retryCount+=1:this.retryCount=0,this.api.ejectInterceptors(),this.options.responseInterceptor&&this.api.addResponseInterceptor(this.options.responseInterceptor),this.options.requestInterceptor&&this.api.addRequestInterceptor(this.options.requestInterceptor),"object"===k(e)&&this.options.skipServerUpdate?this.handleTokenResponse({}):Object(p.a)(this.file.id,this.previewOptions.token).then(this.handleTokenResponse).catch(this.handleFetchError)}},{key:"handleTokenResponse",value:function(e){this.options.token=e[this.file.id],this.ui.isSetup()&&0<this.retryCount||this.setupUI(),Object(y.d)(this.file)?(Object(y.a)(this.cache,this.file),this.loadFromCache()):this.loadFromServer()}},{key:"setupUI",value:function(){this.container=this.ui.setup(this.options,this.keydownHandler,this.navigateLeft,this.navigateRight,this.throttledMousemoveHandler),this.ui.setupNotification(),this.ui.showNavigation(this.file.id,this.collection),this.ui.showLoadingIndicator(),this.ui.startProgressBar();var e=v.a.createTag(this.file.id,w.b);v.a.start(e)}},{key:"parseOptions",value:function(e){var n=this,t=S({},e);this.options={},this.options.container=t.container,this.options.sharedLink=t.sharedLink,this.options.sharedLinkPassword=t.sharedLinkPassword,this.options.apiHost=t.apiHost?t.apiHost.replace(/\/$/,""):g.b,this.options.appHost=t.appHost?t.appHost.replace(/\/$/,""):g.c,this.options.header=t.header||"light",this.options.headerElement=t.headerElement,this.options.logoUrl=t.logoUrl||"",this.options.autoFocus=!1!==t.autoFocus,this.options.showDownload=!!t.showDownload,this.options.showAnnotations=!!t.showAnnotations,this.options.useHotkeys=!1!==t.useHotkeys,this.options.box3dApplication=t.box3dApplication,this.options.boxAnnotations=t.boxAnnotations,this.options.viewers=t.viewers||{},this.options.skipServerUpdate=!!t.skipServerUpdate,this.options.queryParams=t.queryParams||{},this.options.fixDependencies=!!t.fixDependencies||!!t.pauseRequireJS,this.options.disableEventLog=!!t.disableEventLog,this.options.previewWMPref=t.previewWMPref||"any",this.options.downloadWM=!!t.downloadWM,this.options.fileOptions=t.fileOptions||{},this.options.enableThumbnailsSidebar=!!t.enableThumbnailsSidebar,this.loaders=(t.loaders||[]).concat(c.a),this.options.requestInterceptor=t.requestInterceptor,this.options.responseInterceptor=t.responseInterceptor,Object.keys(this.options.viewers).forEach(function(e){var t=n.options.viewers[e].disabled;!0===t?n.disableViewers(e):!1===t&&n.enableViewers(e)})}},{key:"createViewerOptions",value:function(e){return r()(S({},this.options,{},e,{api:this.api,location:this.location,cache:this.cache,ui:this.ui}))}},{key:"loadFromCache",value:function(){this.logger.setCached(),this.loadViewer(),this.options.skipServerUpdate||this.loadFromServer()}},{key:"loadFromServer",value:function(){var e=this.options,t=e.apiHost,n=e.previewWMPref,i=e.queryParams,r=S({watermark_preference:Object(b.f)(n)},i),o=this.getFileOption(this.file.id,g.Y)||"",a=v.a.createTag(this.file.id,w.d.fileInfoTime);v.a.start(a);var s=Object(b.e)(Object(y.i)(this.file.id,o,t),r);this.api.get(s,{headers:this.getRequestHeaders()}).then(this.handleFileInfoResponse).catch(this.handleFetchError)}},{key:"handleFileInfoResponse",value:function(e){var t=e,n=v.a.createTag(this.file.id,w.d.fileInfoTime);v.a.stop(n),this.getFileOption(this.file.id,g.Y)&&(t=Object(y.l)(e,this.file.id));var i=t.file_version.id;if(!(!this.open||this.file&&this.file.file_version&&this.file.file_version.id!==i))try{this.file=t,this.logger.setFile(t);var r=Object(y.f)(this.cache,{fileVersionId:i}),o=Object(y.k)(t);o?Object(y.n)(this.cache,t):Object(y.a)(this.cache,t),r&&Object(y.d)(r)?r.file_version.sha1===t.file_version.sha1&&!o||(this.logger.setCacheStale(),this.reload(!0)):this.loadViewer()}catch(e){var a=e instanceof m.a?e:new m.a(w.c.LOAD_VIEWER,"We’re sorry, the preview didn’t load. Please refresh the page.",{},e.message);this.triggerError(a)}}},{key:"loadViewer",value:function(){var t=this;if(this.open){if(!1===this.file.is_download_available){var e=Object(b.t)()?{linkText:"Contact Us",linkUrl:"https://support.box.com"}:{};throw new m.a(w.c.NOT_DOWNLOADABLE,"Oops! It looks like something is wrong with this file. We apologize for the inconvenience and recommend that you upload a new version of this file or roll back to a previous version. Please contact us for more details.",e)}if(!Object(y.e)(this.file,g.jb))throw new m.a(w.c.PERMISSIONS_PREVIEW,"We’re sorry, you don’t have permission to preview this file.");Object(y.b)(this.file,this.options)&&this.ui.showLoadingDownloadButton(this.download);var n,i,r=this.getLoader(this.file);if(!r)throw i=this.getViewers().find(function(e){return-1<e.EXT.indexOf(t.file.extension)})?(n=w.c.ACCOUNT,"We’re sorry, your account is unable to preview this file type."):(n=w.c.UNSUPPORTED_FILE_TYPE,"We’re sorry, we can’t preview this file type in your web browser. To view this content please download and open it on your device."),new m.a(n,i);var o=r.determineViewer(this.file,Object.keys(this.disabledViewers));this.logger.setType(o.NAME);var a=r.determineRepresentation(this.file,o),s=this.createViewerOptions({viewer:o,representation:a,container:this.container,file:this.file});s.logger=this.logger,this.viewer=new o.CONSTRUCTOR(s),this.attachViewerListeners(),this.viewer.setup(),this.viewer.load(),this.emit("viewer",this.viewer),this.retryCount=0}}},{key:"attachViewerListeners",value:function(){this.viewer.addListener("error",this.triggerError),this.viewer.addListener(w.n.default,this.handleViewerEvents),this.viewer.addListener(w.n.metric,this.handleViewerMetrics)}},{key:"handleViewerEvents",value:function(e){switch(e.event){case w.n.download:this.download();break;case w.n.reload:this.reload();break;case w.n.load:this.finishLoading(e.data);break;case w.n.progressStart:this.ui.startProgressBar();break;case w.n.progressEnd:this.ui.finishProgressBar();break;case w.n.error:break;default:this.emit(e.event,e.data),this.emit(w.n.default,e)}}},{key:"handleViewerMetrics",value:function(e){var t=S({event_name:e.event,value:e.data},this.createLogEvent());this.emit(w.k,t)}},{key:"finishLoading",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(this.file&&this.file.id){var n=v.a.createTag(this.file.id,w.d.contentLoadTime);v.a.stop(n);var i=v.a.createTag(this.file.id,w.d.previewLoadTime);v.a.stop(i)}this.emitLoadMetrics(t),Object(y.b)(this.file,this.options)&&(this.ui.showDownloadButton(this.download),Object(y.c)(this.viewer,"print")&&this.ui.showPrintButton(this.print));var r=t.error;r?(this.count.error+=1,this.emit(w.n.load,{error:r,metrics:this.logger.done(this.count),file:this.file}),this.handleViewerMetrics({event:"failure"}),"function"==typeof window.callPhantom&&window.callPhantom(0)):(this.count.success+=1,this.emit(w.n.load,{viewer:this.viewer,metrics:this.logger.done(this.count),file:this.file}),this.handleViewerMetrics({event:"success"}),this.options.disableEventLog||this.logPreviewEvent(this.file.id,this.options),"function"==typeof window.callPhantom&&window.callPhantom(1)),!1!==t.endProgress&&this.ui.finishProgressBar(),this.options.autoFocus&&this.viewer&&this.viewer.containerEl&&this.viewer.containerEl.focus(),this.ui.hideLoadingIndicator(),this.prefetchNextFiles()}},{key:"logPreviewEvent",value:function(e,t){var n=this;this.logRetryCount=this.logRetryCount||0;var i=t.apiHost,r=t.token,o=t.sharedLink,a=t.sharedLinkPassword,s={event_type:"preview",source:{type:"file",id:e}},l=Object(b.o)({},r,o,a);this.api.post("".concat(i,"/2.0/events"),s,{headers:l}).then(function(){n.logRetryCount=0}).catch(function(){n.logRetryCount+=1,3<n.logRetryCount?n.logRetryCount=0:(clearTimeout(n.logRetryTimeout),n.logRetryTimeout=setTimeout(function(){n.logPreviewEvent(e,t)},500*n.logRetryCount))})}},{key:"handleFetchError",value:function(e){var t=this;if(this.open)if(Object(y.n)(this.cache,this.file),3<this.retryCount){var n=w.c.EXCEEDED_RETRY_LIMIT,i="We’re sorry, the preview didn’t load. Please refresh the page.";e.response&&429===e.response.status&&(n=w.c.RATE_LIMIT,i="We’re sorry, the preview didn’t load because your request was rate limited. Please wait a few minutes and try again.");var r=new m.a(n,i,{fileId:this.file.id});this.triggerError(r)}else{clearTimeout(this.retryTimeout);var o=Math.random()*(1e3*Math.pow(2,this.retryCount));if(e.headers){var a=parseInt(e.headers.get("Retry-After"),10);Number.isNaN(a)||(o=1e3*a)}this.retryTimeout=setTimeout(function(){t.load(t.file.id)},o)}}},{key:"getErrorViewer",value:function(){return new d.a(this.createViewerOptions({viewer:{NAME:"Error"},container:this.container,file:this.file}))}},{key:"triggerError",value:function(e){this.emitPreviewError(e);var t=Object(b.q)(e,"details.silent",!1);this.open&&!t&&(this.open=!1,Object(y.n)(this.cache,this.file),this.destroy(),this.setupUI(),this.viewer=this.getErrorViewer(),this.viewer.setup(),this.attachViewerListeners(),this.viewer.load(e))}},{key:"createLogEvent",value:function(){var e=this.file||{};return S({timestamp:Object(E.b)(),file_id:Object(b.q)(e,"id",""),file_version_id:Object(b.q)(e,"file_version.id",""),content_type:Object(b.q)(this.viewer,"options.viewer.NAME",""),extension:e.extension||"",locale:Object(b.q)(this.location,"locale",""),rep_type:Object(b.q)(this.viewer,"options.representation.representation","").toLowerCase()},Object(E.a)())}},{key:"emitPreviewError",value:function(e){var t=e;t.code=e.code||w.c.BROWSER_GENERIC;var n=t.displayMessage,i=t.message;t.displayMessage=Object(b.G)(n),t.message=Object(b.G)(i);var r=S({error:t},this.createLogEvent());this.emit(w.j,r)}},{key:"emitLoadMetrics",value:function(e){var t,n=(0<arguments.length&&void 0!==e?e:{}).encoding;if(this.file&&this.file.id){var i=this.file.id,r=v.a.createTag(i,w.d.fileInfoTime),o=v.a.createTag(i,w.d.convertTime),a=v.a.createTag(i,w.d.downloadResponseTime),s=v.a.createTag(i,w.d.contentLoadTime),l=v.a.createTag(i,w.d.previewLoadTime),c=v.a.get(r)||{},u=v.a.get(o)||{},h=v.a.get(a)||{},d=v.a.get(s)||{},f=v.a.get(l)||{},p=S((_(t={encoding:n,event_name:w.d.previewLoadEvent,value:f.elapsed||0},w.d.fileInfoTime,c.elapsed||0),_(t,w.d.convertTime,u.elapsed||0),_(t,w.d.downloadResponseTime,h.elapsed||0),_(t,w.d.contentLoadTime,d.elapsed||0),t),this.createLogEvent());this.emit(w.k,p),v.a.reset([r,o,a,s,l])}}},{key:"getRequestHeaders",value:function(e){var t=l.a.canPlayDash()&&!this.disabledViewers.Dash?g.Nb:g.Ob,n={"X-Rep-Hints":"".concat(g.Kb).concat(g.Lb).concat(g.Mb).concat(t)};return Object(b.o)(n,e||this.options.token,this.options.sharedLink,this.options.sharedLinkPassword)}},{key:"prefetchNextFiles",value:function(){var o=this,e=this.options,a=e.apiHost,t=e.previewWMPref,n=e.queryParams,i=e.skipServerUpdate,s=S({watermark_preference:Object(b.f)(t)},n);if(!(this.collection.length<2||i)){this.prefetchedCollection=this.prefetchedCollection||[];var r=this.collection.indexOf(this.file.id),l=this.collection.slice(r+1,r+4+1).filter(function(e){return-1===o.prefetchedCollection.indexOf(e)});0!==l.length&&Object(p.a)(l,this.previewOptions.token).then(function(r){l.forEach(function(i){var t=r[i],e=o.getFileOption(i,g.Y)||"",n=Object(b.e)(Object(y.i)(i,e,a),s);o.api.get(n,{headers:o.getRequestHeaders(t)}).then(function(e){Object(y.a)(o.cache,e),o.prefetchedCollection.push(e.id),o.prefetch({fileId:e.id,token:t})}).catch(function(e){var t="Error prefetching file ID ".concat(i," - ").concat(e),n=new m.a(w.c.PREFETCH_FILE,t,{fileId:i},e.message);o.emitPreviewError(n)})})}).catch(function(e){var t="Error prefetching files - ".concat(e),n=new m.a(w.c.PREFETCH_FILE,t,{fileIds:l},e.message);o.emitPreviewError(n)})}}},{key:"getGlobalMousemoveHandler",value:function(){var t=this;return a()(function(){if(clearTimeout(t.timeoutHandler),t.container){var e=!!t.viewer;t.container.classList.remove(g.T),e&&!t.viewer.allowNavigationArrows()||t.container.classList.add(g.T),t.timeoutHandler=setTimeout(function(){t.container&&t.container.classList.remove(g.T)},1500)}},1e3,!0)}},{key:"navigateToIndex",value:function(e){if(Array.isArray(this.collection)&&!(this.collection.length<2)){var t=this.collection[e];this.emit("navigate",t),this.count.navigation+=1,this.load(t)}}},{key:"navigateLeft",value:function(){var e=this.collection.indexOf(this.file.id),t=0===e?0:e-1;t!==e&&this.navigateToIndex(t)}},{key:"navigateRight",value:function(){var e=this.collection.indexOf(this.file.id),t=e===this.collection.length-1?this.collection.length-1:e+1;t!==e&&this.navigateToIndex(t)}},{key:"getLoader",value:function(t){var n=this;return this.loaders.find(function(e){return e.canLoad(t,Object.keys(n.disabledViewers))})}},{key:"keydownHandler",value:function(e){var t=e.target;if(this.options.useHotkeys&&!(!t||-1<T.indexOf(t.nodeName)||"DIV"===t.nodeName&&t.getAttribute("contenteditable"))){var n=!1,i=Object(b.k)(e);if(i){if(this.viewer&&"function"==typeof this.viewer.onKeydown&&(n=!!this.viewer.onKeydown(i,e)),!n)switch(i){case"ArrowLeft":this.navigateLeft(),n=!0;break;case"ArrowRight":this.navigateRight(),n=!0}n&&(e.preventDefault(),e.stopPropagation())}}}},{key:"getFileOption",value:function(e,t){var n="string"==typeof e?e:e.id;return Object(b.q)(this.previewOptions,"fileOptions.".concat(n,".").concat(t))}}]),e}();e.Box=e.Box||{},e.Box.Preview=A,R.default=A}.call(this,I(19))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}function l(e){return"object"===n(e)?null!==e:"function"==typeof e}function i(e){try{return!!e()}catch(e){return!0}}function r(e,t){s(e),function(e){if(!l(e))throw TypeError(e+" is not an object!")}(t);var n=arguments.length<3?e:s(arguments[2]);if(h&&!u)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(Function.bind.apply(e,i))}var r=n.prototype,o=Object.create(l(r)?r:Object.prototype),a=Function.apply.call(e,o,t);return l(a)?a:o}var c,u,h,o,a;function d(e){return"function"==typeof e||"[object Function]"===o.call(e)}function f(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),a)}!function(){if(!Object.setPrototypeOf&&!{}.__proto__){var t=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return e.__proto__?e.__proto__:t.call(Object,e)}}}(),"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n+=1){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=t,o=0;o<i;){var a=n[o];if(e.call(r,a,o,n))return a;o++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=t,o=0;o<i;){var a=n[o];if(e.call(r,a,o,n))return o;o++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0==i)return!1;var r,o,a=0|t,s=Math.max(0<=a?a:i-Math.abs(a),0);for(;s<i;){if((r=n[s])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;s++}return!1}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}}),Number.isNaN=Number.isNaN||function(e){return e!=e},c=("undefined"!=typeof Reflect?Reflect:{}).construct,u=i(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!i(function(){c(function(){})}),"undefined"!=typeof Reflect?Reflect.construct=r:Reflect={construct:r},Array.from||(Array.from=(o=Object.prototype.toString,a=Math.pow(2,53)-1,function(e,t,n){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,o=1<arguments.length?t:void 0;if(void 0!==o){if(!d(o))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=n)}for(var a,s=f(i.length),l=d(this)?Object(new this(s)):new Array(s),c=0;c<s;)a=i[c],l[c]=o?void 0===r?o(a,c):o.call(r,a,c):a,c+=1;return l.length=s,l})),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},function(e,t,n){var m=n(147),y=n(177),g=n(92),w=n(179),E=n(189),k=n(192),O=n(193),S=n(194),P=n(196),L=n(197),x=n(198),C=n(70),_=n(203),j=n(204),T=n(210),H=n(64),A=n(95),R=n(212),I=n(20),M=n(214),V=n(63),D=1,B=2,F=4,z="[object Arguments]",N="[object Function]",U="[object GeneratorFunction]",q="[object Object]",W={};W[z]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object DataView]"]=W["[object Boolean]"]=W["[object Date]"]=W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Map]"]=W["[object Number]"]=W[q]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object Symbol]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Error]"]=W[N]=W["[object WeakMap]"]=!1,e.exports=function n(i,r,o,e,t,a){var s,l=r&D,c=r&B,u=r&F;if(o&&(s=t?o(i,e,t,a):o(i)),void 0!==s)return s;if(!I(i))return i;var h=H(i);if(h){if(s=_(i),!l)return O(i,s)}else{var d=C(i),f=d==N||d==U;if(A(i))return k(i,l);if(d==q||d==z||f&&!t){if(s=c||f?{}:T(i),!l)return c?P(i,E(s,i)):S(i,w(s,i))}else{if(!W[d])return t?i:{};s=j(i,d,l)}}var p=(a=a||new m).get(i);if(p)return p;a.set(i,s),M(i)?i.forEach(function(e){s.add(n(e,r,o,e,i,a))}):R(i)&&i.forEach(function(e,t){s.set(t,n(e,r,o,t,i,a))});var v=u?c?x:L:c?keysIn:V,b=h?void 0:v(i);return y(b||i,function(e,t){b&&(e=i[t=e]),g(s,t,n(e,r,o,t,i,a))}),s}},function(e,t,n){var i=n(47),r=n(153),o=n(154),a=n(155),s=n(156),l=n(157);function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var i=n(48),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():r.call(t,n,1),--this.size,!0)}},function(e,t,n){var i=n(48);e.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var i=n(48);e.exports=function(e){return-1<i(this.__data__,e)}},function(e,t,n){var r=n(48);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var i=n(47);e.exports=function(){this.__data__=new i,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(47),o=n(61),a=n(164);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var i=n(56),r=n(161),o=n(20),a=n(91),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(i(e)?d:s).test(a(e))}},function(e,t,n){var i=n(62),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{var i=!(e[s]=void 0)}catch(e){}var r=a.call(e);return i&&(t?e[s]=n:delete e[s]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var i,r=n(162),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var i=n(14)["__core-js_shared__"];e.exports=i},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var i=n(165),r=n(172),o=n(174),a=n(175),s=n(176);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var i=n(166),r=n(47),o=n(61);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},function(e,t,n){var i=n(167),r=n(168),o=n(169),a=n(170),s=n(171);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var i=n(49);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var i=n(49),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},function(e,t,n){var i=n(49),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}},function(e,t,n){var i=n(49);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var i=n(50);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var i=n(50);e.exports=function(e){return i(this,e).get(e)}},function(e,t,n){var i=n(50);e.exports=function(e){return i(this,e).has(e)}},function(e,t,n){var r=n(50);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},function(e,t,n){var i=n(24),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t,n){var i=n(51),r=n(63);e.exports=function(e,t){return e&&i(t,r(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},function(e,t,n){var i=n(182),r=n(31),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){var i=n(39),r=n(31);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var i=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&-1<e&&e%1==0&&e<t}},function(e,t,n){var i=n(186),r=n(66),o=n(67),a=o&&o.isTypedArray,s=a?r(a):i;e.exports=s},function(e,t,n){var i=n(39),r=n(96),o=n(31),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!a[i(e)]}},function(e,t,n){var i=n(68),r=n(188),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var i=n(97)(Object.keys,Object);e.exports=i},function(e,t,n){var i=n(51),r=n(99);e.exports=function(e,t){return e&&i(t,r(t),e)}},function(e,t,n){var r=n(20),o=n(68),a=n(191),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&s.call(e,i))&&n.push(i);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,a,s){(function(e){var t=s(14),n=a&&!a.nodeType&&a,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,r=i&&i.exports===n?t.Buffer:void 0,o=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=o?o(n):new e.constructor(n);return e.copy(i),i}}).call(this,s(65)(e))},function(e,t){e.exports=function(e,t){var n=-1,i=e.length;for(t=t||Array(i);++n<i;)t[n]=e[n];return t}},function(e,t,n){var i=n(51),r=n(69);e.exports=function(e,t){return i(e,r(e),t)}},function(e,t){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}},function(e,t,n){var i=n(51),r=n(101);e.exports=function(e,t){return i(e,r(e),t)}},function(e,t,n){var i=n(104),r=n(69),o=n(63);e.exports=function(e){return i(e,o,r)}},function(e,t,n){var i=n(104),r=n(101),o=n(99);e.exports=function(e){return i(e,o,r)}},function(e,t,n){var i=n(24)(n(14),"DataView");e.exports=i},function(e,t,n){var i=n(24)(n(14),"Promise");e.exports=i},function(e,t,n){var i=n(24)(n(14),"Set");e.exports=i},function(e,t,n){var i=n(24)(n(14),"WeakMap");e.exports=i},function(e,t){var i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,n){var r=n(71),o=n(206),a=n(207),s=n(208),l=n(209);e.exports=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return a(e);case"[object Set]":return new i;case"[object Symbol]":return s(e)}}},function(e,t,n){var i=n(14).Uint8Array;e.exports=i},function(e,t,n){var i=n(71);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var i=n(62),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var i=n(71);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var i=n(211),r=n(103),o=n(68);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:i(r(e))}},function(e,t,n){function i(e){if(!r(e))return{};if(o)return o(e);a.prototype=e;var t=new a;return a.prototype=void 0,t}var r=n(20),o=Object.create;function a(){}e.exports=i},function(e,t,n){var i=n(213),r=n(66),o=n(67),a=o&&o.isMap,s=a?r(a):i;e.exports=s},function(e,t,n){var i=n(70),r=n(31);e.exports=function(e){return r(e)&&"[object Map]"==i(e)}},function(e,t,n){var i=n(215),r=n(66),o=n(67),a=o&&o.isSet,s=a?r(a):i;e.exports=s},function(e,t,n){var i=n(70),r=n(31);e.exports=function(e){return r(e)&&"[object Set]"==i(e)}},function(e,t,n){var i=n(14);e.exports=function(){return i.Date.now()}},function(e,t,n){var i=n(20),r=n(218),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var i=n(39),r=n(31);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},function(e,t,n){"use strict";var i=n(13),r=n(105),o=n(221),a=n(111);function s(e){var t=new o(e),n=r(o.prototype.request,t);return i.extend(n,o.prototype,t),i.extend(n,t),n}var l=s(n(108));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(112),l.CancelToken=n(234),l.isCancel=n(107),l.all=function(e){return Promise.all(e)},l.spread=n(235),e.exports=l,e.exports.default=l},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(13),i=n(106),o=n(222),a=n(223),s=n(111);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var n=[a,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)i=i.then(n.shift(),n.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(r.merge(t||{},{method:n,url:e}))}}),r.forEach(["post","put","patch"],function(i){l.prototype[i]=function(e,t,n){return this.request(r.merge(n||{},{method:i,url:e,data:t}))}}),e.exports=l},function(e,t,n){"use strict";var i=n(13);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=r},function(e,t,n){"use strict";var i=n(13),r=n(224),o=n(107),a=n(108),s=n(232),l=n(233);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,n){"use strict";var i=n(13);e.exports=function(t,n,e){return i.forEach(e,function(e){t=e(t,n)}),t}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(13);e.exports=function(n,i){r.forEach(n,function(e,t){t!==i&&t.toUpperCase()===i.toUpperCase()&&(n[i]=e,delete n[t])})}},function(e,t,n){"use strict";var r=n(110);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var o=n(13),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,r={};return e&&o.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=o.trim(e.substr(0,i)).toLowerCase(),n=o.trim(e.substr(i+1)),t){if(r[t]&&0<=a.indexOf(t))return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([n]):r[t]?r[t]+", "+n:n}}),r}},function(e,t,n){"use strict";var i,r,o,a=n(13);function s(e){var t=e;return r&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}e.exports=a.isStandardBrowserEnv()?(r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),i=s(window.location.href),function(e){var t=a.isString(e)?s(e):e;return t.protocol===i.protocol&&t.host===i.host}):function(){return!0}},function(e,t,n){"use strict";var s=n(13);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,i,r,o){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(i)&&a.push("path="+i),s.isString(r)&&a.push("domain="+r),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var i=n(112);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},e.exports=r},function(e,t,n){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){}]);